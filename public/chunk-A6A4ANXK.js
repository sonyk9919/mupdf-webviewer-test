import{a as Fo}from"./chunk-IHO6XYTU.js";import{f as wo,g as No,h as Ao,i as ko,j as Ro}from"./chunk-HQGKOERF.js";import{a as Lo,e as Uo,g as Vo}from"./chunk-XTVFYQNI.js";import{A as he,B as mi,C as Et,D as yo,a as V,b as Kt,c as Ie,d as ht,e as Di,f as Ei,g as Ti,h as Ii,i as fe,j as ei,k as Pe,l as di,m as ti,n as Mt,o as Ai,p as _o,q as bo,r as xo,s as at,t as Ye,u as vo,v as We,w as st,x as Ne,z as Po}from"./chunk-PJJ3CU4Q.js";import{$c as vn,$d as Zt,$e as Mr,$f as ki,Ae as Ve,Ag as Li,Bb as k,Bg as yn,Ca as tt,Cb as _e,Cc as xi,D as Nn,Db as zn,Dd as Qt,Df as Y,E as An,Eb as it,Ed as ot,Ef as uo,Eg as It,Fa as Ci,Fb as bi,Fd as le,Ff as fo,G as _t,Gf as Ni,H as li,Hc as He,Hf as go,Ib as g,Id as we,Ie as oe,If as re,J as $t,Ja as _i,Jb as C,Jf as ho,K as bt,Ka as a,Kb as Te,Kd as yi,Kf as ge,Lb as J,Lf as Co,M as G,Mb as L,Md as Ot,Na as Fn,Nd as ao,Nf as Dt,Oa as u,Od as Xt,Oe as U,Pa as bn,Pb as jn,Pd as Oi,Pe as rt,Pg as So,Qa as I,Qb as se,R as xt,Ra as F,Rb as Pt,Sb as Fe,Ta as Ln,Tb as de,Ua as D,Ub as $n,Ue as po,Uh as To,V as kn,Vb as Hn,W as qe,Wb as Yn,We as Mi,Xa as Yt,Xb as yt,Xc as vi,Ya as p,Yb as Wn,Yc as Ut,Za as Un,Zf as Oo,_ as mt,_a as z,_b as Le,_c as Qe,_d as so,a as W,ac as B,ad as Vt,af as Jt,ag as Tt,b as K,ba as Rn,bc as Lt,cb as l,cc as Ue,db as c,dc as xn,dg as Ri,dh as Mo,e as Sr,eb as y,ec as be,ef as pi,eg as Fi,ei as Bi,f as m,fb as X,fc as Kn,fh as Ui,fi as Gi,ga as Ht,gb as Z,gc as qn,gd as io,ha as et,hb as Rt,hc as Qn,hd as Bt,hf as St,ib as T,id as Pi,j as Tn,jd as q,jf as mo,ka as ut,kb as Vn,kd as Oe,kf as M,kg as ui,kh as Do,lb as P,ld as ci,lf as ue,m as In,mb as b,me as lo,nb as Bn,nd as te,ne as co,oa as j,ob as Gn,od as no,pa as R,pc as Wt,pd as oo,qb as ze,qc as Xn,qd as qt,qg as ii,ra as N,rb as je,rc as me,rd as Se,s as wn,sb as $e,sc as Zn,sd as ro,se as Si,tb as H,tc as Jn,td as Pn,u as jt,ua as vt,ub as f,uc as gt,ud as Me,ui as Io,v as _n,va as x,vb as h,vc as S,wa as v,wb as ft,wc as eo,wd as xe,xb as Ft,xc as to,xd as nt,xf as wi,xh as Vi,yd as ve,yh as Eo,z as ne}from"./chunk-6FTJLYMX.js";var zi=(()=>{let i=class i{baseHref;httpClient;get userUrl(){return`${this.baseHref}v4/user`}gzipHeaders;constructor(e,t){this.baseHref=e,this.httpClient=t,this.gzipHeaders=new Lt({"Content-Encoding":"gzip","Accept-Language":"utf-8"})}getUserList(e){let t=`${this.userUrl}`;return this.httpClient.get(t,{headers:this.gzipHeaders,params:this.makeHttpParams(e)})}deleteUsers(e){let t=`${this.userUrl}`;return this.httpClient.request("delete",t,{body:e})}postRegisterUser(e,t,o,s){return this.httpClient.post(`${this.userUrl}`,{userId:t,password:o,name:e,type:s})}patchUser(e,t){let o=`${this.baseHref}v4/user/${e}`;return this.httpClient.patch(o,t)}makeHttpParams(e){let t=new Ue;return Object.keys(e).filter(o=>e[o]!==void 0).forEach(o=>{t=t.set(o,String(e[o]))}),t}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var Er=n=>["field",n],Tr=(n,i)=>["label-box",n,i],Ir=n=>["selectable-list",n],wr=n=>["ep-button",n];function Nr(n,i){if(n&1){let r=T();l(0,"button",2),P("click",function(){x(r);let t=b();return v(t.popupChange())}),l(1,"i",3),P("click",function(t){x(r);let o=b();return v(o.refresh(t))}),c(),l(2,"span"),f(3),g(4,"translate"),c()()}if(n&2){let r=b();Yt("color",r.isSelected||r.isExistFilter?"primary":"white")("size",r.btSize),a(),p("ngClass",r.iconStyle),a(2),h(C(4,4,r.isExistFilter?"FILTERED":"FILTER"))}}function Ar(n,i){if(n&1&&(l(0,"label"),f(1),c()),n&2){let r=b().$implicit;a(),h(r.label)}}function kr(n,i){if(n&1){let r=T();l(0,"sd-date-dropdown",13),P("dateChange",function(t){x(r);let o=b(3);return v(o.customDate(t))}),c()}if(n&2){let r=b().$implicit,e=b(2);z("selected",e.isActiveFilter("date",r.item[0].value)),p("ngClass",bi(8,Tr,r.type,e.formSize))("activeFilter",e.activeFilter)("datePickerDirection",e.datePickerDirection)("disableNext",!0)("dateFormat",(r.options==null?null:r.options.dateFormat)||"yyyy.MM.dd")("defaultDurationType",e.DefaultDurationType.MONTH)}}function Rr(n,i){n&1&&y(0,"div")}function Fr(n,i){if(n&1){let r=T();l(0,"pu-dropdown",14),P("ngModelChange",function(t){x(r);let o=b().$implicit,s=b(2);return v(s.selectDropdown(o,t))}),c()}if(n&2){let r=b().$implicit,e=b(2);p("size",e.formSize)("options",r.item)("ngModel",e.currentDropdown(r))("ngStyle",r.options==null?null:r.options.style)}}function Lr(n,i){if(n&1){let r=T();X(0),l(1,"pu-checkbox",17),P("ngModelChange",function(){let t=x(r).$implicit,o=b(4);return v(o.applyColumnFilter(t.value))}),c(),Z()}if(n&2){let r=i.$implicit;a(),p("label",r.label)("ngModel",r.value.isActive)}}function Ur(n,i){if(n&1&&(X(0),l(1,"div",15),D(2,Lr,2,2,"ng-container",16),c(),Z()),n&2){let r=b().$implicit;a(2),p("ngForOf",r.item)}}function Vr(n,i){if(n&1){let r=T();l(0,"button",20),P("click",function(){let t=x(r).$implicit,o=b(2).$implicit,s=b(2);return v(s.active(o.type,t.value))}),f(1),g(2,"translate"),c()}if(n&2){let r=i.$implicit,e=b(2).$implicit,t=b(2);p("ngClass",it(6,wr,r.value)),Yt("color",t.isActiveFilter(e.type,r.value)?"primary":t.btColor)("size",t.formSize),a(),h(C(2,4,r.label))}}function Br(n,i){if(n&1&&(l(0,"div",18),D(1,Vr,3,8,"button",19),c()),n&2){let r=b().$implicit;p("ngClass",it(2,Ir,r.type)),a(),p("ngForOf",r.item)}}function Gr(n,i){if(n&1&&(l(0,"div",7),D(1,Ar,2,1,"label",8)(2,kr,1,11,"sd-date-dropdown",9)(3,Rr,1,0,"div",10)(4,Fr,1,4,"pu-dropdown",11)(5,Ur,3,1,"ng-container",10)(6,Br,2,4,"div",12),c()),n&2){let r=i.$implicit,e=b(2);p("ngClass",it(7,Er,r.type))("ngSwitch",r.type),a(),p("ngIf",!e.elClassList.contains("no-label")&&!!r.label),a(),p("ngSwitchCase","custom-date"),a(),p("ngSwitchCase","vr"),a(),p("ngSwitchCase","dropdown"),a(),p("ngSwitchCase","columns")}}function zr(n,i){if(n&1){let r=T();l(0,"button",21),P("click",function(){x(r);let t=b(2);return v(t.popupChange())}),f(1),g(2,"translate"),c()}if(n&2){let r=b(2);Yt("size",r.btSize||"tiny"),a(),h(C(2,2,"CLOSE"))}}function jr(n,i){if(n&1&&(l(0,"div",4),D(1,Gr,7,9,"div",5)(2,zr,3,4,"button",6),c()),n&2){let r=b();a(),p("ngForOf",r.filterMenus),a(),p("ngIf",!r.dock)}}var wt=class wt{ngControl;changeDetectorRef;elRef;get DefaultDurationType(){return _o}get isExistFilter(){return Object.keys(this.activeFilter).length!==0}get iconStyle(){return{"papycon-funnel":!this.isExistFilter,"papycon-cross":this.isExistFilter}}filterMenus=[];deactive=!0;activeFilter={};datePickerDirection="left";activeFilterChange=new tt;columnFilterChange=new tt;isSelected=!1;menuSubs=[];btColor="grey";dock=!1;btSize="small";formSize="small";elClassList;visibleYearSelector=!1;constructor(i,r,e){this.ngControl=i,this.changeDetectorRef=r,this.elRef=e,this.ngControl&&(this.ngControl.valueAccessor=this)}hostMouseDown(i){i.stopImmediatePropagation(),i.stopPropagation()}ngOnInit(){let{classList:i}=this.elRef.nativeElement;this.elClassList=i,this.dock=i.contains("dock"),this.isSelected=this.dock;let r=this.filterMenus.filter(t=>t.defaultValues),e=this.filterMenus.map(t=>t.defaultValues).filter(oe.isDefined).flat();r.length>0&&e.length>0&&r.forEach(t=>{e.forEach(o=>this.active(t.type,o))}),i.contains("button-color-dflt")&&(this.btColor="white"),i.contains("small")&&(this.btSize="small"),i.contains("form-small")&&(this.formSize="small")}ngOnChanges(i){i.activeFilter?.currentValue.date?this.buildConstDateFilter(i.activeFilter.currentValue.date.value[0]):i.activeFilter?.currentValue.status&&this.emit()}refresh(i){return this.isExistFilter?(this.activeFilter={},this.emit(),i&&i.stopPropagation(),!1):!0}customDate(i){this.activeFilter.date={value:["custom"],data:{startDate:new Date(i.startDate),endDate:new Date(i.endDate)}},U.setDayEnd(this.activeFilter.date.data.endDate),this.emit()}active(i,r){this.toggleYearSelector(!0);let e=this.filterMenus.find(t=>t.type===i);e!==void 0&&(this.deactive&&this.activeFilter[i]?.value.find(t=>t===r)?this.activeFilter[i].value=this.activeFilter[i].value.filter(t=>t!==r):e.isMulti&&this.activeFilter[i]?this.activeFilter[i]={value:[...this.activeFilter[i].value,r]}:this.activeFilter[i]={value:[r]},this.isAllValue(r)||this.activeFilter[i].value.length===0?delete this.activeFilter[i]:this.buildConstDateFilter(r),this.emit())}isActiveFilter(i,r){return!!this.activeFilter[i]?.value.find(e=>e===r)||this.isAllValue(r)&&!this.activeFilter[i]}popupChange(){this.isSelected=!this.isSelected,this.isSelected?this.menuSubs.push(bt(li(window,"mousedown"),li(window,"touchstart")).pipe(qe(1)).subscribe({next:()=>{this.popupChange()}})):(this.menuSubs.forEach(i=>i.unsubscribe()),this.menuSubs=[]),this.changeDetectorRef.markForCheck()}toggleYearSelector(i=!1){this.visibleYearSelector=!i&&!this.visibleYearSelector}currentDropdown(i){let r=this.activeFilter[i.key||i.type]?.value;return r&&r[0]!==void 0&&i.item.find(e=>e.value===r[0].value)||i.item[0]}selectDropdown(i,r){let e=i.key||i.type,t=this.activeFilter[e];r.value===void 0||r.value===null?delete this.activeFilter[e]:this.activeFilter[e]={value:[r]};let o=this.activeFilter[e];t===o||t?.value[0].value===o?.value[0].value||this.emit()}applyColumnFilter(i){this.columnFilterChange.emit(i)}writeValue(i){this.changeDetectorRef.markForCheck(),this.activeFilter=i||{}}registerOnChange(i){this.avcChanger=i}registerOnTouched(){}isAllValue(i){return wt.ALL_VALUES.has(i.toLowerCase())}buildConstDateFilter(i){U.bindConst(this.activeFilter,i)}emit(){this.activeFilterChange.emit(this.activeFilter),this.avcChanger(this.activeFilter)}avcChanger=i=>i};m(wt,"ALL_VALUES",new Set(["all","not-selected"])),m(wt,"\u0275fac",function(r){return new(r||wt)(u(Pi,10),u(L),u(Ci))}),m(wt,"\u0275cmp",I({type:wt,selectors:[["sd-filter-pop-up"]],hostBindings:function(r,e){r&1&&P("mousedown",function(o){return e.hostMouseDown(o)})("touchstart",function(o){return e.hostMouseDown(o)})},inputs:{filterMenus:"filterMenus",deactive:"deactive",activeFilter:"activeFilter",datePickerDirection:"datePickerDirection"},outputs:{activeFilterChange:"activeFilterChange",columnFilterChange:"columnFilterChange"},standalone:!1,features:[k([S]),vt],decls:2,vars:2,consts:[["class","ep-button dock-button",3,"click",4,"ngIf"],["class","filters",4,"ngIf"],[1,"ep-button","dock-button",3,"click"],[1,"papycon",3,"click","ngClass"],[1,"filters"],[3,"ngClass","ngSwitch",4,"ngFor","ngForOf"],["class","ep-button","color","white",3,"click",4,"ngIf"],[3,"ngClass","ngSwitch"],[4,"ngIf"],[3,"ngClass","activeFilter","datePickerDirection","selected","disableNext","dateFormat","defaultDurationType","dateChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"size","options","ngModel","ngStyle","ngModelChange",4,"ngSwitchCase"],[3,"ngClass",4,"ngSwitchDefault"],[3,"dateChange","ngClass","activeFilter","datePickerDirection","disableNext","dateFormat","defaultDurationType"],[3,"ngModelChange","size","options","ngModel","ngStyle"],[1,"columns-filter"],[4,"ngFor","ngForOf"],[3,"ngModelChange","label","ngModel"],[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],["color","white",1,"ep-button",3,"click"]],template:function(r,e){r&1&&D(0,Nr,5,6,"button",0)(1,jr,3,2,"div",1),r&2&&(p("ngIf",!e.dock),a(),p("ngIf",e.isSelected))},styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]:not(.dock)   .filters[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #DADADA;border-radius:6px;box-shadow:0 4px 32px #6c6c6c1f;padding:24px 20px;box-sizing:border-box;position:absolute;z-index:999;transform:translateY(4px);left:0}.dock[_nghost-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child), .dock[_nghost-%COMP%]   .field.custom-date[_ngcontent-%COMP%]{margin-left:20px}[_nghost-%COMP%]:not(.inline)   .filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(:first-child){margin-top:12px}.inline[_nghost-%COMP%]   .filters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.inline[_nghost-%COMP%]   .filters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-left:12px}.inline[_nghost-%COMP%]   .vr[_ngcontent-%COMP%]{width:1px;background:#dadada;line-height:30px;height:30px}.dock-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:19px}.filters[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%;margin-top:20px}.filters[_ngcontent-%COMP%]   .columns-filter[_ngcontent-%COMP%]{font-size:13px;line-height:22px;display:flex;flex-direction:row;flex-wrap:wrap;column-gap:14px;row-gap:12px}.filters[_ngcontent-%COMP%]   .columns-filter[_ngcontent-%COMP%]   pu-checkbox[_ngcontent-%COMP%]{cursor:pointer}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;display:inline-block;height:28px}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%]{display:flex}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px;margin-right:10px;border:1px solid #363636;border-radius:5px;cursor:pointer}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#f79f1a;color:#fff}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   sd-date-dropdown[_ngcontent-%COMP%]{display:flex}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   sd-date-dropdown[_ngcontent-%COMP%]  .calendar-container{z-index:999;position:absolute}.right[_nghost-%COMP%]   .filters[_ngcontent-%COMP%]{right:0}.inline-date[_nghost-%COMP%]   .date[_ngcontent-%COMP%], .inline-date[_nghost-%COMP%]   .custom-date[_ngcontent-%COMP%]{display:inline-block}.inline-date[_nghost-%COMP%]:not(.date-only)   .field.custom-date[_ngcontent-%COMP%]{float:right}.inline-date.date-only[_nghost-%COMP%]   .field.custom-date[_ngcontent-%COMP%]{margin-top:0}.field.dropdown[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}"],changeDetection:0}));var Be=wt;function $r(n,i){if(n&1){let r=T();l(0,"button",3),P("click",function(){x(r);let t=b();return v(t.movePage(1))}),f(1,"\u2026"),c()}}function Hr(n,i){if(n&1){let r=T();l(0,"button",4),P("click",function(){let t=x(r).$implicit,o=b();return v(o.movePage(t))}),f(1),c()}if(n&2){let r=i.$implicit,e=b();Yt("color",e.getIndexClass(r)?"primary-70":"dark"),a(),h(r)}}function Yr(n,i){if(n&1){let r=T();l(0,"button",3),P("click",function(){x(r);let t=b();return v(t.movePage(t.last))}),f(1,"\u2026"),c()}}var Ke=(()=>{let i=class i{ngControl;cdr;get first(){return this._first}set first(e){if(this.first!==e){if(this.last<e)throw new Error(`'first' value out of range. Expect last(${this.last}) < first(${e})`);this._first=e,this.page<this.first?this.page=this.first:this.computeSideList()}}get last(){return this._last}set last(e){if(this.last!==e){if(e<this.first)throw new Error(`'last' value out of range. Expect last(${e}) < first(${this.first})`);this._last=e,this.last<this.page?this.page=this.last:this.computeSideList()}}get page(){return this._page}set page(e){if(this.page!==e){if(this.last<e)throw new Error(`page value out of range. Expect page(${e}) < last(${this.last})`);if(e<this.first)throw new Error(`page value out of range. Expect first(${this.first}) < page(${e})`);this._page=e,this.computeSideList()}}get sideButtonCount(){return this._sideButtonCount}set sideButtonCount(e){this.sideButtonCount!==e&&(this._sideButtonCount=e,this.computeSideList())}prevLabel="";nextLabel="";pageChange=new tt;indexList=[1];_first=1;_last=1;_page=1;_sideButtonCount=0;constructor(e,t){this.ngControl=e,this.cdr=t,this.ngControl&&(this.ngControl.valueAccessor=this)}ngOnChanges(){this.computeSideList()}ngOnInit(){this.computeSideList()}getIndexClass(e){return e===this.page}movePage(e){this.page!==e&&(this.writeValue(e),this.emit())}writeValue(e){this.cdr.markForCheck(),this.page=e}registerOnChange(e){this.avcChanger=e}registerOnTouched(){}emit(){this.avcChanger(this.page),this.pageChange.emit(this.page)}computeSideList(){this.indexList=Array.from({length:this.sideButtonCount*2+4}).map((e,t)=>t-this.sideButtonCount-1).map(e=>this.page-this.first-1<this.sideButtonCount?this.first+this.sideButtonCount+e+1:this.last-this.page-1<this.sideButtonCount?this.last-this.sideButtonCount+e-1:e+this.page),this.indexList[0]!==this.first&&this.indexList.splice(0,1),this.indexList[this.indexList.length-1]!==this.last&&this.indexList.splice(this.indexList.length-1,1),this.indexList=this.indexList.filter(e=>this.first<=e&&e<=this.last)}avcChanger=e=>e};m(i,"\u0275fac",function(t){return new(t||i)(u(Pi,10),u(L))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-pagination"]],inputs:{first:"first",last:"last",page:"page",sideButtonCount:"sideButtonCount",prevLabel:"prevLabel",nextLabel:"nextLabel"},outputs:{pageChange:"pageChange"},standalone:!1,features:[vt],decls:7,vars:7,consts:[["color","dark",1,"ep-text-button",3,"click","disabled"],["class","ep-text-button","color","dark",3,"click",4,"ngIf"],["class","ep-text-button",3,"click",4,"ngFor","ngForOf"],["color","dark",1,"ep-text-button",3,"click"],[1,"ep-text-button",3,"click"]],template:function(t,o){t&1&&(l(0,"button",0),P("click",function(){return o.movePage(o.page-1)}),f(1),c(),D(2,$r,2,0,"button",1)(3,Hr,2,2,"button",2)(4,Yr,2,0,"button",1),l(5,"button",0),P("click",function(){return o.movePage(o.page+1)}),f(6),c()),t&2&&(p("disabled",o.first===o.page),a(),h(o.prevLabel),a(),p("ngIf",o.first+1<o.indexList[0]),a(),p("ngForOf",o.indexList),a(),p("ngIf",o.indexList[o.indexList.length-1]<o.last-1),a(),p("disabled",o.page===o.last),a(),h(o.nextLabel))},dependencies:[Fe,de],styles:["[_nghost-%COMP%]{width:100%;text-align:center}button[_ngcontent-%COMP%]{min-width:40px;height:40px;margin:0 6px}"],changeDetection:0}));let n=i;return n})();function qr(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.name)}}function Qr(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.userId)}}function Xr(n,i){if(n&1&&(l(0,"div"),y(1,"admin-dropdown",15),c()),n&2){let r=i.$implicit,e=b();a(),p("formControlName",r.id)("options",e.accountOptions)}}function Zr(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.createdAt,"yyyy-MM-dd"))}}function Jr(n,i){n&1&&(l(0,"div",16)(1,"div",17),y(2,"span",18),l(3,"p",19),f(4),g(5,"translate"),c(),y(6,"div",20),l(7,"p",21),f(8),g(9,"translate"),c()()()),n&2&&(a(4),h(C(5,2,"NO_ADMIN")),a(4),h(C(9,4,"PLEASE_ADD_ADMIN")))}var Bo=(()=>{let i=class i{formBuilder;changeDetectorRef;accountDataService;toastService;authService;translatePipe;adminDialogService;store$;subs;filterMenus=[];accountOptions=[];displayableColumns=[];formGroup;userInfoFormGroup;isLoading=!1;user;table=new Ne;orderedBy="createdAt";asc=!1;NUM_PER_PAGE="13";get purposeFilterValue(){let e=this.table.filterGroup.controls.filter?.value?.purpose?.value[0];return e==="ALL"?void 0:e}get currentPageIndex(){return this.table.getPageInfo().currentIndex}constructor(e,t,o,s,d,_,O,w,A){this.formBuilder=e,this.changeDetectorRef=t,this.accountDataService=o,this.toastService=s,this.authService=d,this.translatePipe=_,this.adminDialogService=O,this.store$=w,this.subs=A,this.filterMenus=[{label:this.translatePipe.transform("DATE"),type:"date",item:U.getDateFilterList(["custom"]),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:"custom"}],isMulti:!1},{label:this.translatePipe.transform("USER_PURPOSE_LABEL"),type:"purpose",item:[{label:"ALL",value:"ALL"},{label:"ADMIN",value:"ADMIN"},{label:"REGISTERED",value:"REGISTERED"}],isMulti:!1}],this.accountOptions=[{label:this.translatePipe.transform(re.USER),value:re.USER},{label:this.translatePipe.transform(re.ADMIN),value:re.ADMIN},{label:this.translatePipe.transform(re.DOCUMENT_ADMIN),value:re.DOCUMENT_ADMIN}],this.displayableColumns=[{key:"name",title:this.translatePipe.transform("NAME"),sortable:!0},{key:"userId",title:this.translatePipe.transform("EMAIL_ID"),sortable:!0},{key:"type",title:this.translatePipe.transform("ACCOUNT_PURPOSE"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("CREATED_AT"),sortable:!0}],this.formGroup=this.formBuilder.nonNullable.group({purpose:this.formBuilder.nonNullable.group({}),name:this.formBuilder.nonNullable.control(""),checkedUserIds:this.formBuilder.nonNullable.control([])}),this.userInfoFormGroup=this.formBuilder.nonNullable.group({name:this.formBuilder.nonNullable.control("",Bt.required),userId:this.formBuilder.nonNullable.control({value:"",disabled:!0},Bt.required),password:this.formBuilder.nonNullable.control("",[Mi.passwordValidators,()=>(this.userInfoFormGroup&&this.userInfoFormGroup.controls.passwordCheck.updateValueAndValidity(),null)]),passwordCheck:this.formBuilder.nonNullable.control("",[ee=>!this.userInfoFormGroup||ee.value===this.userInfoFormGroup.getRawValue().password?null:{message:this.translatePipe.transform("INVALID_PASSWORD")}]),purpose:this.formBuilder.nonNullable.control(ei[0])})}ngOnInit(){this.getUsers(),this.subs.push(this.store$.pipe(Ni()).subscribe({next:e=>{this.user=e,this.table.reset(),this.getUsers(),this.changeDetectorRef.markForCheck()}}),this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getUsers()}}),this.table.filterGroup.controls.keyword.valueChanges.pipe(G(e=>!e)).subscribe({next:()=>{this.searchKeyword()}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.DELETE_ITEMS)).subscribe({next:()=>{this.adminDialogService.closeCurrentActiveDialog(),this.deleteUser()}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.MODIFY_USER)).subscribe({next:()=>{this.adminDialogService.closeCurrentActiveDialog();let e=this.userInfoFormGroup.getRawValue().purpose.value;if(this.user&&this.userInfoFormGroup.controls.userId.value===this.user.userId&&e===re.USER&&!(this.isLastAdmin(this.user.userId)&&e===re.USER)){this.adminDialogService.toggleDialogVisibility(V.WARNING,!0,{title:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_TITLE"),description:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_MESSAGE"),size:{width:388,height:280},data:{from:"modify_modal",formGroup:this.userInfoFormGroup}});return}this.updateUser({purpose:this.userInfoFormGroup.controls.purpose.value.value,password:this.userInfoFormGroup.controls.password.value,name:this.userInfoFormGroup.controls.name.value,userId:this.userInfoFormGroup.controls.userId.value})}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.CREATE_USER)).subscribe({next:()=>{this.registerUser()}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.dialogType===V.WARNING)).subscribe({next:e=>{e.action==="confirm"&&(this.adminDialogService.closeCurrentActiveDialog(),e.data.from==="table"?this.updateUser({userId:e.data.control.userId,purpose:e.data.control.control.value}):this.updateUser({purpose:this.userInfoFormGroup.controls.purpose.value.value,password:this.userInfoFormGroup.controls.password.value,name:this.userInfoFormGroup.controls.name.value,userId:this.userInfoFormGroup.controls.userId.value}),this.authService.logout().subscribe()),e.action==="close"&&this.getUsers()}}))}ngAfterContentInit(){this.getUsers()}searchKeyword(){this.table.reset(),this.getUsers()}onCreateClick(){this.userInfoFormGroup.reset({purpose:ei[0]}),this.userInfoFormGroup.get("userId")?.enable(),this.adminDialogService.toggleDialogVisibility(V.CREATE_USER,!0,{title:this.translatePipe.transform("NEW_ADMIN"),size:{width:452,height:595},formGroup:this.userInfoFormGroup})}onDeleteClick(){let e=this.formGroup.getRawValue().checkedUserIds.map(t=>this.table.getData().find(o=>o.userId===t)).filter(oe.isDefined);if(e.some(t=>this.user&&t.userId===this.user.userId)){this.toastService.create({icon:"failed",content:this.translatePipe.transform("CANNOT_DELETE_SELF_ACCOUNT")});return}this.adminDialogService.toggleDialogVisibility(V.DELETE_ITEMS,!0,{description:"",size:{width:336,height:280},data:e,caller:Kt.ACCOUNT})}onItemDblClick(e){this.userInfoFormGroup.setValue({name:e.name,userId:e.userId,password:"",passwordCheck:"",purpose:ei.find(t=>t.value===e.type)}),this.userInfoFormGroup.get("userId")?.disable(),this.adminDialogService.toggleDialogVisibility(V.MODIFY_USER,!0,{title:this.translatePipe.transform("MODIFY_USER_INFO"),size:{width:452,height:595},formGroup:this.userInfoFormGroup})}checkedStatusChange(e){this.formGroup.controls.checkedUserIds.setValue(e)}deleteUser(){this.isLoading=!0,this.subs.set("deleteUser",this.accountDataService.deleteUsers(this.formGroup.controls.checkedUserIds.value).pipe(mt(()=>{this.table.reset(),this.getUsers()})).subscribe({next:()=>{this.toastService.create({icon:"success",content:this.translatePipe.transform("DELETE_COMPLETE")})},error:e=>{e.status===It.NotAcceptable&&this.toastService.create({icon:"failed",content:this.translatePipe.transform("REJECTED_TO_DELETE_ACCOUNT")})}}))}updateUser(e){if(this.isLastAdmin(e.userId)&&e.purpose===re.USER){this.toastService.create({icon:"failed",content:this.translatePipe.transform("CHANGE_LAST_ADMIN_USAGE_EXCEPTION")}),this.getUsers();return}this.isLoading=!0,this.subs.set("updateUser",this.accountDataService.patchUser(e.userId,{name:e.name,password:e.password?.trim()===""?void 0:e.password,type:e.purpose}).pipe(mt(()=>{this.table.reset(),this.userInfoFormGroup.reset(),this.getUsers()})).subscribe({next:()=>{this.toastService.create({icon:"success",content:this.translatePipe.transform("SUCCEED_PATCHING")})},error:()=>{this.toastService.create({icon:"failed",content:this.translatePipe.transform("FAILED")}),this.isLoading=!1}}))}registerUser(){this.subs.set("registerUser",this.accountDataService.postRegisterUser(this.userInfoFormGroup.controls.name.value,this.userInfoFormGroup.controls.userId.value,this.userInfoFormGroup.controls.password.value,this.userInfoFormGroup.controls.purpose.value.value).subscribe({next:()=>{this.table.reset(),this.userInfoFormGroup.reset(),this.getUsers(),this.toastService.create({icon:"success",content:this.translatePipe.transform("CREATE_USER")}),this.adminDialogService.closeCurrentActiveDialog()},error:e=>{e.status===It.BadRequest&&this.toastService.create({icon:"failed",content:this.translatePipe.transform("DUPLICATED_EMAIL")})}}))}getUsers(){let e=this.table.getPeriodValue();this.isLoading=!0,this.subs.push(this.accountDataService.getUserList({pageIndex:this.table.getPageInfo().currentIndex,listingCount:parseInt(this.NUM_PER_PAGE),search:this.table.getKeyword(),from:e?U.formatDate(e.startDate):void 0,to:e?U.formatDate(e.endDate):void 0,orderBy:this.orderedBy,ascending:this.asc,type:this.purposeFilterValue}).pipe(mt(()=>this.table.isLoading=!1)).subscribe({next:t=>{this.formGroup.controls.purpose=this.formBuilder.group({}),this.table.setData(t.resources.map(s=>K(W({},s),{id:s.userId}))),this.table.setPageInfo(t.pageInfo.totalCount,this.NUM_PER_PAGE),this.table.getData().forEach(s=>{let d=this.accountOptions.find(_=>s.type===_.value);this.formGroup.controls.purpose.addControl(s.userId,new te(d,{nonNullable:!0}))});let o=this.table.getSelectedData();if(o){let s=this.table.getData().find(d=>d.userId===o.userId);this.table.selectData(s)}this.isLoading=!1,this.subs.set("dropdownChange",bt(...this.table.getData().map(s=>this.formGroup.controls.purpose.controls[s.userId].valueChanges.pipe(ne(d=>({userId:s.userId,control:d}))))).subscribe({next:s=>{let d=s.control.value;if(this.user&&s.userId===this.user.userId&&!(this.isLastAdmin(this.user.userId)&&d===re.USER)){this.adminDialogService.toggleDialogVisibility(V.WARNING,!0,{title:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_TITLE"),description:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_MESSAGE"),size:{width:388,height:280},data:{from:"table",control:s}});return}this.updateUser({userId:s.userId,purpose:s.control.value})}})),this.changeDetectorRef.markForCheck()}}))}sortingChanges(e){this.orderedBy=e.value===0?void 0:e.name,this.asc=e.value===0?void 0:e.value===1,this.getUsers()}onPageChanging(e){this.table.setPageCurrentIndex(e-1),this.getUsers()}isLastAdmin(e){return this.table.getData().find(o=>o.userId===e)?.type===re.ADMIN&&this.table.getData().filter(o=>o.type===re.ADMIN).length<=1}};m(i,"\u0275fac",function(t){return new(t||i)(u(xe),u(L),u(zi),u(Y),u(ge),u(M),u(Ie),u(wi),u(S))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-document-list"]],standalone:!1,features:[k([S,yi])],decls:30,vars:36,consts:[["emptyEl",""],[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"tools"],["size","small","color","primary",1,"ep-button",3,"click"],[1,"papycon","papycon-plus3"],["size","small","color","grey",1,"ep-button",3,"click","disabled"],[1,"papycon","papycon-minus2"],[1,"right-side"],["formControlName","filter",1,"small",3,"filterMenus"],["size","small","formControlName","keyword",1,"custom",3,"keydown.enter","focusout","useClearButton","placeholder"],[3,"formGroup"],[3,"checkedStatusChange","itemDblClick","sortingChange","data","displayedColumns","formGroupName","currentPageIndex","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"pageChange","last","sideButtonCount","page","prevLabel","nextLabel"],["color","none",3,"formControlName","options"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-profile2"],[1,"title"],[1,"dashed"],[1,"message"]],template:function(t,o){if(t&1){let s=T();l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-card",1)(4,"header",2)(5,"div",3)(6,"button",4),P("click",function(){return x(s),v(o.onCreateClick())}),y(7,"i",5),f(8),g(9,"translate"),c(),l(10,"button",6),P("click",function(){return x(s),v(o.onDeleteClick())}),y(11,"i",7),f(12),g(13,"translate"),c()(),l(14,"div",8),y(15,"sd-filter-pop-up",9),l(16,"pu-input",10),g(17,"translate"),P("keydown.enter",function(){return x(s),v(o.searchKeyword())})("focusout",function(){return x(s),v(o.searchKeyword())}),c()()(),X(18,11),l(19,"e-table",12),P("checkedStatusChange",function(_){return x(s),v(o.checkedStatusChange(_))})("itemDblClick",function(_){return x(s),v(o.onItemDblClick(_))})("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(20,qr,2,1,"div",13)(21,Qr,2,1,"div",13)(22,Xr,2,2,"div",13)(23,Zr,3,4,"div",13),c(),Z(),l(24,"footer")(25,"sd-pagination",14),g(26,"translate"),g(27,"translate"),P("pageChange",function(_){return x(s),v(o.onPageChanging(_))}),c()()(),D(28,Jr,10,6,"ng-template",null,0,J)}if(t&2){let s=H(29);a(),h(C(2,24,"ADMIN_ACCOUNT_MANAGEMENT")),a(2),p("isLoading",o.isLoading),a(),p("formGroup",o.table.filterGroup),a(4),h(C(9,26,"ADD_USER")),a(2),p("disabled",!(o.formGroup.controls.checkedUserIds.value!=null&&o.formGroup.controls.checkedUserIds.value.length)),a(2),h(C(13,28,"DELETE")),a(3),p("filterMenus",o.filterMenus),a(),p("useClearButton",!0)("placeholder",C(17,30,"ADMIN_ACCOUNT_SEARCH_PLACEHOLDER")),a(2),p("formGroup",o.formGroup),a(),p("data",o.table.getData())("displayedColumns",o.displayableColumns)("formGroupName","purpose")("currentPageIndex",o.currentPageIndex)("emptyEl",s),a(),p("eTableCellFor","name"),a(),p("eTableCellFor","userId"),a(),p("eTableCellFor","type"),a(),p("eTableCellFor","createdAt"),a(2),p("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",o.table.getPageInfo().currentIndex+1)("prevLabel",C(26,32,"PREVIOUS"))("nextLabel",C(27,34,"NEXT"))}},dependencies:[Pe,Ti,Be,q,Oe,le,Se,Me,ro,Ke,Ye,We,Le,M],styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}sd-card-loader[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}pu-icon[_ngcontent-%COMP%], .papycon[_ngcontent-%COMP%]{text-align:center}pu-icon.bt[_ngcontent-%COMP%], .papycon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #DADADA;border-radius:2px;height:62px;resize:none;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:solid 1px #DADADA;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.empty[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:flex;flex-flow:column}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:18px}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:solid 1.2px #C8C8C8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;flex:1;box-sizing:border-box;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]     td.name, e-table[_ngcontent-%COMP%]     th.name{flex:0 1 245px;font-size:14px}e-table[_ngcontent-%COMP%]     .userId{flex:1;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{flex:0 1 152px;font-size:14px}e-table[_ngcontent-%COMP%]     .type{flex:0 1 250px;font-size:14px;display:flex}e-table[_ngcontent-%COMP%]     .type:hover pu-dropdown[size]  div.select-box{background-color:#fff;border-radius:2px;border:1px solid #DADADA}e-table[_ngcontent-%COMP%]     .type pu-dropdown[size]  div.select-box{width:100px;display:flex;flex-direction:row-reverse;height:33px;border:none;background-color:transparent}e-table[_ngcontent-%COMP%]     .type pu-dropdown[size]  div.select-box div.expand-button{background-color:transparent;border-left:none}footer[_ngcontent-%COMP%]{height:95px;display:flex;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}span.primary[_ngcontent-%COMP%]{color:#ff6100;text-decoration:underline}"]}));let n=i;return n})();var pt=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B,xo,nt,ue,ot,Xt,ve]}));let n=i;return n})();_e(Be,[Pt,Fe,de,yt,$n,Hn,Yn,bo,q,no,Qt,ao],[M]);var dt=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B]}));let n=i;return n})();var Go=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[zi],imports:[at,B,Ii,pt,nt,ue,Et,ot,Ot,Xt,we,ve,dt,st]}));let n=i;return n})();var ea=["*"],zo=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-main-contents"]],standalone:!1,ngContentSelectors:ea,decls:1,vars:0,template:function(t,o){t&1&&(Bn(),Gn(0))},styles:["[_nghost-%COMP%]{background-color:#f2f2f2;width:100%;height:calc(100% - 70px);display:flex}[_nghost-%COMP%]     .admin-content-container>:last-child:not(e-login){display:block;padding:40px 30px 50px;box-sizing:border-box}[_nghost-%COMP%]     .admin-content-container>:last-child:not(e-login)>h1{margin-bottom:30px;font-size:28px;font-family:NotoSans-Medium,sans-serif}"]}));let n=i;return n})();var jo=(()=>{let i=class i{changeDetectorRef;authService;subs;translatePipe;adminDialogService;toastService;formBuilder;store$;productService;i18nService;modalService;preferenceService;menus=[];logoToggle=new tt;packageVersion="";user;passwordFormGroup;userFormGroup;languageFormGroup;get logoUrl(){return this.productService.adminLogo}get rightMenuStyle(){return{width:this.i18nService.language==="en"?"115px":"95px",height:"98px"}}constructor(e,t,o,s,d,_,O,w,A,ee,Ee,Je){this.changeDetectorRef=e,this.authService=t,this.subs=o,this.translatePipe=s,this.adminDialogService=d,this.toastService=_,this.formBuilder=O,this.store$=w,this.productService=A,this.i18nService=ee,this.modalService=Ee,this.preferenceService=Je,this.passwordFormGroup=this.formBuilder.group({password:this.formBuilder.nonNullable.control("")}),this.userFormGroup=this.formBuilder.group({name:this.formBuilder.nonNullable.control(""),email:this.formBuilder.nonNullable.control({value:"",disabled:!0},Bt.required),password:this.formBuilder.nonNullable.control("",[Mi.passwordValidators,()=>(this.userFormGroup&&this.userFormGroup.controls.passwordCheck.updateValueAndValidity(),null)]),passwordCheck:this.formBuilder.nonNullable.control("",[Cn=>!this.userFormGroup||Cn.value===this.userFormGroup.getRawValue().password?null:{message:this.translatePipe.transform("INVALID_PASSWORD")}]),purpose:this.formBuilder.nonNullable.control(ei[0])}),this.languageFormGroup=this.formBuilder.group({language:this.formBuilder.nonNullable.control(this.i18nService.language)})}ngOnInit(){this.subs.push(this.productService.getPackageVersion().subscribe({next:e=>this.packageVersion=`v${e}`}),this.store$.pipe(Ni(),G(oe.isDefined)).subscribe({next:e=>{this.user=e,this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.changeDetectorRef.markForCheck()}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.MODIFY_MY_INFO),et(()=>this.store$.pipe(go(),G(oe.isDefined)))).subscribe({next:()=>{this.subs.set("patchMyInfo",this.authService.patchMyInfo(this.userFormGroup.getRawValue()).pipe(et(()=>this.authService.sharedGetSession)).subscribe({next:e=>{this.store$.dispatch(fo.setUser({payload:e})),this.adminDialogService.closeCurrentActiveDialog(),this.toastService.create({icon:"success",content:this.translatePipe.transform("CHANGES_SAVED")}),this.changeDetectorRef.markForCheck()},error:()=>{this.passwordFormGroup.reset(),this.userFormGroup.reset(),this.toastService.create({icon:"failed",content:this.translatePipe.transform("FAILED")})}}))}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.dialogType===V.LANGUAGE_SETTING&&e.action==="select"),ne(e=>e.data)).subscribe({next:e=>this.changeLanguage(e)})),this.buildMenu()}logout(){this.authService.logout().subscribe()}changeLanguage(e){this.preferenceService.updatePreferences(["language"],e),setTimeout(()=>{this.modalService.createCommonModal({type:ki.BASIC,width:350,icon:"papycon papycon-questionmark",title:this.translatePipe.transformByLanguage(e,"NOTIFICATION"),content:this.translatePipe.transformByLanguage(e,"NEED_TO_REFRESH"),confirmButton:!0,confirmLabel:this.translatePipe.transformByLanguage(e,"OK")})})}showLanguageSettingDialog(){this.adminDialogService.toggleDialogVisibility(V.LANGUAGE_SETTING,!0,{title:this.translatePipe.transform("LANGUAGE_SETTING"),size:{width:269,height:216},formGroup:this.languageFormGroup})}showModifyUserInfoDialog(){this.passwordFormGroup.reset(),this.adminDialogService.toggleDialogVisibility(V.CHECK_USER,!0,{title:this.translatePipe.transform("MODIFY_USER_INFO"),size:{width:452,height:282},formGroup:this.passwordFormGroup}),this.subs.set("checkUser",this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.CHECK_USER),qe(1),ut(()=>this.adminDialogService.closeCurrentActiveDialog()),et(()=>this.authService.postCheckPassword(this.passwordFormGroup.controls.password.value))).subscribe({next:()=>{this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.adminDialogService.toggleDialogVisibility(V.MODIFY_MY_INFO,!0,{title:this.translatePipe.transform("MODIFY_USER_INFO"),size:{width:452,height:484},formGroup:this.userFormGroup})},error:()=>{this.passwordFormGroup.reset(),this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.toastService.create({icon:"failed",content:this.translatePipe.transform("INVALID_PASSWORD")})}}))}getUser(){this.authService.sharedGetSession.pipe(qe(1)).subscribe({next:e=>{this.user=e,this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.changeDetectorRef.markForCheck()}})}buildMenu(){this.menus=[{items:[{label:this.translatePipe.transform("USER_INFO"),command:()=>this.showModifyUserInfoDialog()},{label:this.translatePipe.transform("LANGUAGE_SETTING"),command:()=>this.showLanguageSettingDialog()},{label:this.translatePipe.transform("LOGOUT"),command:()=>this.logout()}]}],this.getUser(),this.changeDetectorRef.markForCheck()}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(ge),u(S),u(M),u(Ie),u(Y),u(xe),u(wi),u(Dt),u(mo),u(Tt),u(Oo))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-main-toolbar"]],outputs:{logoToggle:"logoToggle"},standalone:!1,features:[k([S])],decls:13,vars:5,consts:[["menuRef",""],[1,"toolbar-container"],[1,"left-container"],[1,"papycon","papycon-more-symbol5",3,"click"],[3,"src"],[1,"package-version"],[1,"right-container"],[3,"click"],[1,"papycon","papycon-chevron3-down","arrow"],[3,"menus","ngStyle"]],template:function(t,o){if(t&1){let s=T();l(0,"div",1)(1,"div",2)(2,"i",3),P("click",function(){return x(s),v(o.logoToggle.emit())}),c(),y(3,"img",4),l(4,"span",5),f(5),c()(),l(6,"div",6)(7,"div",7),P("click",function(){x(s);let _=H(12);return v(_.toggleMenu())}),l(8,"span"),f(9),c(),y(10,"i",8)(11,"pu-menu",9,0),c()()()}t&2&&(a(3),p("src",o.logoUrl,_i),a(2),h(o.packageVersion),a(4),h(o.user==null?null:o.user.name),a(2),p("menus",o.menus)("ngStyle",o.rightMenuStyle))},dependencies:[yt,so],styles:[".toolbar-container[_ngcontent-%COMP%]{background-color:#363636;width:100%;height:70px;display:flex;justify-content:space-between}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:34px;font-size:28px;color:#fff}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:37px;height:18px}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .package-version[_ngcontent-%COMP%]{font-family:NotoSans-Bold,sans-serif;font-size:14px;line-height:24px;color:#fff;margin-left:8px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{width:100px;height:100%;display:flex;justify-content:center;align-items:center;color:#fff;margin-right:15px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Regular,sans-serif;margin-right:6px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;cursor:pointer}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   pu-menu[_ngcontent-%COMP%] {top:30px;right:0;z-index:9999}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   pu-menu[_ngcontent-%COMP%]  .menu-item__text{font-size:13px;line-height:22px}"]}));let n=i;return n})();var $o={root:{label:"",route:"",data:"",expanded:!0,parent:null,children:[{label:"DASHBOARD",route:"dashboard",data:"thumbnail",expanded:!1,parent:null,children:[]},{label:"DOCUMENT_LIST",route:"document-list",data:"list2",expanded:!1,parent:null,children:[{label:"DOCUMENT_LIST",route:"document-list",data:null,expanded:!1,parent:null,children:[]},{label:"REMOVED_DOCUMENT_LIST",route:"removed-document-list",data:null,expanded:!1,parent:null,children:[]}]},{label:"STATISTIC",route:"statistic-period",data:"analytics",expanded:!1,parent:null,children:[{label:"STATISTIC_BY_PERIOD",route:"statistic-period",data:null,expanded:!1,parent:null,children:[]},{label:"STATISTIC_BY_DOCUMENT",route:"statistic-document",data:null,expanded:!1,parent:null,children:[]},{label:"STATISTIC_BY_VIEWER",route:"statistic-viewer",data:null,expanded:!1,parent:null,children:[]}]},{label:"SERVER_MANAGEMENT",route:"server-monitoring",data:"switch",expanded:!1,parent:null,children:[{label:"SERVER_MONITORING",route:"server-monitoring",data:null,expanded:!1,parent:null,children:[]},{label:"LOG_MANAGEMENT",route:"server-log",data:null,expanded:!1,parent:null,children:[]},{label:"DOCUMENT_HISTORY",route:"document-log",data:null,expanded:!1,parent:null,children:[]},{label:"DELETE_TEMP_FILE",route:"system-management",data:null,expanded:!1,parent:null,children:[]}]},{label:"VIEW_SETTINGS",route:"configs/view",data:"settings",expanded:!1,parent:null,children:[{label:"VIEW_SETTINGS_UI",route:"configs/view",data:null,expanded:!1,parent:null,children:[]},{label:"WATERMARK",route:"configs/watermark",data:null,expanded:!1,parent:null,children:[]}]},{label:"ACCOUNT_MANAGEMENT",route:"account",data:"profile2",expanded:!1,parent:null,children:[]},{label:"LICENSE_MANAGEMENT",route:"license",data:"security",expanded:!1,parent:null,children:[]}]}},Ho={root:{label:"",route:"",data:"",expanded:!0,parent:null,children:[{label:"DASHBOARD",route:"dashboard",data:"thumbnail",expanded:!1,parent:null,children:[]},{label:"DOCUMENT_LIST",route:"document-list",data:"list2",expanded:!1,parent:null,children:[{label:"DOCUMENT_LIST",route:"document-list",data:null,expanded:!1,parent:null,children:[]},{label:"REMOVED_DOCUMENT_LIST",route:"removed-document-list",data:null,expanded:!1,parent:null,children:[]}]},{label:"STATISTIC",route:"statistic-period",data:"analytics",expanded:!1,parent:null,children:[{label:"STATISTIC_BY_PERIOD",route:"statistic-period",data:null,expanded:!1,parent:null,children:[]},{label:"STATISTIC_BY_DOCUMENT",route:"statistic-document",data:null,expanded:!1,parent:null,children:[]}]},{label:"SERVER_MANAGEMENT",route:"server-monitoring",data:"switch",expanded:!1,parent:null,children:[{label:"SERVER_MONITORING",route:"server-monitoring",data:null,expanded:!1,parent:null,children:[]},{label:"DOCUMENT_HISTORY",route:"document-log",data:null,expanded:!1,parent:null,children:[]}]}]}},Yo={root:{label:"",route:"",data:"",expanded:!0,parent:null,children:[{label:"DASHBOARD",route:"dashboard",data:"thumbnail",expanded:!1,parent:null,children:[]},{label:"DOCUMENT_LIST",route:"document-list",data:"list2",expanded:!1,parent:null,children:[]},{label:"STATISTIC",route:"statistic-period",data:"analytics",expanded:!1,parent:null,children:[{label:"STATISTIC_BY_PERIOD",route:"statistic-period",data:null,expanded:!1,parent:null,children:[]},{label:"STATISTIC_BY_DOCUMENT",route:"statistic-document",data:null,expanded:!1,parent:null,children:[]}]}]}};function na(n,i){if(n&1&&y(0,"i",9),n&2){let r=b(3).$implicit;p("@chevron",r.expanded)}}function oa(n,i){if(n&1&&(X(0),l(1,"span",7),f(2),g(3,"translate"),c(),D(4,na,1,1,"i",8),Z()),n&2){let r=b(2).$implicit,e=b();a(),p("@label",e.setDuration(r)),a(),h(C(3,3,r.label)),a(2),p("ngIf",r.children)}}function ra(n,i){if(n&1){let r=T();X(0),l(1,"div",3),P("click",function(){x(r);let t=b().$implicit,o=b();return v(o.onNestedMenuClick(t))}),l(2,"div",4),y(3,"i",5),c(),D(4,oa,5,5,"ng-container",6),c(),Z()}if(n&2){let r=b().$implicit,e=b();a(),z("expanded",r.expanded),p("routerLink",e.tinySidebar?e.createRouterLink(r):null)("routerLinkActive",e.tinySidebar?"active":""),a(2),p("ngClass","papycon-"+r.data),a(),p("ngIf",!e.tinySidebar)}}function aa(n,i){if(n&1&&(l(0,"div",4),y(1,"i",5),c()),n&2){let r=b(3).$implicit;a(),p("ngClass","papycon-"+r.data)}}function sa(n,i){if(n&1&&(l(0,"span",7),f(1),g(2,"translate"),c()),n&2){let r=b(3).$implicit,e=b();z("topNode",!r.parent),p("@label",e.setDuration(r)),a(),h(C(2,4,r.label))}}function la(n,i){if(n&1){let r=T();l(0,"div",11),P("click",function(){x(r);let t=b(2).$implicit,o=b();return v(o.onLeafMenuClick(t))}),D(1,aa,2,1,"div",12),l(2,"a",13),D(3,sa,3,6,"span",14),c()()}if(n&2){let r=b(2).$implicit,e=b();z("leaf",r.parent),p("@leaf",e.setDuration(r))("ngClass",e.getLeafSequence(r))("routerLink",e.createRouterLink(r))("routerLinkActive","active"),a(),p("ngIf",r.data),a(2),p("ngIf",!e.tinySidebar)}}function ca(n,i){if(n&1&&D(0,la,4,8,"div",10),n&2){let r=b().$implicit,e=b();p("ngIf",!r.parent||r.parent&&!e.tinySidebar)}}function pa(n,i){if(n&1&&(X(0),D(1,ra,5,6,"ng-container",2)(2,ca,1,1,"ng-template",null,0,J),Z()),n&2){let r=i.$implicit,e=H(3);a(),p("ngIf",r.children.length)("ngIfElse",e)}}var Wo=(()=>{let i=class i{activatedRoute;router;authService;subs;changeDetectorRef;get slide(){return this.tinySidebar?"tiny":"long"}tinySidebar=!1;menuTree={root:{data:"",parent:null,children:[],depth:null,expanded:!1,route:null,label:""}};constructor(e,t,o,s,d){this.activatedRoute=e,this.router=t,this.authService=o,this.subs=s,this.changeDetectorRef=d}setDuration(e){return{value:"",params:{duration:e.depth?400:0}}}ngOnInit(){this.setMenuTree()}ngOnChanges(e){e.tinySidebar&&this.menuTree.root.children.map(t=>{t.expanded=!1})}setMenuTree(){this.subs.set("fetchUserInfo",this.authService.sharedGetSession.subscribe({next:e=>{e.type===re.ADMIN?(this.menuTree=oe.deepClone($o),Ve.activateInvisibleTracer&&this.menuTree.root.children.find(t=>t.data==="settings").children.push({label:"INVISIBLE_TRACER",route:"configs/invisible-tracer",data:null,expanded:!1,parent:null,children:[]})):e.type===re.USER?this.menuTree=oe.deepClone(Yo):e.type===re.DOCUMENT_ADMIN&&(this.menuTree=oe.deepClone(Ho)),this.assignDepth(this.menuTree),this.changeDetectorRef.markForCheck()}}))}onNestedMenuClick(e){if(this.tinySidebar){this.router.navigateByUrl(`view/admin/${e.route}`);return}e.expanded=!e.expanded}onLeafMenuClick(e){this.menuTree.root.children.filter(t=>t!==e.parent)}getLeafSequence(e){return e.parent?e.index===0?"first":e.parent.children.length-1===e.index?"last":null:null}createRouterLink(e){return this.router.createUrlTree([e.route],{relativeTo:this.activatedRoute}).toString()}assignDepth(e){let t=0,o=(s,d)=>{s.map((_,O)=>(_.parent=d,_.index=O,_.parent?t=_.parent?.depth+1:t=0,_.depth=t,_.children.length&&o(_.children,_),_.route===this.activatedRoute.firstChild?.routeConfig.path&&(_.expanded=!0,_.parent&&(_.parent.expanded=!0)),_))};return o(e.root.children,null),e}};m(i,"\u0275fac",function(t){return new(t||i)(u(Wt),u(me),u(ge),u(S),u(L))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-sidebar"]],hostVars:1,hostBindings:function(t,o){t&2&&Vn("@slide",o.slide)},inputs:{tinySidebar:"tinySidebar"},standalone:!1,features:[k([S]),vt],decls:1,vars:1,consts:[["leafNodeTemplate",""],[4,"eTree","eTreeFrom"],[4,"ngIf","ngIfElse"],[1,"container",3,"click","routerLink","routerLinkActive"],[1,"icon-box"],[1,"papycon",3,"ngClass"],[4,"ngIf"],[1,"label"],["class","papycon papycon-chevron3-right chevron",4,"ngIf"],[1,"papycon","papycon-chevron3-right","chevron"],["class","container",3,"leaf","ngClass","routerLink","routerLinkActive","click",4,"ngIf"],[1,"container",3,"click","ngClass","routerLink","routerLinkActive"],["class","icon-box",4,"ngIf"],[1,"node"],["class","label",3,"topNode",4,"ngIf"]],template:function(t,o){t&1&&D(0,pa,4,2,"ng-container",1),t&2&&p("eTreeFrom",o.menuTree.root)},dependencies:[Pt,de,Zn,Jn,ko,M],styles:["[_nghost-%COMP%]{flex:0 0 auto;padding:30px 0;display:flex;min-height:calc(100vh - 70px);flex-direction:column;width:258px;border-right:1px solid #DADADA;box-sizing:border-box;background:#fff;position:sticky;top:0;left:0;z-index:1;overflow-y:auto}.tinySidebar[_nghost-%COMP%]{width:84px;padding:0}.icon-box[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;margin-right:10px}.node[_ngcontent-%COMP%] > .label.topNode[_ngcontent-%COMP%]{font-family:NotoSans-Regular;font-size:16px;letter-spacing:-.5px;color:#1e1e1e}.container[_ngcontent-%COMP%]{width:257px;box-sizing:border-box;display:flex;padding:16px 24px 16px 29px;align-items:center;cursor:pointer;letter-spacing:-.5px;outline:none;font-family:NotoSans-Regular;font-size:16px;color:#1e1e1e}.container.active[_ngcontent-%COMP%]{background-color:#f4f4f4}.container.active[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-family:NotoSans-Medium}.container.expanded[_ngcontent-%COMP%]{font-family:NotoSans-Medium;background-color:#f4f4f4}.container.leaf[_ngcontent-%COMP%]{font-size:14px;color:#6c6c6c;background-color:#f4f4f4;padding:14px 24px 14px 64px}.container.leaf.first[_ngcontent-%COMP%]{padding-top:20px}.container.leaf.last[_ngcontent-%COMP%]{padding-bottom:24px}.container.leaf[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{line-height:14px}.container.leaf.active[_ngcontent-%COMP%]{color:#ff6100}.papycon[_ngcontent-%COMP%]{color:#363636}.chevron[_ngcontent-%COMP%]{font-size:10px;margin-left:auto}a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}"],data:{animation:[pi.rotate("chevron","90"),vi("leaf",[Vt(":enter",[Qe({height:"0",marginTop:"0",paddingTop:"0",paddingBottom:"0",overflow:"hidden"}),Ut("{{ duration }}ms cubic-bezier(0.86, 0, 0.07, 1)",Qe({height:"*",marginTop:"*",paddingTop:"*",paddingBottom:"*",overflow:"hidden"}))]),Vt(":leave",[Qe({height:"*",marginTop:"*",paddingTop:"*",paddingBottom:"*",overflow:"hidden"}),Ut("{{ duration }}ms cubic-bezier(0.86, 0, 0.07, 1)",Qe({height:"0",marginTop:"0",paddingTop:"0",paddingBottom:"0",overflow:"hidden"}))])]),vi("slide",[vn("long",Qe({width:"258px",padding:"30px 0"})),vn("tiny",Qe({padding:"0",width:"84px"})),Vt("tiny => long",[Ut("400ms ease-in")]),Vt("long => tiny",[Ut("400ms ease-out")])]),vi("label",[Vt(":enter",[Qe({opacity:0}),Ut("{{ duration }}ms",Qe({opacity:1}))]),Vt(":leave",[Qe({opacity:1}),Ut("{{ duration }}ms",Qe({opacity:0}))])])]},changeDetection:0}));let n=i;return n})();var fa=["contentContainer"],ga=["sdModalOutlet"],ha=["adminToastOutletRef"],Ca=(n,i)=>({top:n,left:i});function _a(n,i){if(n&1){let r=T();l(0,"sd-main-toolbar",10),P("logoToggle",function(){x(r);let t=b();return v(t.toggleSidebar())}),c()}}function ba(n,i){if(n&1&&y(0,"sd-sidebar",11),n&2){let r=b();z("tinySidebar",!r.sidebarToggle),p("tinySidebar",!r.sidebarToggle)}}function xa(n,i){if(n&1&&(l(0,"div",12),y(1,"sd-date-picker",13),c()),n&2){let r=b();a(),p("disablePast",!0)("initialDate",r.datePickerService.status.initialDate)("title",r.datePickerService.status.title)("ngStyle",bi(4,Ca,r.datePickerService.status.position==null?null:r.datePickerService.status.position.top,r.datePickerService.status.position==null?null:r.datePickerService.status.position.left))}}var qo=(()=>{let i=class i{datePickerService;activateRoute;contentService;modalService;subscriptionService;adminDialogService;toastService;contentContainerEl;sdModalOutlet;adminToastOutletRef;sidebarToggle=!0;get isLoginPage(){return this.activateRoute.snapshot.firstChild?.routeConfig?.path==="login"}constructor(e,t,o,s,d,_,O){this.datePickerService=e,this.activateRoute=t,this.contentService=o,this.modalService=s,this.subscriptionService=d,this.adminDialogService=_,this.toastService=O}ngOnInit(){this.contentService.togglePageLoader(!1),this.subscriptionService.push(li(Jt.nativeWindow,"keydown").subscribe({next:e=>{e.key==="Escape"&&this.adminDialogService.closeCurrentActiveDialog()}}))}ngAfterViewInit(){this.adminToastOutletRef&&this.toastService.registerOutlet(this.adminToastOutletRef),this.modalService.registerOutlet(this.sdModalOutlet)}toggleSidebar(){this.sidebarToggle=!this.sidebarToggle}onActivate(){this.contentContainerEl&&(this.contentContainerEl.nativeElement.scrollTop=0)}};m(i,"\u0275fac",function(t){return new(t||i)(u(ht),u(Wt),u(Do),u(Tt),u(S),u(Ie),u(Y))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-root"]],viewQuery:function(t,o){if(t&1&&(ze(fa,5),ze(ga,7,bn),ze(ha,7,bn)),t&2){let s;je(s=$e())&&(o.contentContainerEl=s.first),je(s=$e())&&(o.sdModalOutlet=s.first),je(s=$e())&&(o.adminToastOutletRef=s.first)}},standalone:!1,features:[k([S])],decls:13,vars:3,consts:[["contentContainer",""],["adminToastOutletRef",""],["sdModalOutlet",""],[3,"logoToggle",4,"ngIf"],[3,"tinySidebar",4,"ngIf"],[1,"admin-content-container"],[3,"activate"],[1,"toast-container"],["class","overlay",4,"ngIf"],[1,"sd-modal-container"],[3,"logoToggle"],[3,"tinySidebar"],[1,"overlay"],[3,"disablePast","initialDate","title","ngStyle"]],template:function(t,o){if(t&1){let s=T();D(0,_a,1,0,"sd-main-toolbar",3),l(1,"sd-main-contents"),D(2,ba,1,3,"sd-sidebar",4),l(3,"div",5,0)(5,"router-outlet",6),P("activate",function(){return x(s),v(o.onActivate())}),c()()(),l(6,"div",7),Rt(7,null,1),c(),D(9,xa,2,7,"div",8),l(10,"div",9),Rt(11,null,2),c()}t&2&&(p("ngIf",!o.isLoginPage),a(2),p("ngIf",!o.isLoginPage),a(7),p("ngIf",o.datePickerService.status.isVisible))},dependencies:[Xn,de,yt,Di,zo,jo,Wo],styles:[".admin-content-container[_ngcontent-%COMP%]{height:100%;width:100%;overflow:auto}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#1e1e1e4d;z-index:999}.toast-container[_ngcontent-%COMP%]{position:absolute;top:102px;left:50%;transform:translate(-50%);display:flex;flex-direction:column}"],changeDetection:0}));let n=i;return n})();var pe=function(n){return n.PRINT="PRINT",n.DOWNLOAD="DOWNLOAD",n.VIEW="VIEW",n}(pe||{}),De=function(n){return n.HOURLY="HOURLY",n.DAILY="DAILY",n.MONTHLY="MONTHLY",n.YEARLY="YEARLY",n}(De||{}),Ze=function(n){return n.MOST_VIEWED_DOCUMENTS="MOST_VIEWED_DOCUMENTS",n.MOST_DOWNLOADED_DOCUMENTS="MOST_DOWNLOADED_DOCUMENTS",n.MOST_PRINTED_DOCUMENTS="MOST_PRINTED_DOCUMENTS",n}(Ze||{}),Wi={COUNT_DOC_DOWN:"downCount",COUNT_DOC_PRINT:"printCount",COUNT_DOC_OPEN:"openCount",PERIOD_DAY_OPTION:"dayZone",PERIOD_DATE_OPTION:"dateZone",PERIOD_HOUR_OPTION:"hourZone"};var Re=(()=>{let i=class i{baseHref;httpClient;get statisticUrl(){return`${this.baseHref}v4/statistic`}get capacityUrl(){return`${this.baseHref}v4/monitor`}gzipHeaders;noCacheHeaders;constructor(e,t){this.baseHref=e,this.httpClient=t;let s=K(W({},{"Accept-Language":"utf-8","Content-Encoding":"gzip","Cache-Control":"max-age=0"}),{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"});this.noCacheHeaders=new Lt(s),this.gzipHeaders=new Lt({"Content-Encoding":"gzip","Accept-Language":"utf-8"})}getTopCountByPropertyName(e,t){let o=`${this.baseHref}v4/statistic/documents/top`,s=new Ue().append("type",e).append("listingCount",String(t));return this.httpClient.get(o,{headers:this.gzipHeaders,params:s})}getDocumentIncrement(){let e=`${this.statisticUrl}/documents/register/increment`;return this.httpClient.get(e)}getServerSummaryList(){let e=`${this.capacityUrl}/summary`;return this.httpClient.get(e,{headers:this.noCacheHeaders})}getTimezoneStatistic(e){let t="/statistic/timezone";e.documentId&&(t=t.concat(`/documents/${e.documentId}`)),e.isAccumulated&&(t=t.concat("/accumulated"));let o=`${this.baseHref}v4${t}`,s=new Ue().append("startDate",e.startDate.toString()).append("endDate",e.endDate.toString()).append("periodUnit",e.periodUnit);return this.httpClient.get(o,{headers:this.noCacheHeaders,params:s})}getSystemUsage(e,t,o){let s=`${this.statisticUrl}/system-usage`,d=new Ue().append("startDate",e.toString()).append("endDate",t.toString()).append("periodUnit",o);return this.httpClient.get(s,{headers:this.gzipHeaders,params:d})}saveAllDateStatistic(e,t,o,s,d,_){let O=`${this.statisticUrl}/makeExcel?monthYearZone=${e}&dateYearZone=${t}&dateMonthZone=${o}&hourYearZone=${s}&hourMonthZone=${d}&hourDateZone=${_}`;return this.httpClient.get(O,{headers:this.gzipHeaders,responseType:"blob"})}getTotalCountByPropertyName(e){let t=`${this.statisticUrl}/documents/total`;return this.httpClient.get(t,{headers:this.gzipHeaders,params:new Ue().set("propertyName",e)})}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();function va(n,i){if(n&1&&(l(0,"div")(1,"span"),f(2),g(3,"number"),c(),l(4,"p"),f(5),g(6,"translate"),c()()),n&2){let r=i.$implicit;a(2),h(C(3,2,r.value)),a(3),h(C(6,4,r.label))}}var Ki=(()=>{let i=class i{subs;statisticDataService;changeDetectorRef;statistic=[{value:0,label:"OPEN_COUNT_TODAY"},{value:0,label:"TOTAL_OPEN_COUNT"},{value:0,label:"DOWNLOAD_COUNT_TODAY"},{value:0,label:"PRINT_COUNT_TODAY"}];todayStart=new Date().setHours(0,0,0,0);todayEnd=new Date().setHours(23,59,59,999);constructor(e,t,o){this.subs=e,this.statisticDataService=t,this.changeDetectorRef=o}ngOnInit(){this.getStatistic()}getStatistic(){this.subs.set("getStatistic",$t(15e3).pipe(Ht(0)).subscribe({next:()=>{_t([this.statisticDataService.getTimezoneStatistic({startDate:this.todayStart,endDate:this.todayEnd,periodUnit:De.DAILY}),this.statisticDataService.getTotalCountByPropertyName("openCount")]).subscribe({next:([e,t])=>{this.statistic[0].value=parseInt(e[0].openCount),this.statistic[1].value=parseInt(t),this.statistic[2].value=parseInt(e[0].downCount),this.statistic[3].value=parseInt(e[0].printCount),this.changeDetectorRef.markForCheck()},error:()=>{this.statistic[0].value=-1,this.statistic[1].value=-1,this.statistic[2].value=-1,this.statistic[3].value=-1,this.changeDetectorRef.markForCheck()}})}}))}};m(i,"\u0275fac",function(t){return new(t||i)(u(S),u(Re),u(L))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-statistic-board"]],standalone:!1,features:[k([S])],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,o){t&1&&(l(0,"article"),D(1,va,7,6,"div",0),c()),t&2&&(a(),p("ngForOf",o.statistic))},styles:["article[_ngcontent-%COMP%]{height:110px;border-radius:4px;box-sizing:border-box;background-color:#fff;display:flex}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{color:#ff6100}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid #DADADA}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Bold;font-size:24px;height:20px;line-height:20px;letter-spacing:-.6px;margin-bottom:12px;color:#1e1e1e}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:14px;height:14px;font-size:14px;font-family:NotoSans-Regular;letter-spacing:-.5px;color:#1e1e1e;margin:0}"],changeDetection:0}));let n=i;return n})();var qi=(()=>{let i=class i{changeDetectorRef;statisticDataService;subs;translatePipe;chartComponents;chartType={daily:"line",monthly:"bar"};chartDatasets={daily:[{data:[],label:"",borderColor:"#ff6600",backgroundColor:"#ffffff"}],monthly:[{data:[],label:"",barThickness:10,borderColor:"#f79f1a",backgroundColor:"#f79f1a"}]};chartLegend={daily:{display:!1},monthly:{display:!1}};defaultChartTooltip={mode:"index",intersect:!1,padding:{x:16,y:14},bodySpacing:8,callbacks:{label:e=>{let t=this.translatePipe.transform("NUMBER_OF_CASES"),o=this.translatePipe.transform("OPEN_COUNT");return St.lineChartLabelCallbackFn(e,e.dataset,t,o)},labelColor:()=>({borderColor:"#f79f1a",backgroundColor:"#f79f1a"}),title:()=>""}};chartTooltips={daily:K(W({},this.defaultChartTooltip),{callbacks:K(W({},this.defaultChartTooltip.callbacks),{labelColor:()=>({borderColor:"#ffffff",backgroundColor:"#ff6600"})})}),monthly:K(W({},this.defaultChartTooltip),{callbacks:K(W({},this.defaultChartTooltip.callbacks),{labelColor:()=>({borderColor:"#ffffff",backgroundColor:"#f79f1a"})})})};baseChartConfig={data:{labels:[],datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,fill:!1}},scales:{y:{min:0,beginAtZero:!1,ticks:{stepSize:20,callback:e=>e===0?`${e}${this.translatePipe.transform("NUMBER_OF_CASES")}`:e}}}}};dailyChartConfig=K(W({},this.baseChartConfig),{type:this.chartType.daily,data:K(W({},this.baseChartConfig.data),{datasets:this.chartDatasets.daily}),options:K(W({},this.baseChartConfig.options),{scales:K(W({},this.baseChartConfig.options?.scales),{x:{ticks:{callback:(e,t,o)=>{let s=this.dailyChartConfig.data.labels;if(s===void 0)throw new He("Chart labels are undefined.");let[d,_]=s[e].split(" ");return`${t===0||t===o.length-1?d:""} ${_}`}}}}),plugins:{legend:{display:this.chartLegend.daily.display},tooltip:this.chartTooltips.daily}})});monthlyChartConfig=K(W({},this.baseChartConfig),{type:this.chartType.monthly,data:K(W({},this.baseChartConfig.data),{datasets:this.chartDatasets.monthly}),options:K(W({},this.baseChartConfig.options),{plugins:{legend:{display:this.chartLegend.monthly.display},tooltip:this.chartTooltips.monthly}})});constructor(e,t,o,s){this.changeDetectorRef=e,this.statisticDataService=t,this.subs=o,this.translatePipe=s}ngOnInit(){this.getCharts(),this.initFields(this.dailyChartConfig.data.datasets[0]),this.initFields(this.monthlyChartConfig.data.datasets[0])}makeTwoDigits(e){return`0${e}`.slice(-2)}initFields(e){e.label=this.translatePipe.transform("OPEN_COUNT_COLUMN"),this.changeDetectorRef.markForCheck()}getCharts(){let e=U.getPeriod(1,new Date),t=U.getPeriod(2,new Date);t.startDate.setMonth(t.startDate.getMonth()-4),this.subs.set("getChart",$t(15e3).pipe(Ht(0)).subscribe({next:()=>{_t([this.statisticDataService.getTimezoneStatistic({startDate:e.startDate.getTime(),endDate:e.endDate.getTime(),periodUnit:De.DAILY}),this.statisticDataService.getTimezoneStatistic({startDate:t.startDate.getTime(),endDate:t.endDate.getTime(),periodUnit:De.MONTHLY})]).subscribe({next:([o,s])=>{this.dailyChartConfig.data.labels=[],this.monthlyChartConfig.data.labels=[];let d=[],_=[];o.sort((A,ee)=>parseInt(A.timestamp)-parseInt(ee.timestamp)).forEach(A=>{let ee=`${this.makeTwoDigits(A.month)}${this.translatePipe.transform("MONTH")}`,Ee=`${this.makeTwoDigits(A.date)}${this.translatePipe.transform("DAYS")}`,Je=`${ee} ${Ee}`;this.dailyChartConfig.data.labels.push(Je),_.push(parseInt(A.openCount))}),s.sort((A,ee)=>parseInt(A.timestamp)-parseInt(ee.timestamp)).forEach(A=>{let ee=`${this.makeTwoDigits(A.month)}${this.translatePipe.transform("MONTH")}`;this.monthlyChartConfig.data.labels.push(ee),d.push(parseInt(A.openCount))}),this.dailyChartConfig.data.datasets[0].data=_,this.monthlyChartConfig.data.datasets[0].data=d,this.chartComponents.forEach(A=>{A.update()}),this.changeDetectorRef.markForCheck()}})}}))}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(Re),u(S),u(M))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-statistic-chart"]],viewQuery:function(t,o){if(t&1&&ze(Mt,5),t&2){let s;je(s=$e())&&(o.chartComponents=s)}},standalone:!1,features:[k([S])],decls:8,vars:10,consts:[[1,"chart-container"],[1,"line-chart",3,"title"],[3,"config","visibleLegend"],[1,"bar-chart",3,"title"]],template:function(t,o){t&1&&(y(0,"sd-server-capacity"),l(1,"div",0)(2,"sd-card",1),g(3,"translate"),y(4,"sd-chart",2),c(),l(5,"sd-card",3),g(6,"translate"),y(7,"sd-chart",2),c()()),t&2&&(a(2),p("title",C(3,6,"DAILY_OPEN_COUNT")),a(2),p("config",o.dailyChartConfig)("visibleLegend",!0),a(),p("title",C(6,8,"MONTHLY_OPEN_COUNT")),a(2),p("config",o.monthlyChartConfig)("visibleLegend",!0))},styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap}sd-server-capacity[_ngcontent-%COMP%]{margin-bottom:20px}.chart-container[_ngcontent-%COMP%]{display:flex;box-sizing:border-box}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]{display:flex;width:calc(50% - 10px)}.chart-container[_ngcontent-%COMP%]   sd-card.line-chart[_ngcontent-%COMP%], .chart-container[_ngcontent-%COMP%]   sd-card.bar-chart[_ngcontent-%COMP%]{max-height:387px;margin:0;box-sizing:border-box}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]:first-child{margin-right:10px}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]:last-child{margin-left:10px}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]   sd-chart[_ngcontent-%COMP%]     .chart-container{max-height:262px;height:100%}"],changeDetection:0}));let n=i;return n})();var Qo=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-dashboard"]],standalone:!1,features:[k([])],decls:2,vars:0,template:function(t,o){t&1&&y(0,"sd-statistic-board")(1,"sd-statistic-chart")},dependencies:[Ki,qi],styles:["[_nghost-%COMP%]{min-width:1120px}sd-statistic-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto;margin-top:20px}"]}));let n=i;return n})();var Q=function(n){return n[n.DISALLOW_SAVE=0]="DISALLOW_SAVE",n[n.DISALLOW_DOWNLOAD=1]="DISALLOW_DOWNLOAD",n[n.DISALLOW_PRINTING=2]="DISALLOW_PRINTING",n[n.DISALLOW_ANNOTS=3]="DISALLOW_ANNOTS",n[n.DISALLOW_FORM=4]="DISALLOW_FORM",n}(Q||{}),Xi=(n,i,r,e)=>{if(!n)return"";let t=typeof r=="string"?parseInt(r):r,o=t?new Date(t):new Date,s=t?new Date(t):new Date;if(n instanceof Date){s.setTime(n.getTime());let O=Math.round((s.getTime()-o.getTime())/(1e3*60*60*24)),w=Qi(s);return O>365*100+25?`${i.transform("NO_EXPIRATION")}`:e?.pdf.referencePoint?.length>0?`${w}`:`${w} (${O}${i.transform("DAYS_AFTER")})`}switch(n){case fe.ONE_DAY:s.setDate(o.getDate()+1);break;case fe.ONE_WEEK:s.setDate(o.getDate()+7);break;case fe.ONE_MONTH:s.setMonth(o.getMonth()+1);break;case fe.ONE_YEAR:s.setFullYear(o.getFullYear()+1);break;case fe.TWO_HUNDRED_YEAR:s.setFullYear(o.getFullYear()+200);break;default:break}let d=Math.round((s.getTime()-o.getTime())/(1e3*60*60*24));if(d>365*100+25)return`${i.transform("NO_EXPIRATION")}`;if(s.getTime()<Date.now()){let O=Qi(new Date(parseInt(e.validity.expirationDate))),w=Qi(new Date(t));return d=Math.round((parseInt(e.validity.expirationDate)-t)/(1e3*60*60*24)),d>365*100+25?`${i.transform("NO_EXPIRATION")} (${w})`:`${O} (${d}${i.transform("DAYS_AFTER")})`}return`${Qi(s)} (${d}${i.transform("DAYS_AFTER")})`},Qi=n=>{let i=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),e=String(n.getDate()).padStart(2,"0");return`${i}-${r}-${e}`};var At=(()=>{let i=class i{baseHref;httpClient;productService;get documentsUrl(){return`${this.baseHref}v4/documents`}constructor(e,t,o){this.baseHref=e,this.httpClient=t,this.productService=o}fetchPdf(e){return this.httpClient.get(`${this.baseHref}v4/documents/admin`,{headers:Li,params:this.makeHttpParams(e)}).pipe(ut(t=>{t.resources.map(o=>{o.id=o.pdf.secureId?o.pdf.secureId:String(o.pdf.streamdocsId),o.pdf.fileSize=parseInt(o.pdf.fileSize),o.pdf.createdAt=parseInt(o.pdf.createdAt),o.pdf.updatedAt=parseInt(o.pdf.updatedAt),o.statistic.downCount=parseInt(o.statistic.downCount),o.statistic.openCount=parseInt(o.statistic.openCount),o.statistic.printCount=parseInt(o.statistic.printCount)})}))}postPdf(e){let t=new FormData,o=this.toMilliseconds(e.accessRestrictions.days??void 0,e.accessRestrictions.hours??void 0,e.accessRestrictions.minutes??void 0);return t.append("pdf",e.file,e.file.name),t.append("docName",e.docName),t.append("save",String(e.functions.save)),t.append("download",String(e.functions.download)),t.append("print",String(e.functions.printing)),t.append("annots",String(e.functions.annots)),t.append("form",String(e.functions.form)),t.append("description",String(e.description)),t.append("category",String(e.category)),e.accessRestrictions.maxCount&&t.append("maxCount",String(e.accessRestrictions.maxCount)),o&&t.append("openedLifespan",String(o)),e.lifeSpan&&t.append("lifespan",e.lifeSpan),e.expiredAt&&t.append("expiredAt",String(e.expiredAt)),this.httpClient.post(this.documentsUrl,t,{reportProgress:!0,observe:"events"})}toMilliseconds(e=0,t=0,o=0){return(e*24*60*60+t*60*60+o*60)*1e3}patchPdfName(e,t){let o=`${this.baseHref}v4/documents/${e}/docname`;return this.httpClient.patch(o,{docName:t})}patchCategory(e,t){let o=`${this.baseHref}v4/documents/${e}/category`;return this.httpClient.patch(o,{category:t})}patchExpiryDate(e,t){let o=`${this.baseHref}v4/documents/${e}/lifespan`;return this.httpClient.patch(o,t)}deletePdf(e){return this.httpClient.delete(`${this.documentsUrl}/${e}`)}makeHttpParams(e){let t=new Ue;return Object.keys(e).filter(o=>e[o]!==void 0).forEach(o=>{t=t.set(o,String(e[o]))}),t}addDoc(e,t){let o=t.get("expiryDate"),s=typeof o?.value.value.type=="number",d=t.get("functions").controls,_=t.get("accessRestrictions").controls,O=_.maxCount,w=_.openedLifespan,A=t.get("description"),ee=t.get("category"),Ee=t.get("docName"),Je=Ee?.value;if((Ee===null||Je&&Je.length===0)&&(Je=e.name.normalize("NFC")),A===null||ee===null||o===null)throw new He("Required form control is missing.");return this.postPdf({file:e,docName:Je,lifeSpan:s?null:o.value.value.type,expiredAt:s?o.value.value.type:null,accessRestrictions:{maxCount:O.value?.value??null,days:w.value?w.value[Oi.DAYS]:null,hours:w.value?w.value[Oi.HOURS]:null,minutes:w.value?w.value[Oi.MINUTES]:null},functions:{save:this.productService.isStreamDocs?d[Q.DISALLOW_SAVE].value:!0,download:this.productService.isStreamDocs?d[Q.DISALLOW_DOWNLOAD].value:!0,printing:this.productService.isStreamDocs?d[Q.DISALLOW_PRINTING].value:!0,annots:this.productService.isStreamDocs?d[Q.DISALLOW_ANNOTS].value:!0,form:this.productService.isStreamDocs?d[Q.DISALLOW_FORM].value:!0},description:A.value,category:ee.value})}uploadFiles(e,t){let o=[];return e.forEach(s=>{o.push(this.addDoc(s.file,t))}),An(...o)}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be),N(Dt))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var Sa=()=>["papycon-settings"];function Ma(n,i){if(n&1){let r=T();l(0,"button",8),P("click",function(){x(r);let t=b();return v(t.downloadOriginalFile())}),y(1,"i",10),f(2),g(3,"translate"),c()}if(n&2){let r=b();p("disabled",(r.formGroup.controls.checkedIds.value==null?null:r.formGroup.controls.checkedIds.value.length)!==1||!r.hasOriginalFileInChecked||r.hasDeleted()),a(2),h(C(3,2,"ORIGINAL_DOWNLOAD"))}}function Da(n,i){if(n&1){let r=T();l(0,"div")(1,"sd-editable-label",20),P("inputValueChange",function(t){let o=x(r).$implicit,s=b();return v(s.editDocName(t,o.id))})("iconButtonClick",function(t){let o=x(r).$implicit,s=b();return v(t==="papycon-settings"&&s.openDetailDialog(o))})("dblclick",function(t){let o=x(r).$implicit,s=b();return v(s.onDoubleClick(t,o.pdf.deleted))}),c()()}if(n&2){let r=i.$implicit;a(),p("readonly",r.pdf.deleted)("label",r.pdf.docName)("iconButtons",zn(3,Sa))}}function Ea(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.pdf.category)}}function Ta(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit,e=b();a(),h(e.fileStatus(r.pdf.deleted))}}function Ia(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h((r.owner==null?null:r.owner.name)||"(unknown)")}}function wa(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit,e=b();z("deleted",r.pdf.deleted),a(),h(e.fileSize(r.pdf.fileSize))}}function Na(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.pdf.createdAt,"yyyy-MM-dd"))}}function Aa(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.pdf.updatedAt,"yyyy-MM-dd"))}}function ka(n,i){if(n&1){let r=T();l(0,"admin-dropdown",23),P("click",function(){x(r);let t=b().$implicit,o=b();return v(o.onExpirationButtonClick(t))})("dblclick",function(t){return x(r),v(t.stopPropagation())}),c()}if(n&2){let r=b().$implicit,e=b();p("formControlName",r.id)("options",e.rangeOptions)("labelFunc",e.getLabelFunction(r))}}function Ra(n,i){n&1&&(l(0,"span",24),f(1,"-"),c())}function Fa(n,i){if(n&1&&(l(0,"div"),X(1,15),D(2,ka,1,3,"admin-dropdown",21)(3,Ra,2,0,"span",22),Z(),c()),n&2){let r=i.$implicit,e=b();a(),p("formGroup",e.expiryDateFormGroup),a(),p("ngIf",!r.pdf.deleted),a(),p("ngIf",r.pdf.deleted)}}function La(n,i){if(n&1){let r=T();l(0,"div")(1,"button",25),P("click",function(){let t=x(r).$implicit,o=b();return v(o.copyLink(t))})("dblclick",function(t){return x(r),v(t.stopPropagation())}),y(2,"i",26),c()()}if(n&2){let r=i.$implicit;a(),p("disabled",r.pdf.deleted)}}function Ua(n,i){n&1&&(l(0,"div",27)(1,"div",28),y(2,"span",29),l(3,"p",30),f(4),g(5,"translate"),c(),y(6,"div",31),l(7,"p",32),f(8),g(9,"translate"),c()()()),n&2&&(a(4),h(C(5,2,"NO_DOCUMENT")),a(4),h(C(9,4,"PLEASE_ADD_DOCUMENT")))}var Zi=(()=>{let i=class i{changeDetectorRef;documentListDataService;toastService;subs;translatePipe;adminDialogService;datePickerService;pdfDataService;bytesPipe;resourceService;router;formBuilder;productService;downloadService;baseHref;formGroup;orderBy;asc;countOfCompletedUpload=0;addDocFormGroup;initialAddDocFormGroupValues=void 0;expiryDateFormGroup;selectedItem;rangeOptions=[];displayableColumns=[];isLoading=!0;checkedTemplates=[];table=new Ne;lastDatePickerData;template;_activeColumns=[];filterMenus=[];get dateStandard(){return this.pdfDataService.dateStandard}get currentPageIndex(){return this.table.getPageInfo().currentIndex}get acceptableExtensions(){return this.productService.acceptableExtensions.join(", ")}get isVu(){return this.productService.isStreamDocsVu}get hasOriginalFileInChecked(){return this.formGroup.controls.checkedIds.value?.every(e=>!this.table.getData().find(o=>o.id===e)?.pdf.givenName.split(".").reverse()[0].includes("pdf"))}get searchInputPlaceholder(){let e=this.translatePipe.transform("DOCUMENT_LIST_SEARCH_INPUT_PLACEHOLDER");return this.displayableColumns.find(o=>o.key==="category")?.isActive&&(e+=`, ${this.translatePipe.transform("DOCUMENT_CATEGORY")}`),e}get filteredColumns(){return this._activeColumns}set filteredColumns(e){this._activeColumns=e}constructor(e,t,o,s,d,_,O,w,A,ee,Ee,Je,Cn,yr,Or){this.changeDetectorRef=e,this.documentListDataService=t,this.toastService=o,this.subs=s,this.translatePipe=d,this.adminDialogService=_,this.datePickerService=O,this.pdfDataService=w,this.bytesPipe=A,this.resourceService=ee,this.router=Ee,this.formBuilder=Je,this.productService=Cn,this.downloadService=yr,this.baseHref=Or,this.formGroup=this.formBuilder.nonNullable.group({expiryDate:this.formBuilder.nonNullable.array([]),checkedIds:this.formBuilder.nonNullable.control([])}),this.addDocFormGroup=this.formBuilder.nonNullable.group({docName:this.formBuilder.nonNullable.control("",Bt.required),category:this.formBuilder.nonNullable.control(""),description:this.formBuilder.nonNullable.control(""),expiryDate:this.formBuilder.nonNullable.control({label:this.translatePipe.transform("BASIC_EXPIRY_DATE_OPTION"),value:{type:fe.ONE_MONTH}}),accessRestrictions:this.formBuilder.group({maxCount:this.formBuilder.control({value:null,disabled:!0}),openedLifespan:this.formBuilder.control({value:null,disabled:!0})}),functions:this.formBuilder.nonNullable.group({[Q.DISALLOW_SAVE]:this.formBuilder.nonNullable.control(!0),[Q.DISALLOW_DOWNLOAD]:this.formBuilder.nonNullable.control(!1),[Q.DISALLOW_PRINTING]:this.formBuilder.nonNullable.control(!0),[Q.DISALLOW_ANNOTS]:this.formBuilder.nonNullable.control(!0),[Q.DISALLOW_FORM]:this.formBuilder.nonNullable.control(!0)}),files:this.formBuilder.nonNullable.control([]),uploadProgress:this.formBuilder.group({})}),this.initialAddDocFormGroupValues=this.addDocFormGroup.value,this.rangeOptions=[{label:this.translatePipe.transform("ONE_DAY_AFTER"),value:{type:fe.ONE_DAY}},{label:this.translatePipe.transform("ONE_WEEK_AFTER"),value:{type:fe.ONE_WEEK}},{label:this.translatePipe.transform("ONE_MONTH_AFTER"),value:{type:fe.ONE_MONTH}},{label:this.translatePipe.transform("ONE_YEAR"),value:{type:fe.ONE_YEAR}},{label:this.translatePipe.transform("NO_EXPIRATION"),value:{type:fe.TWO_HUNDRED_YEAR}},{label:this.translatePipe.transform("DATE_INPUT"),value:{type:()=>(this.datePickerService.statusSrc.next({position:{top:`calc(50% - ${ht.DATE_PICKER_HEIGHT/2}px)`,left:`calc(50% - ${ht.DATE_PICKER_WIDTH/2}px)`},title:this.translatePipe.transform("DATE_INPUT"),isVisible:!0,initialDate:Number(this.template.validity.expirationDate)}),this.datePickerService.dateChange$)}}],this.displayableColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0,isActive:!0,filterable:!1},{key:"category",title:this.translatePipe.transform("DOCUMENT_CATEGORY"),sortable:!0,isActive:!0,filterable:!0},{key:"status",title:this.translatePipe.transform("STATUS"),sortable:!1,isActive:!0,filterable:!0},{key:"userName",title:this.translatePipe.transform("AUTHOR"),sortable:!0,isActive:!0,filterable:!0},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1,isActive:!0,filterable:!0},this.dateStandard==="CreatedAt"?{key:"createdAt",title:this.translatePipe.transform("REGISTRATION_DATE"),sortable:!0,isActive:!0,filterable:!0}:{key:"updatedAt",title:this.translatePipe.transform("UPDATED_DATE"),sortable:!0,isActive:!0,filterable:!0},{key:"expiredAt",title:this.translatePipe.transform("EXPIRY_DATE"),sortable:!1,isActive:!0,filterable:!0},{key:"copy",title:"",sortable:!1,isActive:!0,filterable:!1}],this.filteredColumns=this.displayableColumns,this.expiryDateFormGroup=this.formBuilder.group({}),this.filterMenus=[{label:this.translatePipe.transform("REGISTRATION_DATE"),type:"date",item:U.getDateFilterList(["custom"]),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:"custom"}],isMulti:!1},{label:this.translatePipe.transform("SELECT_CATEGORY"),type:"columns",item:this.filteredColumns.filter(hi=>hi.filterable).map(hi=>({label:hi.title,value:hi})),isMulti:!1}]}ngOnInit(){this.setExpirationDateHeader(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.dialogType===V.DOCUMENT_DETAIL&&e.action==="confirm")).subscribe({next:()=>{let e=this.addDocFormGroup.getRawValue();this.subs.set("patchDoc",_t([this.documentListDataService.patchPdfName(this.selectedItem.id,e.docName),this.documentListDataService.patchCategory(this.selectedItem.id,e.category),this.resourceService.patchPdfDescription({id:this.selectedItem.id,description:e.description}),this.resourceService.patchPdfAuthority({id:this.selectedItem.id,authority:{save:e.functions[Q.DISALLOW_SAVE],annots:e.functions[Q.DISALLOW_ANNOTS],download:e.functions[Q.DISALLOW_DOWNLOAD],print:e.functions[Q.DISALLOW_PRINTING],form:e.functions[Q.DISALLOW_FORM]}})]).subscribe({next:()=>{this.toastService.create({icon:"success",content:this.translatePipe.transform("SUCCESS_PATCH_DOCUMENT")}),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}))}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.dialogType===V.DELETE_ITEMS)).subscribe({next:e=>{e.action==="confirm"&&this.deleteDoc()}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.dialogType===V.ADD_DOCUMENT)).subscribe({next:e=>{if(e.action==="confirm"){let t=e.data.files,o=[],s=t.length,d=0;this.countOfCompletedUpload=0,t.forEach(_=>{let O=this.addDocFormGroup.controls.uploadProgress.controls[_.id];o.push(O)}),this.documentListDataService.uploadFiles(t,this.addDocFormGroup).subscribe({next:_=>{_.type===xn.UploadProgress&&o[d].setValue(_.loaded/_.total*100),_.type===xn.Response&&_.status===201&&(d++,this.toastService.create({icon:"success",content:this.translatePipe.transform("SUCCESS_ADD_DOCUMENT")}),++this.countOfCompletedUpload===s&&(this.adminDialogService.closeCurrentActiveDialog(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)))},error:()=>{this.toastService.create({icon:"failed",content:this.translatePipe.transform("FAILED_TO_ADD_DOCUMENT")})}})}e.action==="open"&&this.initAddDocDialog(),e.action==="error"&&this.toastService.create({icon:"failed",content:e.message})}}),this.datePickerService.dateChange$.subscribe({next:e=>{this.lastDatePickerData=e}}),this.table.filterGroup.controls.keyword.valueChanges.pipe(G(e=>!e)).subscribe({next:()=>{this.searchKeyword()}}))}onColumnFilterChange(e){e.isActive=!e.isActive,this.filteredColumns=this.displayableColumns.filter(t=>t.isActive)}setExpirationDateHeader(){this.displayableColumns.forEach(e=>{if(e.key==="expiredAt"){let t;switch(this.dateStandard){case"CreatedAt":t=this.translatePipe.transform("BY_CREATED_AT");break;case"UpdatedAt":case"LastAccessedAt":t=this.translatePipe.transform("BY_UPDATED_AT");break}e.title=`${e.title} (${t})`}})}fileStatus(e){return e?this.translatePipe.transform("DELETE"):this.translatePipe.transform("NORMAL")}fileSize(e){return e===0?"-":this.bytesPipe.transform(e)}checkedStatusChange(e){this.formGroup.controls.checkedIds.setValue(e),this.checkedTemplates=this.getCheckedTemplates(e)}searchKeyword(){this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}onExpirationButtonClick(e){this.template=e}editDocName(e,t){this.documentListDataService.patchPdfName(t,e).subscribe({next:()=>{this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.toastService.create({icon:"success",content:this.translatePipe.transform("SUCCEED_PATCHING")})}})}onCreateClick(){this.adminDialogService.toggleDialogVisibility(V.ADD_DOCUMENT,!0,{title:this.translatePipe.transform("REGISTER_DOCUMENT"),size:{width:873,height:592},formGroup:this.addDocFormGroup,data:{files:[],acceptable:this.acceptableExtensions}})}onDeleteClick(){this.adminDialogService.toggleDialogVisibility(V.DELETE_ITEMS,!0,{description:"",size:{width:336,height:280},data:this.formGroup.controls.checkedIds.value.map(e=>this.table.getData().find(t=>t.id===e)),caller:Kt.DOCUMENT_LIST})}openDetailDialog(e){if(e.pdf.deleted){this.toastService.create({icon:"failed",content:this.translatePipe.transform("DELETED_DOCUMENT_TOAST_MESSAGE")});return}this.selectedItem=e;let{functions:t,description:o,category:s,docName:d}=this.addDocFormGroup.controls;t.controls[Q.DISALLOW_SAVE].setValue(this.selectedItem.auth?.save??!1),t.controls[Q.DISALLOW_FORM].setValue(this.selectedItem.auth?.form??!1),t.controls[Q.DISALLOW_PRINTING].setValue(this.selectedItem.auth?.print??!1),t.controls[Q.DISALLOW_DOWNLOAD].setValue(this.selectedItem.auth?.download??!1),t.controls[Q.DISALLOW_ANNOTS].setValue(this.selectedItem.auth?.annots??!1),o.setValue(this.selectedItem.pdf.description),s.setValue(this.selectedItem.pdf.category),d.setValue(this.selectedItem.pdf.docName),this.adminDialogService.toggleDialogVisibility(V.DOCUMENT_DETAIL,!0,{title:e.pdf.docName,size:{width:700,height:this.productService.isStreamDocs?583:655},formGroup:this.addDocFormGroup,data:this.selectedItem})}getTemplates(e,t,o,s){this.isLoading=!0,this.subs.push(this.documentListDataService.fetchPdf({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:e,from:t?U.formatDate(t.startDate):void 0,to:t?U.formatDate(t.endDate):void 0,orderBy:o,ascending:s,deleted:!1,includeStatistics:!1}).subscribe({next:d=>{if(this.expiryDateFormGroup=this.formBuilder.group({}),this.isLoading=!1,d.pageInfo.totalCount==="0"){this.table.reset(),this.table.setData([]),this.changeDetectorRef.markForCheck();return}d.resources.forEach(_=>{this.expiryDateFormGroup.addControl(_.id,new te({label:"",value:{type:new Date(parseInt(_.validity.expirationDate))}}))}),this.table.setData(d.resources),this.table.setPageInfo(d.pageInfo.totalCount,d.pageInfo.listingCount),this.subs.set("dropdownChange",bt(...this.table.getData().map(_=>this.expiryDateFormGroup.controls[_.id].valueChanges.pipe(ne(O=>({id:_.id,control:O}))))).subscribe({next:_=>{let O={};typeof _.control.value.type=="function"?O.expiredAt=String(new Date(this.lastDatePickerData).getTime()):O.lifeSpan=_.control.value.type;let w=d.resources.find(Ee=>Ee.id===_.id),A=this.setStandardDate(w);if(O.lifeSpan!==void 0&&this.getExpirationDate(O.lifeSpan,A)<=Date.now()){this.toastService.create({icon:"failed",content:this.translatePipe.transform("NOT_ALLOWED_BEFORE_EXPIRATION_DATE")});return}this.subs.set("patchExpiryDate",this.documentListDataService.patchExpiryDate(_.id,O).subscribe({next:()=>{this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.toastService.create({icon:"success",content:this.translatePipe.transform("SUCCEED_PATCHING")})},error:()=>{this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}))}})),this.changeDetectorRef.markForCheck()}}))}getExpirationDate(e,t){let o=new Date(t);switch(e){case fe.ONE_DAY:o.setDate(o.getDate()+1);break;case fe.ONE_WEEK:o.setDate(o.getDate()+7);break;case fe.ONE_MONTH:o.setMonth(o.getMonth()+1);break;case fe.ONE_YEAR:o.setFullYear(o.getFullYear()+1);break;case fe.TWO_HUNDRED_YEAR:o.setFullYear(o.getFullYear()+200);break;default:break}return o.getTime()}deleteDoc(){this.checkedTemplates.forEach(e=>{this.documentListDataService.deletePdf(e.id).subscribe({next:()=>{this.toastService.create({icon:"success",content:this.translatePipe.transform("DOCUMENT_DELETED")}),this.table.reset(),this.adminDialogService.closeCurrentActiveDialog(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)},error:()=>{this.toastService.create({icon:"failed",content:this.translatePipe.transform("ERROR_DELETE_DELETED_DOCUMENT")})}})})}openDoc(e){if(e.pdf.deleted){this.toastService.create({icon:"failed",content:this.translatePipe.transform("REMOVED_DOCUMENT_ITEM_TOOLTIP")});return}sessionStorage.setItem(Ve.fromAdminStorage,"true"),window.open(this.makeStreamdocUrl(e.id),"_blank"),sessionStorage.removeItem(Ve.fromAdminStorage)}download(){this.pdfDataService.getDownloadUrl({docId:this.checkedTemplates[0]?.id,noBypass:!0}).subscribe({next:e=>this.downloadService.executeFileDownloader(e)})}downloadOriginalFile(){this.subs.push(this.pdfDataService.getOriginalDownloadUrl(this.checkedTemplates[0].pdf.secureId||this.checkedTemplates[0].pdf.streamdocsId).subscribe({next:e=>this.downloadService.executeFileDownloader(e)}))}getLabelFunction(e){let t=this.setStandardDate(e);return o=>Xi(o,this.translatePipe,t,e)}setStandardDate(e){let t;switch(this.dateStandard){case"CreatedAt":t=e.pdf.createdAt;break;case"UpdatedAt":t=e.pdf.updatedAt;break;case"LastAccessedAt":t=e.pdf.lastAccessedAt}return t}sortingChanges(e){this.orderBy=e.value===0?void 0:e.name,this.asc=e.value===0?void 0:e.value===1,this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}onPageChanging(e){this.table.setPageCurrentIndex(e-1),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}copyLink(e){Jt.copyToClipboard(window.location.origin+this.makeStreamdocUrl(e.id)),this.toastService.create({icon:"success",content:`"${e.pdf.docName}" ${this.translatePipe.transform("COPY_LINK")}`})}hasDeleted(){return this.checkedTemplates.some(e=>e.pdf.deleted)}onDoubleClick(e,t){t&&e.stopPropagation()}initAddDocDialog(){this.addDocFormGroup.reset(this.initialAddDocFormGroupValues)}getCheckedTemplates(e){return this.table.getData().filter(t=>e.some(o=>o===t.id))}makeStreamdocUrl(e){return`${this.router.serializeUrl(this.router.createUrlTree([this.baseHref,"view","sd"]))};streamdocsId=${e}`}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(At),u(Y),u(S),u(M),u(Ie),u(ht),u(Ui),u(he),u(Mo),u(me),u(xe),u(Dt),u(Io),u(se))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-document-list"]],standalone:!1,features:[k([he,S,yi,{provide:se,useFactory:e=>e.getBaseHrefFromDOM(),deps:[jn]}])],decls:43,vars:48,consts:[["emptyEl",""],[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"tools"],["size","small","color","primary",1,"ep-button",3,"click"],[1,"papycon","papycon-plus3"],["size","small","color","grey",1,"ep-button",3,"click","disabled"],[1,"papycon","papycon-minus2"],["size","small","color","white",1,"ep-button",3,"click","disabled"],[1,"papycon","papycon-pen"],[1,"papycon","papycon-download"],["class","ep-button","size","small","color","white",3,"disabled","click",4,"ngIf"],[1,"right-side"],["formControlName","filter",1,"small",3,"columnFilterChange","filterMenus"],["size","small","formControlName","keyword",1,"custom",3,"keydown.enter","focusout","useClearButton","placeholder"],[3,"formGroup"],[3,"checkedStatusChange","itemDblClick","sortingChange","data","displayedColumns","formArrayName","currentPageIndex","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"deleted",4,"eTableCell","eTableCellFor"],[3,"pageChange","last","sideButtonCount","page","prevLabel","nextLabel"],[3,"inputValueChange","iconButtonClick","dblclick","readonly","label","iconButtons"],["color","none",3,"formControlName","options","labelFunc","click","dblclick",4,"ngIf"],["class","deleted-file-expiryDate",4,"ngIf"],["color","none",3,"click","dblclick","formControlName","options","labelFunc"],[1,"deleted-file-expiryDate"],["size","tiny","color","white",1,"ep-button",3,"click","dblclick","disabled"],[1,"papycon","papycon-link"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-list2"],[1,"title"],[1,"dashed"],[1,"message"]],template:function(t,o){if(t&1){let s=T();l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-card",1)(4,"header",2)(5,"div",3)(6,"button",4),P("click",function(){return x(s),v(o.onCreateClick())}),y(7,"i",5),f(8),g(9,"translate"),c(),l(10,"button",6),P("click",function(){return x(s),v(o.onDeleteClick())}),y(11,"i",7),f(12),g(13,"translate"),c(),l(14,"button",8),P("click",function(){return x(s),v(o.openDoc(o.checkedTemplates[0]))}),y(15,"i",9),f(16),g(17,"translate"),c(),l(18,"button",8),P("click",function(){return x(s),v(o.download())}),y(19,"i",10),f(20),g(21,"translate"),c(),D(22,Ma,4,4,"button",11),c(),l(23,"div",12)(24,"sd-filter-pop-up",13),P("columnFilterChange",function(_){return x(s),v(o.onColumnFilterChange(_))}),c(),l(25,"pu-input",14),P("keydown.enter",function(){return x(s),v(o.searchKeyword())})("focusout",function(){return x(s),v(o.searchKeyword())}),c()()(),X(26,15),l(27,"e-table",16),P("checkedStatusChange",function(_){return x(s),v(o.checkedStatusChange(_))})("itemDblClick",function(_){return x(s),v(o.openDoc(_))})("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(28,Da,2,4,"div",17)(29,Ea,2,1,"div",17)(30,Ta,2,1,"div",17)(31,Ia,2,1,"div",17)(32,wa,2,3,"div",18)(33,Na,3,4,"div",17)(34,Aa,3,4,"div",17)(35,Fa,4,3,"div",17)(36,La,3,1,"div",17),c(),Z(),l(37,"footer")(38,"sd-pagination",19),g(39,"translate"),g(40,"translate"),P("pageChange",function(_){return x(s),v(o.onPageChanging(_))}),c()()(),D(41,Ua,10,6,"ng-template",null,0,J)}if(t&2){let s=H(42);a(),h(C(2,34,"DOCUMENT_LIST")),a(2),p("isLoading",o.isLoading),a(),p("formGroup",o.table.filterGroup),a(4),h(C(9,36,"ADD")),a(2),p("disabled",!(o.formGroup.controls.checkedIds.value!=null&&o.formGroup.controls.checkedIds.value.length)||o.hasDeleted()),a(2),h(C(13,38,"DELETE")),a(2),p("disabled",(o.formGroup.controls.checkedIds.value==null?null:o.formGroup.controls.checkedIds.value.length)!==1||o.hasDeleted()),a(2),h(C(17,40,"VIEW")),a(2),p("disabled",(o.formGroup.controls.checkedIds.value==null?null:o.formGroup.controls.checkedIds.value.length)!==1||o.hasDeleted()),a(2),h(C(21,42,"PDF_DOWNLOAD")),a(2),p("ngIf",o.isVu),a(2),p("filterMenus",o.filterMenus),a(),p("useClearButton",!0)("placeholder",o.searchInputPlaceholder),a(),p("formGroup",o.formGroup),a(),p("data",o.table.getData())("displayedColumns",o.filteredColumns)("formArrayName","expiryDate")("currentPageIndex",o.currentPageIndex)("emptyEl",s),a(),p("eTableCellFor","docName"),a(),p("eTableCellFor","category"),a(),p("eTableCellFor","status"),a(),p("eTableCellFor","userName"),a(),p("eTableCellFor","size"),a(),p("eTableCellFor","createdAt"),a(),p("eTableCellFor","updatedAt"),a(),p("eTableCellFor","expiredAt"),a(),p("eTableCellFor","copy"),a(2),p("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",o.table.getPageInfo().currentIndex+1)("prevLabel",C(39,44,"PREVIOUS"))("nextLabel",C(40,46,"NEXT"))}},styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}sd-card-loader[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}pu-icon[_ngcontent-%COMP%], .papycon[_ngcontent-%COMP%]{text-align:center}pu-icon.bt[_ngcontent-%COMP%], .papycon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #DADADA;border-radius:2px;height:62px;resize:none;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:solid 1px #DADADA;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.empty[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:flex;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:22px}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:solid 1.2px #C8C8C8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;box-sizing:border-box;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]     .docName{flex:1 1 200px;font-size:14px;display:flex;white-space:nowrap;overflow:hidden}e-table[_ngcontent-%COMP%]     .docName>div{width:100%}e-table[_ngcontent-%COMP%]     .category{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;flex:0 1 100px;font-size:14px}e-table[_ngcontent-%COMP%]     .status{flex:0 1 65px;font-size:14px}e-table[_ngcontent-%COMP%]     .userName{flex:0 1 100px;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{flex:0 1 100px;font-size:14px}e-table[_ngcontent-%COMP%]     .updatedAt{flex:0 1 100px;font-size:14px}e-table[_ngcontent-%COMP%]     .size{flex:0 1 65px;font-size:14px}e-table[_ngcontent-%COMP%]     .size .deleted{padding-left:10px}e-table[_ngcontent-%COMP%]     .expiredAt{flex:0 1 170px;display:flex}e-table[_ngcontent-%COMP%]     .expiredAt admin-dropdown{width:170px}e-table[_ngcontent-%COMP%]     .expiredAt:hover pu-dropdown[size]  div.select-box{background-color:#fff;border-radius:2px;border:1px solid #DADADA}e-table[_ngcontent-%COMP%]     .expiredAt pu-dropdown[size]  div.select-box{width:100px;display:flex;flex-direction:row-reverse;height:33px;border:none;background-color:transparent}e-table[_ngcontent-%COMP%]     .expiredAt pu-dropdown[size]  div.select-box div.expand-button{background-color:unset;border-left:unset}e-table[_ngcontent-%COMP%]     .expiredAt .deleted-file-expiryDate{font-size:14px;padding-left:10px}e-table[_ngcontent-%COMP%]     .copy{flex:0 1 63px;font-size:14px}e-table[_ngcontent-%COMP%]     .copy button{padding:4px 8px}e-table[_ngcontent-%COMP%]     .copy button .papycon{font-size:22px}footer[_ngcontent-%COMP%]{height:95px;display:flex;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}"]}));let n=i;return n})();function Va(n,i){if(n&1){let r=T();l(0,"i",3),P("click",function(){x(r);let t=b(2);return v(t.startEdit())}),c()}if(n&2){let r=b(2);z("visible",r.isHovered)}}function Ba(n,i){if(n&1){let r=T();l(0,"i",4),P("click",function(){let t=x(r).$implicit,o=b(2);return v(o.iconButtonClick.emit(t))}),c()}if(n&2){let r=i.$implicit,e=b(2);z("visible",e.isHovered),p("ngClass",r)}}function Ga(n,i){if(n&1&&(X(0),l(1,"span"),f(2),c(),D(3,Va,1,2,"i",1)(4,Ba,1,3,"i",2),Z()),n&2){let r=b();a(2),h(r.label),a(),p("ngIf",!r.readonly),a(),p("ngForOf",r.iconButtons)}}function za(n,i){if(n&1){let r=T();X(0),l(1,"pu-input",5),P("blur",function(){x(r);let t=b();return v(t.closeEdit())})("keydown.enter",function(){x(r);let t=b();return v(t.closeEdit())})("dblclick",function(t){x(r);let o=b();return v(o.onDoubleClick(t))}),c(),Z()}if(n&2){let r=b();a(),p("formControl",r.formControl)}}var Zo=(()=>{let i=class i{readonly=!1;isEditMode=!1;label="";iconButtons=[];inputValueChange=new tt;iconButtonClick=new tt;inputComponent;formControl=new te("",{nonNullable:!0});isHovered=!1;onHover(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1}ngOnChanges(){this.formControl.setValue(this.label)}startEdit(){this.isEditMode=!0,setTimeout(()=>this.inputComponent.onFocus())}closeEdit(){this.isEditMode=!1,this.label!==this.formControl.value&&this.inputValueChange.emit(this.formControl.value)}onDoubleClick(e){this.isEditMode&&e.stopPropagation()}};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-editable-label"]],viewQuery:function(t,o){if(t&1&&ze(le,5),t&2){let s;je(s=$e())&&(o.inputComponent=s.first)}},hostBindings:function(t,o){t&1&&P("mouseenter",function(d){return o.onHover(d)})("mouseleave",function(d){return o.onMouseLeave(d)})},inputs:{readonly:"readonly",isEditMode:"isEditMode",label:"label",iconButtons:"iconButtons"},outputs:{inputValueChange:"inputValueChange",iconButtonClick:"iconButtonClick"},standalone:!1,features:[vt],decls:2,vars:2,consts:[[4,"ngIf"],["class","papycon papycon-pen",3,"visible","click",4,"ngIf"],["class","papycon",3,"ngClass","visible","click",4,"ngFor","ngForOf"],[1,"papycon","papycon-pen",3,"click"],[1,"papycon",3,"click","ngClass"],[3,"blur","keydown.enter","dblclick","formControl"]],template:function(t,o){t&1&&D(0,Ga,5,3,"ng-container",0)(1,za,2,1,"ng-container",0),t&2&&(p("ngIf",!o.isEditMode),a(),p("ngIf",o.isEditMode))},dependencies:[Pt,Fe,de,le,q,qt],styles:["[_nghost-%COMP%]{overflow:hidden;display:flex}span[_ngcontent-%COMP%]{flex:0 1 auto;padding-right:.1em;margin-right:12px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}i[_ngcontent-%COMP%]{cursor:pointer;visibility:hidden}i.visible[_ngcontent-%COMP%]{visibility:visible}i[_ngcontent-%COMP%] + i[_ngcontent-%COMP%]{margin-left:8px}pu-input[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}));let n=i;return n})();var Ji=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B,we,ve]}));let n=i;return n})();var $a=n=>({content:n,className:"with-icon"});function Ha(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.pdf.docName)}}function Ya(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h((r.owner==null?null:r.owner.name)||"(unknown)")}}function Wa(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.validity.expirationDate,"yyyy-MM-dd"))}}function Ka(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit,e=b();a(),h(e.fileSize(r.pdf.fileSize))}}function qa(n,i){n&1&&(l(0,"div"),y(1,"i",9),g(2,"translate"),c()),n&2&&(a(),p("tooltip",it(3,$a,C(2,1,"REMOVED_DOCUMENT_ITEM_TOOLTIP"))))}function Qa(n,i){n&1&&(l(0,"div",10)(1,"div",11),y(2,"span",12),l(3,"p",13),f(4),g(5,"translate"),c(),y(6,"div",14),l(7,"p",15),f(8),g(9,"translate"),c()()()),n&2&&(a(4),h(C(5,2,"NO_REMOVED_DOCUMENT")),a(4),h(C(9,4,"MESSAGE_NO_REMOVED_DOCUMENT")))}var en=(()=>{let i=class i{changeDetectorRef;documentListDataService;subs;translatePipe;bytesPipe;formBuilder;filterMenus=[];formGroup;orderBy;asc;displayableColumns=[];isLoading=!0;table=new Ne;get currentPageIndex(){return this.table.getPageInfo().currentIndex}constructor(e,t,o,s,d,_){this.changeDetectorRef=e,this.documentListDataService=t,this.subs=o,this.translatePipe=s,this.bytesPipe=d,this.formBuilder=_,this.filterMenus=[{label:this.translatePipe.transform("REGISTRATION_DATE"),type:"date",item:U.getDateFilterList(["custom"]),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:"custom"}],isMulti:!1}],this.formGroup=this.formBuilder.group({expiryDate:this.formBuilder.array([])}),this.displayableColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"userName",title:this.translatePipe.transform("AUTHOR"),sortable:!0},{key:"expiredAt",title:this.translatePipe.transform("EXPIRY_DATE"),sortable:!1},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},{key:"expired",title:"",sortable:!1}]}ngOnInit(){this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}),this.table.filterGroup.controls.keyword.valueChanges.pipe(G(e=>!e)).subscribe({next:()=>{this.searchKeyword()}}))}fileSize(e){return e===0?"-":this.bytesPipe.transform(e)}searchKeyword(){this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}getTemplates(e,t,o,s){this.isLoading=!0,this.subs.push(this.documentListDataService.fetchPdf({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:e,from:t?U.formatDate(t.startDate):void 0,to:t?U.formatDate(t.endDate):void 0,orderBy:o,ascending:s,deleted:!0,includeStatistics:!1}).subscribe({next:d=>{if(this.isLoading=!1,d.pageInfo.totalCount==="0"){this.table.reset(),this.table.setData([]),this.changeDetectorRef.markForCheck();return}this.table.setData(d.resources),this.table.setPageInfo(d.pageInfo.totalCount,d.pageInfo.listingCount),this.changeDetectorRef.markForCheck()}}))}onPageChanging(e){this.table.setPageCurrentIndex(e-1),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}sortingChanges(e){this.orderBy=e.value===0?void 0:e.name,this.asc=e.value===0?void 0:e.value===1,this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(At),u(S),u(M),u(he),u(xe))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-removed-document-list"]],standalone:!1,decls:21,vars:30,consts:[["emptyEl",""],[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"right-side"],["size","small","formControlName","keyword",1,"custom",3,"keydown.enter","focusout","useClearButton","placeholder"],[3,"formGroup"],[3,"sortingChange","data","displayedColumns","formArrayName","currentPageIndex","checkEnable","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"pageChange","last","sideButtonCount","page","prevLabel","nextLabel"],[1,"papycon","papycon-questionmark",3,"tooltip"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-list2"],[1,"title"],[1,"dashed"],[1,"message"]],template:function(t,o){if(t&1){let s=T();l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-card",1)(4,"header",2)(5,"div",3)(6,"pu-input",4),g(7,"translate"),P("keydown.enter",function(){return x(s),v(o.searchKeyword())})("focusout",function(){return x(s),v(o.searchKeyword())}),c()()(),X(8,5),l(9,"e-table",6),P("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(10,Ha,2,1,"div",7)(11,Ya,2,1,"div",7)(12,Wa,3,4,"div",7)(13,Ka,2,1,"div",7)(14,qa,3,5,"div",7),c(),Z(),l(15,"footer")(16,"sd-pagination",8),g(17,"translate"),g(18,"translate"),P("pageChange",function(_){return x(s),v(o.onPageChanging(_))}),c()()(),D(19,Qa,10,6,"ng-template",null,0,J)}if(t&2){let s=H(20);a(),h(C(2,22,"REMOVED_DOCUMENT_LIST")),a(2),p("isLoading",o.isLoading),a(),p("formGroup",o.table.filterGroup),a(2),p("useClearButton",!0)("placeholder",C(7,24,"DOCUMENT_LIST_SEARCH_INPUT_PLACEHOLDER")),a(2),p("formGroup",o.formGroup),a(),p("data",o.table.getData())("displayedColumns",o.displayableColumns)("formArrayName","expiryDate")("currentPageIndex",o.currentPageIndex)("checkEnable",!1)("emptyEl",s),a(),p("eTableCellFor","docName"),a(),p("eTableCellFor","userName"),a(),p("eTableCellFor","expiredAt"),a(),p("eTableCellFor","size"),a(),p("eTableCellFor","expired"),a(2),p("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",o.table.getPageInfo().currentIndex+1)("prevLabel",C(17,26,"PREVIOUS"))("nextLabel",C(18,28,"NEXT"))}},styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}sd-card-loader[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}pu-icon[_ngcontent-%COMP%], .papycon[_ngcontent-%COMP%]{text-align:center}pu-icon.bt[_ngcontent-%COMP%], .papycon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #DADADA;border-radius:2px;height:62px;resize:none;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:solid 1px #DADADA;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.empty[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:flex;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}e-table[_ngcontent-%COMP%]{margin-top:20px;box-sizing:border-box;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]     .docName{flex:1;font-size:14px;display:flex;white-space:nowrap;overflow:hidden;margin-right:20px}e-table[_ngcontent-%COMP%]     .userName{flex:0 1 125px;font-size:14px}e-table[_ngcontent-%COMP%]     .size{flex:0 1 86px;font-size:14px}e-table[_ngcontent-%COMP%]     .expiredAt{flex:0 1 170px;font-size:14px}e-table[_ngcontent-%COMP%]     .expired{display:flex;justify-content:center;flex:0 1 100px;font-size:14px;font-weight:500}e-table[_ngcontent-%COMP%]     .expired i{font-size:20px;margin-left:5px;cursor:pointer}footer[_ngcontent-%COMP%]{height:95px;display:flex;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}"],changeDetection:0}));let n=i;return n})();var Jo=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[At],imports:[yo,at,B,Ii,Ji,pt,nt,ue,Et,ot,Ot,Xt,we,ve,gt,dt,st]}));let n=i;return n})();_e(Zi,[Pe,de,Ti,Zo,Be,q,Oe,le,Se,Me,Pn,Ke,Ye,We],[Le,M]);_e(en,[Pe,q,Oe,le,Se,Me,Pn,Ke,Ye,We,xi],[Le,M]);var Za=n=>({statistic:n});function Ja(n,i){if(n&1&&(l(0,"li")(1,"p"),f(2),g(3,"translate"),c(),l(4,"span"),f(5),c()()),n&2){let r=i.$implicit;a(2),h(C(3,2,r.label)),a(3),h(r.value)}}function es(n,i){n&1&&Rt(0)}function ts(n,i){if(n&1&&(l(0,"div",17)(1,"span",18),f(2),c(),l(3,"span",19),f(4),c()()),n&2){let r=i.$implicit,e=b().statistic,t=b(2);a(2),h(r.docName),a(2),h(t.dataCount(e,r))}}function is(n,i){if(n&1&&D(0,ts,5,2,"div",16),n&2){let r=i.statistic;p("ngForOf",r.data)}}function ns(n,i){if(n&1){let r=T();l(0,"div",13),P("click",function(){let t=x(r).$implicit,o=b();return v(o.onClickStatisticCard(t))}),l(1,"header")(2,"label"),f(3),g(4,"translate"),c(),y(5,"i",8),c(),l(6,"div",14),D(7,es,1,0,"ng-container",15)(8,is,1,1,"ng-template",null,3,J),c()()}if(n&2){let r=i.$implicit,e=H(9),t=b(),o=H(37);z("active",t.selectedStatistic===r),a(3),h(C(4,6,r.label)),a(2),p("ngClass",t.getTableHeaderIconClass(r.icon)),a(2),p("ngTemplateOutlet",r.data.length?e:o)("ngTemplateOutletContext",it(8,Za,r))}}function os(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit,e=b();a(),h(e.fileStatus(r.pdf.deleted))}}function rs(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.pdf.docName)}}function as(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"number"),g(3,"translate"),c()),n&2){let r=i.$implicit,e=b();a(),Ft("",C(2,2,e.getDynamicData(r))," ",C(3,4,"NUMBER_OF_OCCURRENCES"),"")}}function ss(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit,e=b();z("deleted",r.pdf.deleted),a(),h(e.fileSize(r.pdf.fileSize))}}function ls(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.pdf.createdAt,"yyyy-MM-dd"))}}function cs(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.pdf.updatedAt,"yyyy-MM-dd"))}}function ps(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit,e=b();z("deleted",r.pdf.deleted),a(),h(e.getExpiryDate(r))}}function ds(n,i){if(n&1){let r=T();l(0,"div")(1,"i",20),P("click",function(){let t=x(r).$implicit,o=b();return v(o.toggleTableIcon(t))}),c()()}if(n&2){let r=i.$implicit,e=b();a(),p("ngClass",e.papyconClass(r))}}function ms(n,i){if(n&1){let r=T();l(0,"sd-statistic-card",21),P("dateTypeChange",function(t){x(r);let o=b();return v(o.changeDateType(t))})("customDateChange",function(t){x(r);let o=b();return v(o.changeDate(t))})("downloadClick",function(){x(r);let t=b();return v(t.downloadToCSV())}),c()}if(n&2){let r=b();p("chartStyle",r.chartStyle)("chartConfig",r.chartConfig)("legendDate",r.dateInfo)("showDownloadButton",!0)}}function us(n,i){if(n&1&&(l(0,"div",22)(1,"div",23),y(2,"i",24),l(3,"p",25),f(4),c()()()),n&2){let r=b();a(4),h(r.emptyMessage)}}function fs(n,i){if(n&1&&(l(0,"div",22)(1,"div",23),y(2,"i",24),l(3,"p",25),f(4),c()()()),n&2){let r=i.statistic,e=b();a(4),h(e.emptyStatisticMessage(r))}}var tn=(()=>{let i=class i{documentListDataService;subs;statisticDataService;changeDetectorRef;tableService;translatePipe;bytesPipe;chartService;pdfDataService;isLoading=!0;statistic=[{type:pe.VIEW,data:[],label:Ze.MOST_VIEWED_DOCUMENTS,icon:"document"},{type:pe.DOWNLOAD,data:[],label:Ze.MOST_DOWNLOADED_DOCUMENTS,icon:"download"},{type:pe.PRINT,data:[],label:Ze.MOST_PRINTED_DOCUMENTS,icon:"print"}];_totalStatistic;table=new Ne;tableIcon="analytics";displayableColumns=[];chartStyle={height:"300px"};chartConfig={type:"line",data:{labels:[],datasets:[{data:[],label:"",borderColor:"#FF6600",backgroundColor:"#FFFFFF"}]},options:{responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,fill:!1}},scales:{x:{ticks:{callback:(e,t,o)=>{let s,d=this.chartConfig.data.labels;if(d===void 0)throw new He("Chart labels are undefined.");let[_,O,w]=d[e].split(" "),A=t===0||t===o.length-1;return this.chartStatus.dateType===3?s=`${A?_:""} ${O}`:s=`${A?O:""} ${w}`,s}}},y:{min:0,ticks:{stepSize:20}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,padding:{x:16,y:14},bodySpacing:8,callbacks:{label:e=>{let t=this.translatePipe.transform("NUMBER_OF_OCCURRENCES");return St.lineChartLabelCallbackFn(e,e.dataset,t)},labelColor:e=>({backgroundColor:this.chartConfig.data.datasets[e.datasetIndex].borderColor}),title:()=>""}}}}};dateInfo;sortedChartData=[];chartStatus={dateType:1,startDate:new Date,endDate:new Date};selectedStatistic;statisticId;tableIconFormGroup=new ci({});_dynamicColumnTitle;get totalStatistic(){return[{label:"TOTAL_COUNT_REGISTERED_DOCUMENTS",value:this._totalStatistic?.totalUploadCount??"-"},{label:"TOTAL_COUNT_DELETED_DOCUMENTS",value:this._totalStatistic?.totalDeleteCount??"-"},{label:"COUNT_CURRENT_READABLE_DOCUMENTS",value:this._totalStatistic?.avaliableOpenCount??"-"},{label:"RECENT_30_COUNT_REGISTERED_DOCUMENTS",value:this._totalStatistic?.monthUploadCount??"-"}]}get emptyMessage(){switch(this.selectedStatistic.type){case pe.VIEW:return this.translatePipe.transform("NO_OPEN_DOCUMENT");case pe.DOWNLOAD:return this.translatePipe.transform("NO_DOWN_DOCUMENT");case pe.PRINT:return this.translatePipe.transform("NO_PRINT_DOCUMENT");default:return""}}get dynamicColumnTitle(){return this._dynamicColumnTitle}set dynamicColumnTitle(e){switch(e){case Ze.MOST_DOWNLOADED_DOCUMENTS:{this._dynamicColumnTitle=this.translatePipe.transform("DOWN_COUNT_COLUMN");break}case Ze.MOST_VIEWED_DOCUMENTS:{this._dynamicColumnTitle=this.translatePipe.transform("OPEN_COUNT_COLUMN");break}case Ze.MOST_PRINTED_DOCUMENTS:{this._dynamicColumnTitle=this.translatePipe.transform("PRINT_COUNT_COLUMN");break}default:{this._dynamicColumnTitle="";break}}}get dateStandard(){return this.pdfDataService.dateStandard}constructor(e,t,o,s,d,_,O,w,A){this.documentListDataService=e,this.subs=t,this.statisticDataService=o,this.changeDetectorRef=s,this.tableService=d,this.translatePipe=_,this.bytesPipe=O,this.chartService=w,this.pdfDataService=A,this.displayableColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"status",title:this.translatePipe.transform("STATUS"),sortable:!1},{key:"data",title:this.translatePipe.transform("OPEN_COUNT_COLUMN"),sortable:!0},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},this.dateStandard==="CreatedAt"?{key:"createdAt",title:this.translatePipe.transform("REGISTRATION_DATE"),sortable:!0,isActive:!0,filterable:!0}:{key:"updatedAt",title:this.translatePipe.transform("UPDATED_DATE"),sortable:!0,isActive:!0,filterable:!0},{key:"expiredAt",title:this.translatePipe.transform("EXPIRY_DATE"),sortable:!1},{key:"icon",title:"",sortable:!1}]}ngOnInit(){this.setExpirationDateHeader(),this.init(),this.getStatistic(),this.getTemplates(this.dynamicColumnName(this.selectedStatistic.type),!1)}setExpirationDateHeader(){this.displayableColumns.forEach((e,t)=>{if(e.key==="expiredAt"){let o;switch(this.dateStandard){case"CreatedAt":o=this.translatePipe.transform("BY_CREATED_AT");break;case"UpdatedAt":case"LastAccessedAt":o=this.translatePipe.transform("BY_UPDATED_AT");break}this.displayableColumns[t]=K(W({},e),{title:`${e.title} (${o})`})}})}init(){this.selectedStatistic=this.statistic[0],this.dynamicColumnTitle=this.selectedStatistic.label}fileStatus(e){return e?this.translatePipe.transform("DELETE"):this.translatePipe.transform("NORMAL")}fileSize(e){return e===0?"-":this.bytesPipe.transform(e)}onClickStatisticCard(e){this.selectedStatistic=e,this.dynamicColumnTitle=e.label;let t=this.displayableColumns.find(o=>o.key==="data");t!==void 0&&(t.title=this.dynamicColumnTitle),this.displayableColumns=[...this.displayableColumns],this.getTemplates(this.dynamicColumnName(this.selectedStatistic.type),!1)}toggleTableIcon(e){let o=this.tableIconFormGroup.controls[e.id].value==="analytics"?"cross":"analytics";this.initTableIconFormGroup(),this.tableIconFormGroup.controls[e.id].setValue(o)}dataCount(e,t){switch(e.label){case"MOST_VIEWED_DOCUMENTS":return t.openCount;case"MOST_DOWNLOADED_DOCUMENTS":return t.downCount;case"MOST_PRINTED_DOCUMENTS":return t.printCount;default:return""}}trackByFn(e){return e.title}getTableHeaderIconClass(e){if(e)return["papycon",`papycon-${e}`]}papyconClass(e){return this.tableIcon=this.tableIconFormGroup.controls[e.id].value,`papycon-${this.tableIcon}`}getExpiryDate(e){if(e.pdf.deleted)return"-";let t=this.setStandardDate(e);return Xi(new Date(parseInt(e.validity.expirationDate)),this.translatePipe,t,e)}setStandardDate(e){let t;switch(this.dateStandard){case"CreatedAt":t=e.pdf.createdAt;break;case"UpdatedAt":t=e.pdf.updatedAt;break;case"LastAccessedAt":t=e.pdf.lastAccessedAt}return t}changeDateType(e){let t=this.chartStatus.startDate,o=this.chartStatus.endDate;this.chartStatus.dateType=e,this.dateInfo=U.getPeriod(e,t,o),this.getChart(e,this.dateInfo.startDate,this.dateInfo.endDate)}getTemplates(e,t){this.closeAccordion(),this.isLoading=!0,this.subs.push(this.documentListDataService.fetchPdf({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:void 0,from:void 0,to:void 0,orderBy:e,ascending:t,deleted:void 0,includeStatistics:!0}).subscribe({next:o=>{if(this.tableIconFormGroup=new ci({}),this.isLoading=!1,o.pageInfo.totalCount==="0"){this.table.reset(),this.table.setData([]),this.changeDetectorRef.markForCheck();return}o.resources.forEach(s=>{this.tableIconFormGroup.addControl(s.id,new te("analytics"))}),this.table.setData(o.resources),this.table.setPageInfo(o.pageInfo.totalCount,o.pageInfo.listingCount),this.subs.set("tableIconChange",bt(...this.table.getData().map(s=>this.tableIconFormGroup.controls[s.id].valueChanges.pipe(ne(d=>({id:s.id,icon:d}))))).subscribe({next:s=>{this.statisticId=s.id;let d={id:s.id,isVisible:s.icon==="cross"};this.tableService.accordionStatusChange(d),d.isVisible&&this.changeDateType(1)}})),this.changeDetectorRef.markForCheck()}}))}getDynamicData(e){switch(this.selectedStatistic?.label){case Ze.MOST_DOWNLOADED_DOCUMENTS:return e.statistic.downCount;case Ze.MOST_VIEWED_DOCUMENTS:return e.statistic.openCount;case Ze.MOST_PRINTED_DOCUMENTS:return e.statistic.printCount;default:return 0}}closeAccordion(){if(!this.statisticId)return;let e={id:this.statisticId,isVisible:!1};this.tableService.accordionStatusChange(e)}dynamicColumnName(e){switch(e){case pe.VIEW:return"openCount";case pe.DOWNLOAD:return"downCount";case pe.PRINT:return"printCount";default:return""}}emptyStatisticMessage(e){switch(e.type){case pe.VIEW:return this.translatePipe.transform("NO_OPEN_DOCUMENT");case pe.DOWNLOAD:return this.translatePipe.transform("NO_DOWN_DOCUMENT");case pe.PRINT:return this.translatePipe.transform("NO_PRINT_DOCUMENT");default:return""}}sortingChanges(e){let t=this.dynamicColumnName(this.selectedStatistic.type),o,s=e.value===0?void 0:e.value===1;e.value===0||e.name==="data"?o=t:o=e.name,this.getTemplates(o,s)}changeDate(e){this.chartStatus.startDate=e.startDate,this.chartStatus.endDate=e.endDate,this.changeDateType(4)}downloadToCSV(){let e=this.table.getData().find(t=>t.id===this.statisticId);St.downloadToCSV(this.sortedChartData.map(t=>({[this.translatePipe.transform("FULL_YEAR")]:t.year,[this.translatePipe.transform("MONTH")]:t.month,[this.translatePipe.transform("DAYS")]:t.date,[this.translatePipe.transform("OPEN_COUNT_COLUMN")]:t.openCount,[this.translatePipe.transform("DOWN_COUNT_COLUMN")]:t.downCount,[this.translatePipe.transform("PRINT_COUNT_COLUMN")]:t.printCount})),this.dateInfo.startDate,this.dateInfo.endDate,"".concat(this.translatePipe.transform("STATISTIC_BY_DOCUMENT"),oe.isDefined(e)?`_${e.pdf.docName}`:""))}getChart(e,t,o){this.chartConfig.data.labels=[],this.chartConfig.data.datasets[0].data=[];let s;e!==3?s=De.DAILY:s=De.MONTHLY,this.subs.push(this.statisticDataService.getTimezoneStatistic({startDate:t.getTime(),endDate:o.getTime(),periodUnit:s,isAccumulated:!1,documentId:this.statisticId}).subscribe({next:d=>{this.initChartDate();let _=d.sort((O,w)=>parseInt(O.timestamp)-parseInt(w.timestamp));this.sortedChartData=_,_.forEach(O=>{let w=`${this.makeTwoDigits(O.year)}${this.translatePipe.transform("YEAR")}`,A=`${this.makeTwoDigits(O.month)}${this.translatePipe.transform("MONTH")}`,ee=`${this.makeTwoDigits(O.date)}${this.translatePipe.transform("DAYS")}`,Ee=`${w} ${A} ${ee}`;this.chartConfig.data.labels.push(Ee),this.selectedStatistic.type===pe.VIEW?this.chartConfig.data.datasets[0].data.push(parseInt(O.openCount)):this.selectedStatistic.type===pe.PRINT?this.chartConfig.data.datasets[0].data.push(parseInt(O.printCount)):this.chartConfig.data.datasets[0].data.push(parseInt(O.downCount)),this.changeDetectorRef.markForCheck(),this.chartService.chartUpdate()})}}))}initChartDate(){this.chartStatus.startDate=new Date,this.chartStatus.endDate=new Date}makeTwoDigits(e){return`0${e}`.slice(-2)}getStatistic(){let e=["total",Wi.COUNT_DOC_OPEN,Wi.COUNT_DOC_DOWN,Wi.COUNT_DOC_PRINT];this.subs.push(_t(e.map(t=>t==="total"?this.statisticDataService.getDocumentIncrement():this.statisticDataService.getTopCountByPropertyName(t,4))).subscribe(([t,o,s,d])=>{this._totalStatistic=t,this.statistic[0].data=o,this.statistic[1].data=s,this.statistic[2].data=d,this.changeDetectorRef.markForCheck()}))}initTableIconFormGroup(){let e=this.table.getData().map(t=>t.id);this.chartConfig.data.datasets[0].label=this.translatePipe.transform(this.getChartLabel(this.selectedStatistic.type)),this.changeDetectorRef.markForCheck(),e.map(t=>{this.tableIconFormGroup.controls[t].setValue("analytics")})}getChartLabel(e){switch(e){case pe.VIEW:return"OPEN_COUNT_COLUMN";case pe.DOWNLOAD:return"DOWN_COUNT_COLUMN";case pe.PRINT:return"PRINT_COUNT_COLUMN";default:return""}}};m(i,"\u0275fac",function(t){return new(t||i)(u(At),u(S),u(Re),u(L),u(vo),u(M),u(he),u(ti),u(Ui))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-statistic-document"]],standalone:!1,features:[k([he])],decls:38,vars:39,consts:[["tableAccordionContentTemplate",""],["emptyTableEl",""],["emptyStatisticEl",""],["statisticEl",""],[1,"total-document-count-container"],[4,"ngFor","ngForOf"],["class","container",3,"active","click",4,"ngFor","ngForOf"],[3,"isLoading"],[3,"ngClass"],[3,"sortingChange","data","checkEnable","trackByFn","displayedColumns","accordionContentTemplate","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"deleted",4,"eTableCell","eTableCellFor"],[3,"pageChange","last","sideButtonCount","page","prevLabel","nextLabel"],[1,"container",3,"click"],[1,"table"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"docName"],[1,"count"],[1,"papycon",3,"click","ngClass"],[3,"dateTypeChange","customDateChange","downloadClick","chartStyle","chartConfig","legendDate","showDownloadButton"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-non-progress"],[1,"message"]],template:function(t,o){if(t&1){let s=T();l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"article")(4,"div",4)(5,"header")(6,"label"),f(7),g(8,"translate"),c()(),l(9,"ul"),D(10,Ja,6,4,"li",5),c()(),D(11,ns,10,10,"div",6),c(),l(12,"sd-card",7)(13,"header"),y(14,"i",8),l(15,"label"),f(16),g(17,"translate"),g(18,"translate"),c()(),l(19,"e-table",9),P("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(20,os,2,1,"div",10)(21,rs,2,1,"div",10)(22,as,4,6,"div",10)(23,ss,2,3,"div",11)(24,ls,3,4,"div",10)(25,cs,3,4,"div",10)(26,ps,2,3,"div",11)(27,ds,2,1,"div",10),c(),l(28,"footer")(29,"sd-pagination",12),g(30,"translate"),g(31,"translate"),P("pageChange",function(_){return x(s),o.table.setPageCurrentIndex(_-1),v(o.getTemplates(o.dynamicColumnName(o.selectedStatistic.type)))}),c()()(),D(32,ms,1,4,"ng-template",null,0,J)(34,us,5,1,"ng-template",null,1,J)(36,fs,5,1,"ng-template",null,2,J)}if(t&2){let s=H(33),d=H(35);a(),h(C(2,27,"STATISTIC_BY_DOCUMENT")),a(6),h(C(8,29,"ALL_DOCUMENTS_STATISTIC")),a(3),p("ngForOf",o.totalStatistic),a(),p("ngForOf",o.statistic),a(),p("isLoading",o.isLoading),a(2),p("ngClass",o.getTableHeaderIconClass(o.selectedStatistic==null?null:o.selectedStatistic.icon)),a(2),Ft("",C(17,31,o.selectedStatistic==null?null:o.selectedStatistic.label)," ",C(18,33,"LIST"),""),a(3),p("data",o.table.getData())("checkEnable",!1)("trackByFn",o.trackByFn)("displayedColumns",o.displayableColumns)("accordionContentTemplate",s)("emptyEl",d),a(),p("eTableCellFor","status"),a(),p("eTableCellFor","docName"),a(),p("eTableCellFor","data"),a(),p("eTableCellFor","size"),a(),p("eTableCellFor","createdAt"),a(),p("eTableCellFor","updatedAt"),a(),p("eTableCellFor","expiredAt"),a(),p("eTableCellFor","icon"),a(2),p("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",o.table.getPageInfo().currentIndex+1)("prevLabel",C(30,35,"PREVIOUS"))("nextLabel",C(31,37,"NEXT"))}},styles:["[_nghost-%COMP%]{min-width:1120px}article[_ngcontent-%COMP%]{display:flex;min-height:206px;margin-bottom:20px}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{min-width:280px;flex:1 1 0;border:solid 1px #FFFFFF;box-sizing:border-box}article[_ngcontent-%COMP%]   .container.active[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]:hover{cursor:pointer;border-radius:4px;border:solid 1px #F79F1A;background-color:#fff8ed}article[_ngcontent-%COMP%]   .container.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#f79f1a}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   span.docName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;flex:1 1 173px}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   span.count[_ngcontent-%COMP%]{margin-left:15px;text-align:right;flex:1 1 0}sd-card[_ngcontent-%COMP%]{padding:30px}header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:20px;margin-right:6px}label[_ngcontent-%COMP%]{font-family:NotoSans-Medium;display:inline-block;font-size:14px;height:14px;line-height:14px;letter-spacing:-.5px;color:#1e1e1e}.container[_ngcontent-%COMP%]{flex:1;display:flex;background-color:#fff;flex-direction:column;padding:30px;border-radius:4px}.container[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:14px}.container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-top:12px}.container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Regular;font-size:14px;display:inline-block;letter-spacing:-.5px;color:#1e1e1e}.container[_ngcontent-%COMP%]   span.count[_ngcontent-%COMP%]{color:#6c6c6c}.total-document-count-container[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 228px;display:flex;background-color:#fff;flex-direction:column;padding:30px 16px;border-radius:4px;margin-right:10px}.total-document-count-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Bold;font-size:30px;font-weight:700;line-height:20px;letter-spacing:-.75px;color:#1e1e1e}.total-document-count-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:inline-block;margin-bottom:22px}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;color:#1e1e1e;font-size:14px;line-height:24px;margin:0;padding:0}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0 0 4px;display:flex;justify-content:space-between;align-items:center}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:14px;line-height:24px;color:#ff6100}e-table[_ngcontent-%COMP%]{margin-top:20px;box-sizing:border-box;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]     div.table tr.tbody-row{min-height:40px;padding:0 0 0 18px}e-table[_ngcontent-%COMP%]     .column{padding:8px 0}e-table[_ngcontent-%COMP%]     .docName{flex:1;font-size:14px;display:flex;white-space:nowrap;overflow:hidden;margin-right:20px}e-table[_ngcontent-%COMP%]     .docName>div{width:100%}e-table[_ngcontent-%COMP%]     .data{flex:0 1 125px;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{flex:0 1 140px;font-size:14px}e-table[_ngcontent-%COMP%]     .updatedAt{flex:0 1 140px;font-size:14px}e-table[_ngcontent-%COMP%]     .status{flex:0 1 65px;font-size:14px}e-table[_ngcontent-%COMP%]     .size{flex:0 1 86px;font-size:14px}e-table[_ngcontent-%COMP%]     .size .deleted{padding-left:10px}e-table[_ngcontent-%COMP%]     .icon{flex:0 1 40px;height:100%}e-table[_ngcontent-%COMP%]     .icon>div{flex:1;display:flex;justify-content:center;align-items:center}e-table[_ngcontent-%COMP%]     td.icon{cursor:pointer}e-table[_ngcontent-%COMP%]     td.icon .papycon-analytics{color:#6c6c6c}e-table[_ngcontent-%COMP%]     td.icon .papycon-cross{color:#f79f1a}e-table[_ngcontent-%COMP%]     .expiredAt{flex:0 1 170px;display:flex;font-size:14px}e-table[_ngcontent-%COMP%]     .expiredAt .deleted{padding-left:10px}footer[_ngcontent-%COMP%]{height:95px;display:flex;justify-content:center;flex:0 0 auto}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}sd-statistic-card[_ngcontent-%COMP%]{flex:1}sd-statistic-card[_ngcontent-%COMP%]  sd-card{margin:0}sd-statistic-card[_ngcontent-%COMP%]  sd-card   article{margin:16px 0 0 20px}sd-statistic-card[_ngcontent-%COMP%]  sd-card   sd-chart{max-height:332px;margin:14px 16px 10px 20px}.empty[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{width:130px;display:flex;flex-direction:column;align-items:center;margin-top:34px}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:29px;color:#6c6c6c}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-family:NotoSans-Regular;font-size:14px;letter-spacing:-.5px;color:#6c6c6c}"],changeDetection:0}));let n=i;return n})();var nn=(()=>{let i=class i{changeDetectorRef;subs;statisticDataService;translatePipe;chartService;chartStyle={height:"300px"};chartConfig={type:"line",data:{labels:[],datasets:[{data:[],label:"",borderColor:"#ff6600",backgroundColor:"#ffffff"},{data:[],label:"",borderColor:"#f79f1a",backgroundColor:"#ffffff"},{data:[],label:"",borderColor:"#0C7489",backgroundColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,fill:!1}},scales:{x:{ticks:{callback:(e,t,o)=>{let s,d=this.chartConfig.data.labels;if(d===void 0)throw new He("Chart labels are undefined.");let[_,O,w]=d[e].split(" "),A=t===0||t===o.length-1;return this.chartStatus.dateType===3?s=`${A?_:""} ${O}`:s=`${A?O:""} ${w}`,s}}},y:{min:0,ticks:{stepSize:20}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,padding:{x:16,y:14},bodySpacing:8,callbacks:{label:e=>{let t=this.translatePipe.transform("NUMBER_OF_CASES");return St.lineChartLabelCallbackFn(e,e.dataset,t)},labelColor:e=>({backgroundColor:this.chartConfig.data.datasets[e.datasetIndex].borderColor}),title:()=>""}}}}};dateInfo;sortedChartData=[];chartStatus={dateType:1,startDate:new Date};constructor(e,t,o,s,d){this.changeDetectorRef=e,this.subs=t,this.statisticDataService=o,this.translatePipe=s,this.chartService=d}ngOnInit(){this.changeDateType(1),this.changeDateType(1),this.initFields()}changeDateType(e){this.chartStatus.dateType=e,this.dateInfo=U.getPeriod(e,this.chartStatus.startDate,this.chartStatus.endDate),this.getChart(e,this.dateInfo.startDate,this.dateInfo.endDate)}changeDate(e){this.chartStatus.startDate=e.startDate,this.chartStatus.endDate=e.endDate,this.changeDateType(4)}downloadToCSV(){St.downloadToCSV(this.sortedChartData.map(e=>({[this.translatePipe.transform("FULL_YEAR")]:e.year,[this.translatePipe.transform("MONTH")]:e.month,[this.translatePipe.transform("DAYS")]:e.date,[this.translatePipe.transform("OPEN_COUNT_COLUMN")]:e.openCount,[this.translatePipe.transform("DOWN_COUNT_COLUMN")]:e.downCount,[this.translatePipe.transform("PRINT_COUNT_COLUMN")]:e.printCount})),this.dateInfo.startDate,this.dateInfo.endDate,this.translatePipe.transform("STATISTIC_BY_PERIOD"))}getChart(e,t,o){this.chartConfig.data.labels=[];let s;e!==3?s=De.DAILY:s=De.MONTHLY,this.subs.push(this.statisticDataService.getTimezoneStatistic({startDate:t.getTime(),endDate:o.getTime(),periodUnit:s,isAccumulated:!1}).subscribe({next:d=>{this.initLineChartData(),this.initChartDate();let _=d.sort((O,w)=>parseInt(O.timestamp)-parseInt(w.timestamp));this.sortedChartData=_,_.forEach(O=>{let w=`${this.makeTwoDigits(O.year)}${this.translatePipe.transform("YEAR")}`,A=`${this.makeTwoDigits(O.month)}${this.translatePipe.transform("MONTH")}`,ee=`${this.makeTwoDigits(O.date)}${this.translatePipe.transform("DAYS")}`,Ee=`${w} ${A} ${ee}`;this.chartConfig.data.labels.push(Ee),this.chartConfig.data.datasets[0].data.push(parseInt(O.openCount)),this.chartConfig.data.datasets[1].data.push(parseInt(O.downCount)),this.chartConfig.data.datasets[2].data.push(parseInt(O.printCount))}),this.changeDetectorRef.markForCheck(),this.chartService.chartUpdate()}}))}initChartDate(){this.chartStatus.startDate=new Date,this.chartStatus.endDate=new Date}makeTwoDigits(e){return`0${e}`.slice(-2)}initLineChartData(){this.chartConfig.data.labels=[],this.chartConfig.data.datasets[0].data=[],this.chartConfig.data.datasets[1].data=[],this.chartConfig.data.datasets[2].data=[]}initFields(){this.chartConfig.data.datasets[0].label=this.translatePipe.transform("OPEN_COUNT_COLUMN"),this.chartConfig.data.datasets[1].label=this.translatePipe.transform("DOWN_COUNT_COLUMN"),this.chartConfig.data.datasets[2].label=this.translatePipe.transform("PRINT_COUNT_COLUMN"),this.changeDetectorRef.markForCheck()}chartLineVisibilityChange(e){let t=!e.hidden;e.hidden=t,this.changeDetectorRef.markForCheck(),this.chartService.chartUpdate()}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(S),u(Re),u(M),u(ti))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-statistic"]],standalone:!1,decls:5,vars:12,consts:[[3,"dateTypeChange","customDateChange","downloadClick","chartLineVisibilityChange","title","chartStyle","chartConfig","legendDate","showDownloadButton","showChartLineHiddenButton","height"]],template:function(t,o){t&1&&(l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-statistic-card",0),g(4,"translate"),P("dateTypeChange",function(d){return o.changeDateType(d)})("customDateChange",function(d){return o.changeDate(d)})("downloadClick",function(){return o.downloadToCSV()})("chartLineVisibilityChange",function(d){return o.chartLineVisibilityChange(d)}),c()),t&2&&(a(),h(C(2,8,"HISTORICAL_STATISTIC")),a(2),p("title",C(4,10,"HISTORICAL_STATISTIC"))("chartStyle",o.chartStyle)("chartConfig",o.chartConfig)("legendDate",o.dateInfo)("showDownloadButton",!0)("showChartLineHiddenButton",!0)("height",300))},styles:["[_nghost-%COMP%]{min-width:1120px}"],changeDetection:0}));let n=i;return n})();var zt=function(n){return n.ALL="ALL",n.UPLOAD="UPLOAD",n.DELETE="DELETE",n.OPEN="OPEN",n.DOWNLOAD="DOWNLOAD",n.PRINT="PRINT",n}(zt||{});var ri=(()=>{let i=class i{baseHref;httpClient;get logUrl(){return`${this.baseHref}v4/logs`}gzipHeaders;constructor(e,t){this.baseHref=e,this.httpClient=t,this.gzipHeaders=new Lt({"Content-Encoding":"gzip","Accept-Language":"utf-8"})}getLogList(e){let t=`${this.logUrl}`;return this.httpClient.get(t,{headers:this.gzipHeaders,params:this.makeHttpParams(e)}).pipe(ut(o=>{o.resources.map(s=>{s.id=s.name})}))}deleteLogs(e){let t=`${this.logUrl}/delete`;return this.httpClient.post(t,e)}getTemplateHistories(e){let t=`${this.baseHref}v4/statistic/documents/histories`;return this.httpClient.get(t,{headers:this.gzipHeaders,params:this.makeHttpParams(e)}).pipe(ut(o=>{o.resources.map(s=>{s.size=parseInt(s.size)})}))}makeHttpParams(e){let t=new Ue;return Object.keys(e).filter(o=>e[o]!==void 0).forEach(o=>{Array.isArray(e[o])?e[o].forEach(s=>{t=t.append(o,s)}):t=t.set(o,String(e[o]))}),t}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();function gs(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.docName)}}function hs(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.userName||"(unknown)")}}function Cs(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.hostname)}}function _s(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"action"),c()),n&2){let r=i.$implicit;a(),h(C(2,1,r.action))}}function bs(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.createdAt,"yyyy-MM-dd HH:mm:ss"))}}function xs(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"bytes"),c()),n&2){let r=i.$implicit;a(),h(C(2,1,r.size))}}function vs(n,i){n&1&&(l(0,"div",9)(1,"div",10),y(2,"span",11),l(3,"p",12),f(4),g(5,"translate"),c()()()),n&2&&(a(4),h(C(5,1,"NO_DOCUMENT_LOG")))}var on=(()=>{let i=class i{changeDetectorRef;logDataService;subs;translatePipe;isLoading=!0;displayableColumns=[];table=new Ne;actionFilterValues=[zt.UPLOAD,zt.DELETE];filterMenus=[];orderedBy="createdAt";asc=!1;constructor(e,t,o,s){this.changeDetectorRef=e,this.logDataService=t,this.subs=o,this.translatePipe=s,this.displayableColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"userName",title:this.translatePipe.transform("USER"),sortable:!0},{key:"hostname",title:this.translatePipe.transform("ACCESS_ADDRESS"),sortable:!0},{key:"action",title:this.translatePipe.transform("ACTION"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("DATE"),sortable:!0},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1}],this.filterMenus=[{label:"",type:"date",item:U.getDateFilterList(["custom"]),isMulti:!1},{label:"",type:"custom-date",item:[{label:"",value:"custom"}],isMulti:!1},{isMulti:!0,item:Object.values(zt).map(d=>d==="UPLOAD"?{label:"ADD",value:d}:{label:d,value:d}),label:this.translatePipe.transform("ACTION"),type:"action",defaultValues:[zt.UPLOAD,zt.DELETE]}]}ngOnInit(){this.initFields(),this.subs.push(this.table.filterChanges.pipe(kn(0)).subscribe({next:e=>{this.table.reset(),this.actionFilterValues=e.action?.value,this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc,this.actionFilterValues)}}),this.table.filterGroup.controls.keyword.valueChanges.pipe(G(e=>!e)).subscribe({next:()=>{this.searchKeyword()}}))}searchKeyword(){this.table.reset(),this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc,this.actionFilterValues)}getHistories(e,t,o,s,d){this.isLoading=!0,this.subs.push(this.logDataService.getTemplateHistories({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:e,from:t?U.formatDate(t.startDate):void 0,to:t?U.formatDate(t.endDate):void 0,orderBy:o,ascending:s,actions:d}).pipe(mt(()=>this.table.isLoading=!1)).subscribe({next:_=>{this.isLoading=!1,this.table.setData(_.resources),this.table.setPageInfo(_.pageInfo.totalCount,"15"),this.changeDetectorRef.markForCheck()}}))}sortingChanges(e){this.orderedBy=e.value===0?"createdAt":e.name,this.asc=e.value===0?!1:e.value===1,this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc,this.actionFilterValues)}onPageChanging(e){this.table.getPageInfo().currentIndex=e-1,this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc,this.actionFilterValues)}initFields(){this.filterMenus[0].label=this.translatePipe.transform("PERIOD"),this.filterMenus[1].label=this.translatePipe.transform("MANUAL_INPUT"),this.filterMenus[1].item[0].label=this.translatePipe.transform("MANUAL_SELECT"),this.changeDetectorRef.markForCheck()}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(ri),u(S),u(M))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-document-history"]],standalone:!1,features:[k([S])],decls:22,vars:30,consts:[["emptyEl",""],[3,"isLoading"],[1,"form-list-header"],[1,"tool",3,"formGroup"],["formControlName","filter",1,"small",3,"datePickerDirection","filterMenus"],["size","small","formControlName","keyword",1,"custom",3,"keydown.enter","focusout","useClearButton","placeholder"],[3,"sortingChange","data","checkEnable","displayedColumns","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"pageChange","page","last","sideButtonCount","prevLabel","nextLabel"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-preview"],[1,"title"]],template:function(t,o){if(t&1){let s=T();l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-card",1)(4,"header",2)(5,"div",3),y(6,"sd-filter-pop-up",4),l(7,"pu-input",5),g(8,"translate"),P("keydown.enter",function(){return x(s),v(o.searchKeyword())})("focusout",function(){return x(s),v(o.searchKeyword())}),c()()(),l(9,"e-table",6),P("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(10,gs,2,1,"div",7)(11,hs,2,1,"div",7)(12,Cs,2,1,"div",7)(13,_s,3,3,"div",7)(14,bs,3,4,"div",7)(15,xs,3,3,"div",7),c(),l(16,"footer")(17,"sd-pagination",8),g(18,"translate"),g(19,"translate"),P("pageChange",function(_){return x(s),v(o.onPageChanging(_))}),c()()(),D(20,vs,6,3,"ng-template",null,0,J)}if(t&2){let s=H(21);a(),h(C(2,22,"DOCUMENT_HISTORY")),a(2),p("isLoading",o.isLoading),a(2),p("formGroup",o.table.filterGroup),a(),p("datePickerDirection","right")("filterMenus",o.filterMenus),a(),p("useClearButton",!0)("placeholder",C(8,24,"DOCUMENT_LOG_KEYWORD_PLACEHOLDER")),a(2),p("data",o.table.getData())("checkEnable",!1)("displayedColumns",o.displayableColumns)("emptyEl",s),a(),p("eTableCellFor","docName"),a(),p("eTableCellFor","userName"),a(),p("eTableCellFor","hostname"),a(),p("eTableCellFor","action"),a(),p("eTableCellFor","createdAt"),a(),p("eTableCellFor","size"),a(2),p("page",o.table.getPageInfo().currentIndex+1)("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("prevLabel",C(18,26,"PREVIOUS"))("nextLabel",C(19,28,"NEXT"))}},styles:[".empty[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:flex;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:flex}.form-list-header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{width:400px;display:flex}.form-list-header[_ngcontent-%COMP%]   sd-filter-pop-up[_ngcontent-%COMP%]{margin-right:12px}.form-list-header[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:solid 1.2px #C8C8C8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;box-sizing:border-box;display:flex;width:100%;overflow:auto}e-table[_ngcontent-%COMP%]     .column{padding:8px 0}e-table[_ngcontent-%COMP%]     .SDID{flex:0 1 114px;font-size:14px}e-table[_ngcontent-%COMP%]     .docName{flex:1;font-size:14px}e-table[_ngcontent-%COMP%]     .userName{flex:0 1 15%;font-size:14px}e-table[_ngcontent-%COMP%]     .hostname{flex:0 1 15%;font-size:14px}e-table[_ngcontent-%COMP%]     .action{flex:0 1 15%;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{flex:0 1 15%;font-size:14px}e-table[_ngcontent-%COMP%]     .size{flex:0 1 15%;font-size:14px}footer[_ngcontent-%COMP%]{height:95px;display:flex;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}"],changeDetection:0}));let n=i;return n})();function Ps(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.name)}}function ys(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"bytes"),c()),n&2){let r=i.$implicit;a(),h(C(2,1,r.size))}}function Os(n,i){if(n&1){let r=T();l(0,"div")(1,"button",12),P("click",function(){let t=x(r).$implicit,o=b();return v(o.download(t))}),y(2,"i",13),f(3),g(4,"translate"),c()()}n&2&&(a(3),h(C(4,1,"DOWNLOAD")))}function Ss(n,i){n&1&&(l(0,"div",14)(1,"div",15),y(2,"span",16),l(3,"p",17),f(4),g(5,"translate"),c()()()),n&2&&(a(4),h(C(5,1,"NO_LOG")))}var rn=(()=>{let i=class i{changeDetectorRef;formBuilder;subs;logDataService;toastService;translatePipe;elementRef;renderer;adminDialogService;isLoading=!0;displayableColumns=[];formGroup;filterMenus=[];table=new Ne;orderBy;asc;get currentPageIndex(){return this.table.getPageInfo().currentIndex}constructor(e,t,o,s,d,_,O,w,A){this.changeDetectorRef=e,this.formBuilder=t,this.subs=o,this.logDataService=s,this.toastService=d,this.translatePipe=_,this.elementRef=O,this.renderer=w,this.adminDialogService=A,this.displayableColumns=[{key:"name",title:this.translatePipe.transform("LOG_NAME"),sortable:!1},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},{key:"download",title:"",sortable:!1}],this.formGroup=this.formBuilder.group({checkedIds:this.formBuilder.nonNullable.control([])}),this.filterMenus=[{label:"",type:"date",item:U.getDateFilterList(["custom"]),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:"custom"}],isMulti:!1}]}ngOnInit(){this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.initFields(),this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}),this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.DELETE_ITEMS)).subscribe({next:()=>{let e={logNames:[]};this.formGroup.getRawValue().checkedIds.map(t=>{e.logNames.push({name:t})}),this.subs.set("deleteLogs",this.logDataService.deleteLogs(e).subscribe({next:()=>{this.toastService.create({icon:"success",content:this.translatePipe.transform("SUCCESS_DELETE")}),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}})),this.adminDialogService.closeCurrentActiveDialog()}}))}download(e){let t=rt.token.accessToken,o=`v4/logs/download?name=${e.name}&accessToken=${t}`,s=this.elementRef.nativeElement,d=this.renderer.createElement("a");this.toastService.create({icon:"download",content:this.translatePipe.transform("DOWNLOADING_LOG_FILE")}),this.renderer.appendChild(s,d),d.href=o,d.click(),this.renderer.removeChild(s,d),d.remove&&d.remove()}checkedStatusChange(e){this.formGroup.controls.checkedIds.setValue(e)}onDeleteButtonClick(){this.adminDialogService.toggleDialogVisibility(V.DELETE_ITEMS,!0,{description:"",size:{width:336,height:280},data:this.formGroup.controls.checkedIds.value.map(e=>this.table.getData().find(t=>t.id===e)),caller:Kt.LOG})}getTemplates(e,t,o,s){this.formGroup.reset(),this.isLoading=!0,this.logDataService.getLogList({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:e,startDate:t?U.formatDate(t.startDate):void 0,endDate:t?U.formatDate(t.endDate):void 0,orderBy:o,ascending:s}).subscribe({next:d=>{this.isLoading=!1,this.table.setPageInfo(d.pageInfo.totalCount,d.pageInfo.listingCount),this.table.setData(d.resources),this.changeDetectorRef.markForCheck()}})}sortingChanges(e){this.orderBy=e.value===0?void 0:e.name,this.asc=e.value===0?void 0:e.value===1,this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}onPageChanging(e){this.table.setPageCurrentIndex(e-1),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}initFields(){this.filterMenus[0].label=this.translatePipe.transform("PERIOD"),this.filterMenus[1].label=this.translatePipe.transform("MANUAL_SELECT"),this.filterMenus[1].item[0].label=this.translatePipe.transform("MANUAL_SELECT"),this.changeDetectorRef.markForCheck()}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(xe),u(S),u(ri),u(Y),u(M),u(Ci),u(Fn),u(Ie))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-document-list"]],standalone:!1,features:[k([S])],decls:23,vars:28,consts:[["emptyEl",""],[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"tools"],["size","small","color","grey",1,"ep-button",3,"click","disabled"],[1,"papycon","papycon-minus2"],["formControlName","filter",1,"small",3,"filterMenus","datePickerDirection"],[1,"right-side"],[3,"formGroup"],[3,"checkedStatusChange","sortingChange","data","displayedColumns","currentPageIndex","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"pageChange","last","sideButtonCount","page","prevLabel","nextLabel"],["size","tiny","color","white",1,"ep-button",3,"click"],[1,"papycon","papycon-download"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-formtools"],[1,"title"]],template:function(t,o){if(t&1){let s=T();l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-card",1)(4,"header",2)(5,"div",3)(6,"button",4),P("click",function(){return x(s),v(o.onDeleteButtonClick())}),y(7,"i",5),f(8),g(9,"translate"),c(),y(10,"sd-filter-pop-up",6),c(),y(11,"div",7),c(),X(12,8),l(13,"e-table",9),P("checkedStatusChange",function(_){return x(s),v(o.checkedStatusChange(_))})("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(14,Ps,2,1,"div",10)(15,ys,3,3,"div",10)(16,Os,5,3,"div",10),c(),Z(),l(17,"footer")(18,"sd-pagination",11),g(19,"translate"),g(20,"translate"),P("pageChange",function(_){return x(s),v(o.onPageChanging(_))}),c()()(),D(21,Ss,6,3,"ng-template",null,0,J)}if(t&2){let s=H(22);a(),h(C(2,20,"LOG_MANAGEMENT")),a(2),p("isLoading",o.isLoading),a(),p("formGroup",o.table.filterGroup),a(2),p("disabled",!(o.formGroup.controls.checkedIds.value!=null&&o.formGroup.controls.checkedIds.value.length)),a(2),h(C(9,22,"DELETE")),a(2),p("filterMenus",o.filterMenus)("datePickerDirection","right"),a(2),p("formGroup",o.formGroup),a(),p("data",o.table.getData())("displayedColumns",o.displayableColumns)("currentPageIndex",o.currentPageIndex)("emptyEl",s),a(),p("eTableCellFor","name"),a(),p("eTableCellFor","size"),a(),p("eTableCellFor","download"),a(2),p("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",o.table.getPageInfo().currentIndex+1)("prevLabel",C(19,24,"PREVIOUS"))("nextLabel",C(20,26,"NEXT"))}},styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}sd-card-loader[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}pu-icon[_ngcontent-%COMP%], .papycon[_ngcontent-%COMP%]{text-align:center}pu-icon.bt[_ngcontent-%COMP%], .papycon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #DADADA;border-radius:2px;height:62px;resize:none;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:solid 1px #DADADA;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.empty[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:flex;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:18px}.form-list-header[_ngcontent-%COMP%]   sd-filter-pop-up[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:solid 1.2px #C8C8C8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;box-sizing:border-box;display:flex;width:100%;overflow:auto}e-table[_ngcontent-%COMP%]     .column{flex:1}e-table[_ngcontent-%COMP%]     td{flex:1}e-table[_ngcontent-%COMP%]     td.download{flex:0 1 97px;margin-right:15px}e-table[_ngcontent-%COMP%]     th.name, e-table[_ngcontent-%COMP%]     td.name{font-size:14px;display:flex;white-space:nowrap;overflow:hidden}e-table[_ngcontent-%COMP%]     th.name>div, e-table[_ngcontent-%COMP%]     td.name>div{width:100%}e-table[_ngcontent-%COMP%]     .size{font-size:14px}e-table[_ngcontent-%COMP%]     .download{flex:0 1 97px;margin-right:15px}e-table[_ngcontent-%COMP%]     .download button i{margin-right:6px}footer[_ngcontent-%COMP%]{height:95px;display:flex;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}span.primary[_ngcontent-%COMP%]{color:#ff6100;text-decoration:underline}"],changeDetection:0}));let n=i;return n})();var ai=class{_usage=0;_total=0;get usage(){return this._usage}set usage(i){this._usage=parseFloat(i.toFixed(2))}get total(){return this._total}set total(i){this._total=parseFloat(i.toFixed(2))}getUsagePercent(){return parseFloat((this.usage/this.total*100).toFixed(2))}getUnusedPercent(){return parseFloat(((this.total-this.usage)/this.total*100).toFixed(2))}};var gi=(()=>{let i=class i{subs;changeDetectorRef;statisticDataService;translatePipe;bytesPipe;chartComponents;cpuUsage=new ai;memoryUsage=new ai;storageUsage=new ai;cpuCore="-";cpuChartConfig={type:"pie",data:{labels:[],datasets:[{data:[0,0]}]},options:{responsive:!1,plugins:{legend:{display:!1},tooltip:{padding:{x:16,y:14},bodySpacing:8,callbacks:{label:e=>this.appendPercentageToTooltip(e,e.dataset),title:()=>""}}}}};memoryChartConfig={type:"pie",data:{labels:[],datasets:[{data:[0,0],backgroundColor:["#FF6100","#DADADA"]}]},options:{responsive:!1,plugins:{legend:{display:!1},tooltip:{padding:{x:16,y:14},bodySpacing:8,callbacks:{label:e=>this.appendDataToTooltip(e,e.dataset,this.memoryUsage),title:()=>""}}}}};storageChartConfig={type:"pie",data:{labels:[],datasets:[{data:[0,0],backgroundColor:["#0C7489","#DADADA"]}]},options:{responsive:!1,plugins:{legend:{display:!1},tooltip:{padding:{x:16,y:14},bodySpacing:8,callbacks:{label:e=>this.appendDataToTooltip(e,e.dataset,this.storageUsage),title:()=>""}}}}};constructor(e,t,o,s,d){this.subs=e,this.changeDetectorRef=t,this.statisticDataService=o,this.translatePipe=s,this.bytesPipe=d}ngOnInit(){this.initFields()}ngAfterViewInit(){this.extractCapacityInfoList()}extractCapacityInfoList(){this.subs.set("fetchServerSummary",$t(5e3).pipe(Ht(0)).subscribe({next:()=>{this.statisticDataService.getServerSummaryList().subscribe({next:e=>{this.setCpuData(e),this.setMemoryData(e),this.setStorageData(e),this.changeDetectorRef.markForCheck()}})}}))}setCpuData(e){this.cpuUsage.total=100,this.cpuUsage.usage=parseFloat(parseFloat(e.cpuUsage).toFixed(2))*100,this.cpuCore=e.cpuTotalCores,this.cpuChartConfig.data.datasets[0].data=[this.cpuUsage.usage,this.cpuUsage.total-this.cpuUsage.usage],this.chartComponents.toArray()[0].update()}setMemoryData(e){this.memoryUsage.total=parseFloat(parseFloat(e.memTotal).toFixed(2)),this.memoryUsage.usage=this.memoryUsage.total*parseFloat(e.memUsage),this.memoryChartConfig.data.datasets[0].data=[this.memoryUsage.getUsagePercent(),this.memoryUsage.getUnusedPercent()],this.chartComponents.toArray()[1].update()}setStorageData(e){this.storageUsage.total=parseFloat(e.diskTotal)*1e3*1e3*1e3,this.storageUsage.usage=this.storageUsage.total*parseFloat(e.diskUsage),this.storageChartConfig.data.datasets[0].data=[this.storageUsage.getUsagePercent(),this.storageUsage.getUnusedPercent()],this.chartComponents.toArray()[2].update()}initFields(){this.cpuChartConfig.data.labels=[this.translatePipe.transform("USAGE"),this.translatePipe.transform("NOT_USED")],this.memoryChartConfig.data.labels=[this.translatePipe.transform("USAGE"),this.translatePipe.transform("NOT_USED")],this.storageChartConfig.data.labels=[this.translatePipe.transform("USAGE"),this.translatePipe.transform("NOT_USED")],this.changeDetectorRef.markForCheck()}appendPercentageToTooltip(e,t){let o=t.data,s=e.label,d=o[e.dataIndex];return`${s}: ${d}%`}appendDataToTooltip(e,t,o){let s=t.data,d=e.label,_=s[e.dataIndex],O=o.usage,w=o.total-o.usage;return d===this.translatePipe.transform("NOT_USED")?`${d}: ${this.bytesPipe.transform(w)} (${_}%)`:`${d}: ${this.bytesPipe.transform(O)} (${_}%)`}};m(i,"\u0275fac",function(t){return new(t||i)(u(S),u(L),u(Re),u(M),u(he))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-server-capacity"]],viewQuery:function(t,o){if(t&1&&ze(Mt,5),t&2){let s;je(s=$e())&&(o.chartComponents=s)}},standalone:!1,features:[k([S,he])],decls:59,vars:56,consts:[[1,"card-container"],[3,"title"],[3,"visibleBackground","config"],[1,"data"],[1,"highlight"],[1,"split"]],template:function(t,o){t&1&&(l(0,"div",0)(1,"sd-card",1),g(2,"translate"),y(3,"sd-chart",2),l(4,"article")(5,"div",3)(6,"span",4),f(7),g(8,"number"),c(),l(9,"p"),f(10),g(11,"translate"),g(12,"number"),c()(),y(13,"div",5),l(14,"div",3)(15,"span"),f(16),c(),l(17,"p"),f(18),g(19,"translate"),c()()()(),l(20,"sd-card",1),g(21,"translate"),y(22,"sd-chart",2),l(23,"article")(24,"div",3)(25,"span",4),f(26),g(27,"bytes"),c(),l(28,"p"),f(29),g(30,"translate"),g(31,"number"),c()(),y(32,"div",5),l(33,"div",3)(34,"span"),f(35),g(36,"bytes"),c(),l(37,"p"),f(38),g(39,"translate"),c()()()(),l(40,"sd-card",1),g(41,"translate"),y(42,"sd-chart",2),l(43,"article")(44,"div",3)(45,"span",4),f(46),g(47,"bytes"),c(),l(48,"p"),f(49),g(50,"translate"),c()(),y(51,"div",5),l(52,"div",3)(53,"span"),f(54),g(55,"bytes"),c(),l(56,"p"),f(57),g(58,"translate"),c()()()()()),t&2&&(a(),p("title",C(2,24,"CPU_USAGE")),a(2),p("visibleBackground",!0)("config",o.cpuChartConfig),a(4),ft("",C(8,26,o.cpuUsage.usage),"%"),a(3),Ft("",C(11,28,"USAGE")," : ",C(12,30,o.cpuUsage.usage),"%"),a(6),ft("",o.cpuCore," Core"),a(2),h(C(19,32,"TOTAL_CORE")),a(2),p("title",C(21,34,"MEMORY_USAGE")),a(2),p("visibleBackground",!0)("config",o.memoryChartConfig),a(4),h(C(27,36,o.memoryUsage.usage)),a(3),Ft("",C(30,38,"USAGE")," : ",C(31,40,o.memoryUsage.getUsagePercent()),"%"),a(6),h(C(36,42,o.memoryUsage.total)),a(3),h(C(39,44,"TOTAL_MEMORY")),a(2),p("title",C(41,46,"STORAGE")),a(2),p("visibleBackground",!0)("config",o.storageChartConfig),a(4),h(C(47,48,o.storageUsage.usage)),a(3),Ft("",C(50,50,"USAGE")," : ",o.storageUsage.getUsagePercent(),"%"),a(5),h(C(55,52,o.storageUsage.total)),a(3),h(C(58,54,"TOTAL_DISK")))},styles:[".card-container[_ngcontent-%COMP%]{display:flex;width:100%;height:437px}sd-card[_ngcontent-%COMP%]   sd-chart[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px 0}article[_ngcontent-%COMP%]{display:flex;justify-content:center}article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;font-size:13px;line-height:normal;letter-spacing:-.5px;margin-top:6px}article[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Bold,sans-serif;color:#6c6c6c;height:20px;font-size:20px;line-height:20px}article[_ngcontent-%COMP%]   span.highlight[_ngcontent-%COMP%]{color:#ff6100}.split[_ngcontent-%COMP%]{width:1px;height:20px;margin:0 35px;background-color:#c8c8c8}"],changeDetection:0}));let n=i;return n})();var an=(()=>{let i=class i{changeDetectorRef;subs;statisticDataService;translatePipe;chartService;chartConfig={type:"line",data:{labels:[],datasets:[{data:[],label:"",fill:"#ffffff",borderColor:"#f79f1a",backgroundColor:"#ffffff"},{data:[],label:"",fill:"#ffffff",borderColor:"#ff6600",backgroundColor:"#ffffff"},{data:[],label:"",fill:"#ffffff",borderColor:"#0C7489",backgroundColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,fill:!1}},scales:{x:{ticks:{callback:(e,t,o)=>{let s,d=this.chartConfig.data.labels;if(d===void 0)throw new He("Chart labels are undefined.");let[_,O,w]=d[e].split(" "),A=t===0||t===o.length-1;return this.chartDateType===3?s=`${A?_:""} ${O}`:s=`${A?O:""} ${w}`,s}}},y:{min:0,beginAtZero:!1,ticks:{stepSize:20,callback:e=>e===0?`${e}\uAC74`:e}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,padding:{x:16,y:14},bodySpacing:8,callbacks:{labelColor:e=>({backgroundColor:this.chartConfig.data.datasets[e.datasetIndex].borderColor}),title:()=>""}}}}};dateInfo;chartDateType=1;chartDate={startDate:new Date,endDate:new Date};constructor(e,t,o,s,d){this.changeDetectorRef=e,this.subs=t,this.statisticDataService=o,this.translatePipe=s,this.chartService=d}ngOnInit(){this.changeDateType(this.chartDateType),this.initFields()}changeDateType(e){this.chartDateType=e;let t;this.chartDateType===4&&(t=this.chartDate.endDate),this.dateInfo=U.getPeriod(e,this.chartDate.startDate,t),this.getAccessorChart(e,this.dateInfo)}changeDate(e){this.chartDate.startDate=e.startDate,this.chartDate.endDate=e.endDate,this.changeDateType(4)}getAccessorChart(e,t){let o;e!==3?o=De.DAILY:o=De.MONTHLY,this.subs.push(this.statisticDataService.getSystemUsage(t?.startDate.getTime(),t?.endDate.getTime(),o).subscribe({next:s=>{this.initChartDate(),this.chartConfig.data.labels=[],this.chartConfig.data.datasets[0].data=[],this.chartConfig.data.datasets[1].data=[],this.chartConfig.data.datasets[2].data=[],s.forEach(d=>{let _=`${this.makeTwoDigits(d.year)}${this.translatePipe.transform("YEAR")}`,O=`${this.makeTwoDigits(d.month)}${this.translatePipe.transform("MONTH")}`,w=`${this.makeTwoDigits(d.date)}${this.translatePipe.transform("DAYS")}`,A=`${_} ${O} ${w}`;this.chartConfig.data.labels.push(A),this.chartConfig.data.datasets[0].data.push(parseInt(d.cpuUsage)),this.chartConfig.data.datasets[1].data.push(parseInt(d.ramUsage)),this.chartConfig.data.datasets[2].data.push(parseInt(d.storageUsage))}),this.changeDetectorRef.markForCheck(),this.chartService.chartUpdate()}}))}initChartDate(){this.chartDate.startDate=new Date,this.chartDate.endDate=new Date}makeTwoDigits(e){return`0${e}`.slice(-2)}initFields(){this.chartConfig.data.datasets[0].label=this.translatePipe.transform("CPU_USAGE"),this.chartConfig.data.datasets[1].label=this.translatePipe.transform("MEMORY_USAGE"),this.chartConfig.data.datasets[2].label=this.translatePipe.transform("STORAGE_USAGE"),this.changeDetectorRef.markForCheck()}};m(i,"\u0275fac",function(t){return new(t||i)(u(L),u(S),u(Re),u(M),u(ti))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-server-monitoring"]],standalone:!1,features:[k([S])],decls:7,vars:9,consts:[[3,"dateTypeChange","customDateChange","type","title","chartConfig","legendDate"]],template:function(t,o){t&1&&(l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"sd-card"),y(4,"sd-server-capacity"),l(5,"sd-statistic-card",0),g(6,"translate"),P("dateTypeChange",function(d){return o.changeDateType(d)})("customDateChange",function(d){return o.changeDate(d)}),c()()),t&2&&(a(),h(C(2,5,"SERVER_MONITORING")),a(4),p("type","monitor")("title",C(6,7,"HOURLY_USAGE"))("chartConfig",o.chartConfig)("legendDate",o.dateInfo))},styles:["[_nghost-%COMP%]{min-width:1120px}.card-container[_ngcontent-%COMP%]{display:flex}.split[_ngcontent-%COMP%]{margin:5px 25px 0}sd-card[_ngcontent-%COMP%]{padding:0}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{margin:20px 0 40px;display:flex;justify-content:center}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c6c6c;font-size:13px;line-height:22px}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Bold,sans-serif;color:#6c6c6c}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   span.highlight[_ngcontent-%COMP%]{color:#ff6100}sd-server-capacity[_ngcontent-%COMP%]{margin:20px 0}sd-statistic-card[_ngcontent-%COMP%]    >sd-card{padding:30px 24px}"]}));let n=i;return n})();var sn=(()=>{let i=class i{baseHref;httpClient;constructor(e,t){this.baseHref=e,this.httpClient=t}getRemovedTempFileStatus(){return this.httpClient.get(`${this.baseHref}v4/remove`)}deleteTempFileRemove(e,t){let o=`${this.baseHref}v4/remove`;return this.httpClient.request("delete",o,{body:t,params:e,observe:"body",responseType:"arraybuffer"})}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();function Es(n,i){if(n&1&&(l(0,"div",12)(1,"div",13),f(2),g(3,"translate"),c()()),n&2){let r=b();z("expanded-content",r.warningPhrase.expanded),p("@children",r.warningPhrase.expanded?"expanded":"folded"),a(2),h(C(3,4,r.warningPhrase.description))}}function Ts(n,i){if(n&1){let r=T();l(0,"sd-date-picker",29),P("dateSelect",function(t){x(r);let o=b(4);return v(o.dateSelect(t))}),c()}if(n&2){let r=b(4);p("size",r.DatePickerSize)("autoClosing",!0)}}function Is(n,i){if(n&1){let r=T();l(0,"div",22),y(1,"pu-checkbox",23),g(2,"translate"),X(3),l(4,"div",24),P("click",function(){x(r);let t=b(3);return v(t.onDateInputClick())}),l(5,"span",25),f(6),c()(),D(7,Ts,1,2,"sd-date-picker",26),l(8,"div",27),P("click",function(){x(r);let t=b(3);return v(t.onDateInputClick())}),y(9,"i",28),c(),Z(),c()}if(n&2){let r=b(2).$implicit,e=b();a(),p("label",C(2,7,"DELETE_DOCUMENT_BEFORE_SET_DATE")),a(3),z("disabled",!r.formGroup.value.checked||!r.formGroup.value.isOption),a(2),h(e.dateInputText),a(),p("ngIf",e.isDatePickerVisible),a(),z("disabled",!r.formGroup.value.checked||!r.formGroup.value.isOption)}}function ws(n,i){if(n&1&&(l(0,"div",20)(1,"div",13),f(2),g(3,"translate"),c(),D(4,Is,10,9,"div",21),c()),n&2){let r=b().$implicit,e=b();z("expanded-content",r.formGroup.controls.expanded.value),p("@children",r.formGroup.controls.expanded.value?"expanded":"folded"),a(),z("content-padding",r.type!==e.TempFileType.DELETED_PDF),a(),h(C(3,7,r.description)),a(2),p("ngIf",r.type===e.TempFileType.DELETED_PDF)}}function Ns(n,i){if(n&1){let r=T();l(0,"article",14),X(1,15),l(2,"div",16),y(3,"pu-checkbox",17),l(4,"div",18),P("click",function(){let t=x(r).$implicit,o=b();return v(o.onMenuClick(t))}),l(5,"span"),f(6),g(7,"translate"),c(),y(8,"i",4),c()(),D(9,ws,5,9,"div",19),Z(),c()}if(n&2){let r=i.$implicit;a(),p("formGroup",r.formGroup),a(),z("expanded-header",r.formGroup.controls.expanded.value),a(4),h(C(7,6,r.title)),a(2),p("@chevron",r.formGroup.controls.expanded.value),a(),p("ngIf",r.formGroup.controls.expanded.value)}}var $=function(n){return n.CACHE="CACHE",n.EXPIRED_PDF="EXPIRED_PDF",n.TEMPORARY="TEMPORARY",n.DELETED_PDF="DELETED_PDF",n.ORPHAN="ORPHAN",n.SIGN_CACHE="SIGN_CACHE",n.UNASSOCIATED="UNASSOCIATED",n}($||{}),ir=function(n){return n.NONE="NONE",n.AWAITING="AWAITING",n.PROGRESSING="PROGRESSING",n.SUCCESS="SUCCESS",n.FAILURE="FAILURE",n}(ir||{}),ln=(()=>{let i=class i{translatePipe;datePickerService;systemManagementService;changeDetectorRef;toastService;subs;warningPhrase={title:"SYSTEM_MANAGEMENT_WARNING_PHRASE",description:"SYSTEM_MANAGEMENT_WARNING_PHRASE_DESCRIPTION",expanded:!1};tempFileMenus=[];isDatePickerVisible=!1;get TempFileType(){return $}get DatePickerSize(){return"TINY"}get dateInputText(){return U.formatDate(new Date(this.getControl($.DELETED_PDF,"date").value.value.type))}get hasSelectedMenu(){return this.tempFileMenus.some(e=>e.formGroup.getRawValue().checked)}get isSelectedAll(){return this.tempFileMenus.every(e=>e.formGroup.getRawValue().checked)}constructor(e,t,o,s,d,_){this.translatePipe=e,this.datePickerService=t,this.systemManagementService=o,this.changeDetectorRef=s,this.toastService=d,this.subs=_,this.tempFileMenus=[{type:$.CACHE,title:"CACHE",description:"SYSTEM_MANAGEMENT_CACHE_DESCRIPTION",formGroup:this.buildMenuControls($.CACHE)},{type:$.EXPIRED_PDF,title:"EXPIRED_DOCUMENT",description:"SYSTEM_MANAGEMENT_EXPIRED_DOCUMENT_DESCRIPTION",formGroup:this.buildMenuControls($.EXPIRED_PDF)},{type:$.TEMPORARY,title:"TEMPORARY_DOCUMENT",description:"SYSTEM_MANAGEMENT_TEMPORARY_DOCUMENT_DESCRIPTION",formGroup:this.buildMenuControls($.TEMPORARY)},{type:$.DELETED_PDF,title:"DELETED_DOCUMENT",description:"SYSTEM_MANAGEMENT_DELETED_DOCUMENT_DESCRIPTION",formGroup:this.buildMenuControls($.DELETED_PDF)},{type:$.ORPHAN,title:"PREVIOUS_VERSION_FILE",description:"SYSTEM_MANAGEMENT_PREVIOUS_VERSION_FILE_DESCRIPTION",formGroup:this.buildMenuControls($.ORPHAN)},{type:$.SIGN_CACHE,title:"SIGN_CACHE",description:"SYSTEM_MANAGEMENT_SIGN_CACHE_DESCRIPTION",formGroup:this.buildMenuControls($.SIGN_CACHE)},{type:$.UNASSOCIATED,title:"UNASSOCIATED_FILE",description:"SYSTEM_MANAGEMENT_UNASSOCIATED_FILE_DESCRIPTION",formGroup:this.buildMenuControls($.UNASSOCIATED)}]}ngOnInit(){this.subs.push(this.datePickerService.status$.pipe(G(e=>!e.isVisible)).subscribe({next:()=>{this.isDatePickerVisible=!1}}),this.systemManagementService.getRemovedTempFileStatus().subscribe({next:e=>this.updateTempFileStatus(e)}),this.getControl($.DELETED_PDF,"checked").valueChanges.subscribe({next:e=>{if(e){this.getControl($.DELETED_PDF,"isOption").enable();return}this.getControl($.DELETED_PDF,"isOption").disable()}}),this.getControl($.DELETED_PDF,"isOption").valueChanges.subscribe({next:e=>{if(e){this.getControl($.DELETED_PDF,"date").enable();return}this.getControl($.DELETED_PDF,"date").disable()}}))}getControl(e,t){return this.tempFileMenus.find(o=>o.type===e).formGroup.controls[t]}selectAll(){this.tempFileMenus.forEach(e=>e.formGroup.get("checked")?.setValue(!0))}deselectAll(){this.tempFileMenus.forEach(e=>e.formGroup.get("checked")?.setValue(!1))}removeTempFile(){this.subs.push(wn([...this.tempFileMenus.map(e=>{if(!e.formGroup.get("checked")?.value)return jt();let t={type:e.type},o={timestamp:""};if(e.type===$.DELETED_PDF&&e.formGroup.get("isOption")?.value){let s=this.getControl($.DELETED_PDF,"date").value.value.type;return o.timestamp=new Date(s).setHours(0,0,0,0).toString(),this.systemManagementService.deleteTempFileRemove(t,o)}return this.systemManagementService.deleteTempFileRemove(t)}),this.systemManagementService.getRemovedTempFileStatus()],In).pipe(Nn(),G(e=>!(e instanceof ArrayBuffer))).subscribe({next:e=>{this.updateTempFileStatus(e),this.toastService.create({icon:"success",content:this.translatePipe.transform("DELETE_REQUEST_SEND")})},error:()=>{this.toastService.create({icon:"failed",content:this.translatePipe.transform("DELETE_REQUEST_SEND_ERROR")})}}))}onMenuClick(e){if(this.isTempFileMenu(e)){let t=e.formGroup.controls.expanded;t?.setValue(!t.value);return}e.expanded=!e.expanded}isTempFileMenu(e){return po.hasDefinedProp(e,"formGroup")}onDateInputClick(){this.isDatePickerVisible||!this.getControl($.DELETED_PDF,"isOption").value||(this.isDatePickerVisible=!this.isDatePickerVisible)}dateSelect(e){this.getControl($.DELETED_PDF,"date").setValue({label:this.translatePipe.transform("DATE_INPUT"),value:{type:new Date(e).getTime()}})}updateTempFileStatus(e){this.tempFileMenus.forEach(t=>{if(!Object.keys(e).includes(t.type))return;t.formGroup.get("status")?.setValue(e[t.type].removeStatus)}),this.changeDetectorRef.markForCheck()}buildMenuControls(e){let t={status:new te(ir.NONE),checked:new te(!1),requester:new te(null),expanded:new te(!1),isOption:new te({value:!1,disabled:!0}),date:new te({label:this.translatePipe.transform("DATE_INPUT"),value:{type:new Date().getTime()}})};return e!==$.DELETED_PDF&&(delete t.isOption,delete t.date),new ci(t)}};m(i,"\u0275fac",function(t){return new(t||i)(u(M),u(ht),u(sn),u(L),u(Y),u(S))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-system-management"]],standalone:!1,features:[k([S])],decls:23,vars:18,consts:[[1,"warning-phrase"],[1,"warning-phrase-container"],[1,"warning-phrase-header-container",3,"click"],[1,"header"],[1,"papycon","papycon-chevron3-right","chevron"],["class","warning-phrase-content-container",3,"expanded-content",4,"ngIf"],[1,"button-container"],["size","small","color","primary",1,"ep-button",3,"click"],["size","small","color","grey",1,"ep-button",3,"click","disabled"],[1,"papycon","papycon-minus2"],[1,"menu"],["class","menu-container",4,"ngFor","ngForOf"],[1,"warning-phrase-content-container"],[1,"content"],[1,"menu-container"],[3,"formGroup"],[1,"menu-header-container"],["formControlName","checked","size","24px"],[1,"header",3,"click"],["class","menu-content-container",3,"expanded-content",4,"ngIf"],[1,"menu-content-container"],["class","menu-option",4,"ngIf"],[1,"menu-option"],["formControlName","isOption",3,"label"],[1,"expiry-date-input",3,"click"],[1,"date"],[3,"size","autoClosing","dateSelect",4,"ngIf"],[1,"icon-box",3,"click"],[1,"papycon","papycon-calendar"],[3,"dateSelect","size","autoClosing"]],template:function(t,o){t&1&&(l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"section",0)(4,"article",1)(5,"div",2),P("click",function(){return o.onMenuClick(o.warningPhrase)}),l(6,"div",3)(7,"span"),f(8),g(9,"translate"),c(),y(10,"i",4),c()(),D(11,Es,4,6,"div",5),c()(),l(12,"sd-card")(13,"article",6)(14,"button",7),P("click",function(){return o.isSelectedAll?o.deselectAll():o.selectAll()}),f(15),g(16,"translate"),c(),l(17,"button",8),P("click",function(){return o.removeTempFile()}),y(18,"i",9),f(19),g(20,"translate"),c()(),l(21,"section",10),D(22,Ns,10,8,"article",11),c()()),t&2&&(a(),h(C(2,10,"DELETE_TEMP_FILE")),a(4),z("expanded-header",o.warningPhrase.expanded),a(3),h(C(9,12,o.warningPhrase.title)),a(2),p("@chevron",o.warningPhrase.expanded),a(),p("ngIf",o.warningPhrase.expanded),a(4),h(C(16,14,o.isSelectedAll?"DESELECT_ALL":"SELECT_ALL")),a(2),p("disabled",!o.hasSelectedMenu),a(2),h(C(20,16,"DELETE")),a(3),p("ngForOf",o.tempFileMenus))},styles:["[_nghost-%COMP%]{min-width:1180px}.warning-phrase[_ngcontent-%COMP%]{border-radius:4px;background-color:#fff8ed}.warning-phrase-header-container[_ngcontent-%COMP%]{height:68px;box-sizing:border-box;padding:26px 54px 26px 24px;cursor:pointer}.warning-phrase-header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;color:#ff6100;width:100%;height:100%;font-size:16px;font-family:SourceHanSansKR}.warning-phrase-header-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.warning-phrase-content-container[_ngcontent-%COMP%]{font-size:16px;box-sizing:border-box;color:#ff6100;padding:0 24px 26px}.warning-phrase[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px;white-space:pre-wrap;font-family:NotoSansCJKkr}sd-card[_ngcontent-%COMP%]{margin-top:20px;padding:30px 24px;line-height:1;font-family:SourceHanSansKR}article.button-container[_ngcontent-%COMP%]{margin-bottom:17px}article.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:22px}article.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.menu-container[_ngcontent-%COMP%]{margin:0}.menu-header-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:60px;box-sizing:border-box;padding:2px 24px 0}.menu-header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;color:#1e1e1e;margin-left:32px;width:100%;height:100%;cursor:pointer;font-size:16px}.menu-header-container[_ngcontent-%COMP%]   pu-checkbox[_ngcontent-%COMP%]{width:24px;height:24px}.menu-header-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px;margin-right:8px}.menu-content-container[_ngcontent-%COMP%]{font-size:14px;padding-left:80px;box-sizing:border-box}.menu-content-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-top:8px;color:#6c6c6c}.menu-content-container[_ngcontent-%COMP%]   .menu-option[_ngcontent-%COMP%]{display:flex;align-items:center;height:50px;padding:10px 0;margin:8px 0;box-sizing:border-box;position:relative}.menu-content-container[_ngcontent-%COMP%]   sd-date-picker[_ngcontent-%COMP%]{z-index:1;top:44px;left:176px}.menu-container[_ngcontent-%COMP%]{border-bottom:1px solid #DADADA}.expiry-date-input[_ngcontent-%COMP%]{width:140px;height:30px;margin:0 8px;border-radius:2px;border:solid 1px #DADADA;display:flex;align-items:center;box-sizing:border-box;cursor:pointer}.expiry-date-input[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Regular;color:#6c6c6c;margin-left:10px}.icon-box[_ngcontent-%COMP%]{font-size:18px;cursor:pointer;display:flex;align-self:center;justify-content:center}.icon-box[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:20px}.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.content-padding[_ngcontent-%COMP%]{padding-bottom:14px}"],data:{animation:[pi.rotate("chevron","90"),pi.expandHiddenChildren("children")]},changeDetection:0}));let n=i;return n})();var cn=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[ri,sn],imports:[at,Ai,B,Ei,Ji,pt,nt,ue,Et,ot,Ot,we,ve,dt,st]}));let n=i;return n})();_e(on,[Pe,Be,q,Oe,le,Se,Me,Ke,Ye,We],[Le,M,Po,he]);_e(rn,[Pe,Be,q,Oe,Se,Me,Ke,Ye,We],[M,he]);_e(gi,[Pe,Mt],[M,he,mi]);_e(an,[Pe,di,gi],[M]);_e(ln,[Pe,Fe,de,Di,q,Oe,Qt,Se,Me],[M]);var pn=(()=>{let i=class i{baseHref;httpClient;get viewerStatisticUrl(){return`${this.baseHref}v4/collects`}viewerStatisticReadableKeyMap=Object.entries(Eo).filter(([e])=>Number.isNaN(Number(e))).reduce((e,t)=>K(W({},e),{[t[1]]:t[0]}),{});constructor(e,t){this.baseHref=e,this.httpClient=t}deleteViewerStatistic(){return this.httpClient.delete(this.viewerStatisticUrl,{headers:yn})}getViewerStatistic(){return this.httpClient.get(this.viewerStatisticUrl,{headers:yn}).pipe(ne(e=>this.formatViewerEvents(e)))}formatViewerEvents(e){let t={API:[],BROWSER:[],EVENT:[],OS:[],UI:[]};return e.sort((o,s)=>!Number.isNaN(Number(o.eventKey))&&!Number.isNaN(Number(s.eventKey))?Number(o.eventKey)-Number(s.eventKey):o.eventCount-s.eventCount),e.forEach(o=>{let s=o.eventKey.split(":"),d=Number.isNaN(Number(o.eventKey))?Vi[s[0]]:Vi.UI;if(!oe.isDefined(d)){console.warn("An undefined type has been provided.",o);return}t[d].push({eventKey:d===Vi.UI?this.viewerStatisticReadableKeyMap[o.eventKey]:s.slice(1).reduce((_,O)=>_+O,""),eventCount:o.eventCount})}),t}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var nr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[pn]}));let n=i;return n})();var dn=(()=>{let i=class i{viewerStatisticDataService;subscriptionService;toastService;translatePipe;modalService;constructor(e,t,o,s,d){this.viewerStatisticDataService=e,this.subscriptionService=t,this.toastService=o,this.translatePipe=s,this.modalService=d}onClickDownload(){this.subscriptionService.push(this.viewerStatisticDataService.getViewerStatistic().subscribe({next:e=>{let t=[];Object.values(ui).forEach(d=>{t.push({key:d,value:ii.get(d)})});let o=JSON.stringify({viewerStatistic:e,adminConfigs:t}),s=new Blob([o],{type:"application/json"});new Si().downloadBlob(s,"viewer-statistic.json")}}))}onClickReset(){this.modalService.createCommonModal({type:ki.WARN,confirmButton:!0,cancelButton:!0,content:this.translatePipe.transform("RESET_STATISTIC_BY_VIEWER")}).addOnDisposeListener(e=>{e&&this.subscriptionService.push(this.viewerStatisticDataService.deleteViewerStatistic().subscribe({next:()=>this.toastService.create({icon:"success",content:this.translatePipe.transform("DELETE_COMPLETE")}),error:()=>this.toastService.create({icon:"failed",content:this.translatePipe.transform("DELETE_REQUEST_SEND_ERROR")})}))})}};m(i,"\u0275fac",function(t){return new(t||i)(u(pn),u(S),u(Y),u(M),u(Tt))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-statistic-viewer"]],standalone:!1,features:[k([S])],decls:22,vars:15,consts:[[1,"container"],["color","primary",1,"ep-button","download",3,"click"],[1,"papycon","papycon-download"],["color","danger",1,"ep-button","reset",3,"click"],[1,"papycon","papycon-rotate-l"]],template:function(t,o){t&1&&(l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"div",0)(4,"section")(5,"span"),f(6),g(7,"translate"),c(),l(8,"button",1),P("click",function(){return o.onClickDownload()}),y(9,"i",2),l(10,"span"),f(11),g(12,"translate"),c()()(),l(13,"section")(14,"span"),f(15),g(16,"translate"),c(),l(17,"button",3),P("click",function(){return o.onClickReset()}),y(18,"i",4),l(19,"span"),f(20),g(21,"translate"),c()()()()),t&2&&(a(),h(C(2,5,"STATISTIC_BY_VIEWER")),a(5),h(C(7,7,"DOWNLOAD_STATISTIC_BY_VIEWER")),a(5),h(C(12,9,"DOWNLOAD_STATISTIC")),a(4),h(C(16,11,"RESET_STATISTIC_BY_VIEWER")),a(5),h(C(21,13,"RESET_STATISTIC")))},styles:[".container[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:58px 0;flex:1;min-width:400px;display:flex;flex-direction:column;gap:20px;align-items:center;background-color:#fff}.container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 14.5px 7px 12.5px}.container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%] + section[_ngcontent-%COMP%]{border-left:1px solid #DADADA}"]}));let n=i;return n})();var mn=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[Re],imports:[at,Ai,B,ue,Et,Zt,dt,cn,st,nr]}));let n=i;return n})();_e(Ki,[Fe],[M,mi]);_e(qi,[Pe,Mt,gi],[M]);_e(tn,[Pe,di,Pt,Fe,Wn,Ke,Ye,We],[Le,M,mi]);_e(nn,[di],[M]);_e(dn,[],[M]);var or=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B,mn]}));let n=i;return n})();var Ge=(()=>{let i=class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.sharedGetSession.pipe(qe(1),ne(e=>e?e.type===re.ADMIN||e.type===re.DOCUMENT_ADMIN?!0:this.router.parseUrl("view/admin/dashboard"):this.router.parseUrl("view/admin/login")))}};m(i,"\u0275fac",function(t){return new(t||i)(N(ge),N(me))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var Ce=(()=>{let i=class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(e){return this.authService.sharedGetSession.pipe(qe(1),ne(()=>!0),xt(()=>jt(this.router.parseUrl(`view/admin/login?redirectTo=${e.routeConfig?.path}`))))}};m(i,"\u0275fac",function(t){return new(t||i)(N(ge),N(me))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var un=(()=>{let i=class i{authService;dialogService;formBuilder;translatePipe;passwordFormGroup;constructor(e,t,o,s){this.authService=e,this.dialogService=t,this.formBuilder=o,this.translatePipe=s,this.passwordFormGroup=this.formBuilder.group({password:this.formBuilder.nonNullable.control("")})}canActivate(){return this.passwordFormGroup.controls.password.reset(""),this.dialogService.toggleDialogVisibility(V.CHECK_USER,!0,{title:this.translatePipe.transform("ACCOUNT_PAGE_PASSWORD_CHECK"),size:{width:452,height:282},formGroup:this.passwordFormGroup}),this.dialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.CHECK_USER),et(()=>this.authService.postCheckPassword(this.passwordFormGroup.controls.password.value)),xt(e=>{throw this.passwordFormGroup.get("password")?.setErrors({invalid:!0}),e}),ut(()=>this.dialogService.closeCurrentActiveDialog()),ne(()=>!0),Rn())}};m(i,"\u0275fac",function(t){return new(t||i)(N(ge),N(Ie),N(xe),N(M))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var fn=(()=>{let i=class i{router;constructor(e){this.router=e}canActivate(){return Ve.activateInvisibleTracer||this.router.parseUrl("view/admin/dashboard")}};m(i,"\u0275fac",function(t){return new(t||i)(N(me))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var gn=(()=>{let i=class i{authService;router;constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.sharedGetSession.pipe(qe(1),ne(()=>this.router.parseUrl("view/admin/dashboard")),xt(()=>jt(!0)))}};m(i,"\u0275fac",function(t){return new(t||i)(N(ge),N(me))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var rr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[Ge,Ce,un,fn,gn],imports:[B]}));let n=i;return n})();var Dn=function(n){return n.DEMO="DEMO",n.REGULAR="REGULAR",n}(Dn||{}),hn=(()=>{let i=class i{baseHref;httpClient;constructor(e,t){this.baseHref=e,this.httpClient=t}getLicenseInfo(){let e=`${this.baseHref}v4/license/info`;return this.httpClient.post(e,{observe:"response",responseType:"json"})}postLicense(e){let t=`${this.baseHref}v4/license/register`;return this.httpClient.post(t,{license:e})}deleteLicense(){let e=`${this.baseHref}v4/license/deactive`;return this.httpClient.post(e,{observe:"response",responseType:"json"})}};m(i,"\u0275fac",function(t){return new(t||i)(N(se),N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();function Us(n,i){if(n&1){let r=T();l(0,"button",7),P("click",function(){x(r);let t=b();return v(t.openDestroyLicenseDialog())}),f(1),g(2,"translate"),c()}n&2&&(a(),h(C(2,1,"LICENSE_DESTROY")))}function Vs(n,i){if(n&1){let r=T();l(0,"div",8)(1,"span",2),f(2),g(3,"translate"),c(),y(4,"pu-input",9),g(5,"translate"),l(6,"button",10),P("click",function(){x(r);let t=b();return v(t.registerLicense())}),f(7),g(8,"translate"),c()()}if(n&2){let r=b();a(2),h(C(3,5,"LICENSE_KEY")),a(2),p("placeholder",C(5,7,"LICENSE_INPUT_PLACEHOLDER"))("formControl",r.licenseKeyInputFormControl),a(2),p("disabled",!r.licenseKeyInputFormControl.value),a(),h(C(8,9,"REGISTER"))}}function Bs(n,i){if(n&1){let r=T();l(0,"div",11)(1,"span",2),f(2),g(3,"translate"),c(),l(4,"div",12)(5,"span"),f(6),c(),l(7,"i",13),P("click",function(){x(r);let t=b();return v(t.copyToken(t.licenseInfo==null?null:t.licenseInfo.register))}),c(),l(8,"i",14),P("click",function(){x(r);let t=b();return v(t.downloadToken(t.licenseInfo==null?null:t.licenseInfo.register,"streamdocs-license-issue-token"))}),c()()()}if(n&2){let r=b();a(2),h(C(3,4,"REGISTER_TOKEN")),a(3),z("error",r.registerTokenInputFormControl.getError("fail")),a(),h(r.registerTokenInputFormControl.value)}}function Gs(n,i){if(n&1){let r=T();l(0,"div",8)(1,"span",2),f(2),g(3,"translate"),c(),l(4,"div",12)(5,"span"),f(6),c(),l(7,"i",13),P("click",function(){x(r);let t=b();return v(t.copyToken(t.licenseInfo==null?null:t.licenseInfo.deactivate))}),c(),l(8,"i",14),P("click",function(){x(r);let t=b();return v(t.downloadToken(t.licenseInfo==null?null:t.licenseInfo.deactivate,"streamdocs-license-deregistration-code"))}),c()()()}if(n&2){let r=b();a(2),h(C(3,2,"DEACTIVATE_CODE")),a(4),h(r.destroyTokenInputFormControl.value)}}var ar=(()=>{let i=class i{licenseService;toastService;changeDetectorRef;adminDialogService;subscription;translatePipe;registerTokenInputFormControl=new te("",{nonNullable:!0});destroyTokenInputFormControl=new te("",{nonNullable:!0});licenseKeyInputFormControl=new te("",{nonNullable:!0});licenseInfo;isLoading=!0;Status=Dn;get licenseStatusText(){if(!this.licenseInfo)return"";if(!this.licenseInfo.tier)return this.translatePipe.transform("FAIL_TO_FETCH_LICENSE");let e=this.licenseInfo.deactivate?`(${this.translatePipe.transform("DESTROYED")})`:"";return`${this.translatePipe.transform(this.licenseInfo.tier)} ${e}`}constructor(e,t,o,s,d,_){this.licenseService=e,this.toastService=t,this.changeDetectorRef=o,this.adminDialogService=s,this.subscription=d,this.translatePipe=_}ngOnInit(){this.getLicenseInfo(),this.subscribe()}subscribe(){this.subscription.push(this.adminDialogService.dialogEvent$.pipe(G(e=>e.action==="confirm"&&e.dialogType===V.ASK_BEFORE_DESTROY_LICENSE)).subscribe({next:()=>{this.adminDialogService.closeCurrentActiveDialog(),this.destroyLicense()}}))}openDestroyLicenseDialog(){this.adminDialogService.toggleDialogVisibility(V.ASK_BEFORE_DESTROY_LICENSE,!0,{size:{width:336,height:280}})}registerLicense(){this.licenseKeyInputFormControl.value&&(this.isLoading=!0,this.licenseService.postLicense(this.licenseKeyInputFormControl.value).pipe(mt(()=>{this.isLoading=!1,this.changeDetectorRef.markForCheck()})).subscribe({next:()=>{this.toastService.create({content:this.translatePipe.transform("SUCCEED_TO_REGISTER_LICENSE"),icon:"success"}),this.getLicenseInfo(),this.licenseKeyInputFormControl.reset(),this.changeDetectorRef.markForCheck()},error:()=>{this.toastService.create({content:this.translatePipe.transform("FAILED_TO_ADD_LICENSE"),icon:"success"})}}))}destroyLicense(){this.licenseService.deleteLicense().subscribe({next:()=>{this.toastService.create({content:this.translatePipe.transform("SUCCEED_TO_DESTROY_LICENSE"),icon:"success"}),this.getLicenseInfo()}})}copyToken(e){Jt.copyToClipboard(e),this.toastService.create({icon:"success",content:this.translatePipe.transform("COPY_TOKEN")})}downloadToken(e,t){let o=new Blob([e],{type:"octet/stream;"});new Si().downloadBlob(o,t)}getLicenseInfo(){this.licenseService.getLicenseInfo().pipe(mt(()=>{this.isLoading=!1,this.changeDetectorRef.markForCheck()})).subscribe({next:e=>{this.licenseInfo=e,e.register&&this.registerTokenInputFormControl.setValue(e.register),e.deactivate&&this.destroyTokenInputFormControl.setValue(e.deactivate)},error:()=>{let e=this.translatePipe.transform("FETCH_TOKEN_ERROR");this.registerTokenInputFormControl.setValue(e),this.registerTokenInputFormControl.setErrors({fail:!0})}})}};m(i,"\u0275fac",function(t){return new(t||i)(u(hn),u(Y),u(L),u(Ie),u(S),u(M))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-license"]],standalone:!1,features:[k([S])],decls:15,vars:14,consts:[[3,"isLoading"],[1,"row","status"],[1,"label"],[1,"license-status"],["class","ep-button","size","tiny","color","danger",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","row register",4,"ngIf"],["size","tiny","color","danger",1,"ep-button",3,"click"],[1,"row"],["size","tiny",1,"register-input",3,"placeholder","formControl"],["size","tiny","color","white",1,"ep-button",3,"click","disabled"],[1,"row","register"],[1,"token"],[1,"papycon","papycon-copy",3,"click"],[1,"papycon","papycon-download",3,"click"]],template:function(t,o){t&1&&(l(0,"h1"),f(1),g(2,"translate"),c(),l(3,"div")(4,"sd-card",0)(5,"div",1)(6,"span",2),f(7),g(8,"translate"),c(),l(9,"span",3),f(10),c(),D(11,Us,3,3,"button",4),c(),D(12,Vs,9,11,"div",5)(13,Bs,9,6,"div",6)(14,Gs,9,4,"div",5),c()()),t&2&&(a(),h(C(2,10,"LICENSE_MANAGEMENT")),a(3),p("isLoading",o.isLoading),a(3),h(C(8,12,"LICENSE_STATUS")),a(2),z("error",!(o.licenseInfo!=null&&o.licenseInfo.tier)),a(),h(o.licenseStatusText),a(),p("ngIf",(o.licenseInfo==null?null:o.licenseInfo.tier)===o.Status.REGULAR),a(),p("ngIf",(o.licenseInfo==null?null:o.licenseInfo.tier)===o.Status.DEMO),a(),p("ngIf",(o.licenseInfo==null?null:o.licenseInfo.tier)===o.Status.DEMO),a(),p("ngIf",o.licenseInfo==null?null:o.licenseInfo.deactivate))},dependencies:[Pe,de,le,q,qt,M],styles:["[_nghost-%COMP%]{min-width:814px}sd-card[_ngcontent-%COMP%]{max-width:754px;min-height:200px;padding:30px}.row[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:64px}.row[_ngcontent-%COMP%]:not(.status):not(.license){border-top:1px solid #DADADA}.border[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#dadada}.label[_ngcontent-%COMP%]{flex:0 0 100px;font-family:NotoSans-Medium;font-size:14px;height:14px;line-height:14px;font-weight:500;color:#6c6c6c}.license-status[_ngcontent-%COMP%]{font-family:NotoSans-Medium;font-size:14px;height:14px;line-height:14px;font-weight:500;letter-spacing:-.5px;color:#1e1e1e}.license-status.error[_ngcontent-%COMP%]{color:#e4002b;font-size:14px;margin-left:4px}.token[_ngcontent-%COMP%]{font-family:Consolas,Monaco,DejaVu Sans Mono,sans-serif;font-size:14px;height:14px;line-height:14px;font-weight:500;letter-spacing:-.5px;color:#1e1e1e;position:relative}.token[_ngcontent-%COMP%]   .papycon-copy[_ngcontent-%COMP%], .token[_ngcontent-%COMP%]   .papycon-download[_ngcontent-%COMP%]{color:#363636;font-size:16px;margin-left:14px;cursor:pointer}.token[_ngcontent-%COMP%]   .papycon-copy[_ngcontent-%COMP%]:hover, .token[_ngcontent-%COMP%]   .papycon-download[_ngcontent-%COMP%]:hover{color:#f79f1a}.token[_ngcontent-%COMP%]   .papycon-copy.error[_ngcontent-%COMP%], .token[_ngcontent-%COMP%]   .papycon-download.error[_ngcontent-%COMP%]{color:#e4002b;font-size:14px;margin-left:4px}.register-input[_ngcontent-%COMP%]{width:250px}button[_ngcontent-%COMP%]{margin-left:20px}"],changeDetection:0}));let n=i;return n})();var sr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[hn],imports:[at,B,ue,we,ve]}));let n=i;return n})();var lr=(()=>{let i=class i{subs;authService;toastService;router;activatedRoute;translatePipe;formBuilder;productService;EMAIL_ITEM_KEY="userEmail";formGroup;get currentYear(){return new Date().getFullYear()}get logoUrl(){return this.productService.loginLogo}get description(){return this.productService.text}constructor(e,t,o,s,d,_,O,w){this.subs=e,this.authService=t,this.toastService=o,this.router=s,this.activatedRoute=d,this.translatePipe=_,this.formBuilder=O,this.productService=w,this.formGroup=this.formBuilder.group({email:this.formBuilder.nonNullable.control(""),password:this.formBuilder.nonNullable.control(""),checkbox:this.formBuilder.nonNullable.control(!1)})}ngOnInit(){this.setEmailFromStorage(),this.initSubscriptions()}login(){this.subs.set("login",this.authService.login(this.formGroup.getRawValue().email,this.formGroup.getRawValue().password).pipe(et(()=>this.authService.sharedGetSession)).subscribe({next:e=>{let t=new Date(Number(e.passwordChangedAt));t.setDate(t.getDate()+Number(Ve.password.lifeSpan)),new Date().getTime()>t.getTime()&&this.toastService.create({icon:"padlock2",content:this.translatePipe.transform("NEED_TO_CHANGE_PASSWORD",Ve.password.lifeSpan)}),this.activatedRoute.queryParams.subscribe({next:({redirectTo:o})=>{this.router.navigate([o??"dashboard"],{relativeTo:this.activatedRoute.parent})},error:()=>{this.router.navigate(["dashboard"],{relativeTo:this.activatedRoute.parent})}})},error:e=>{e.status===It.Unauthorized?this.toastService.create({icon:"failed",content:this.translatePipe.transform("LOGIN_FAILURE_ACCOUNT_ERROR")}):e.message&&e.message===ho.UNAUTHORIZED?this.toastService.create({icon:"failed",content:this.translatePipe.transform("LOGIN_ERROR_UNAUTHORIZED")}):this.toastService.create({icon:"failed",content:this.translatePipe.transform("LOGIN_FAILURE")})}}))}initSubscriptions(){this.subs.push(this.formGroup.controls.checkbox.valueChanges.subscribe({next:e=>{e?this.setStorageItem(this.EMAIL_ITEM_KEY,this.formGroup.controls.email.value):this.removeStorageItem(this.EMAIL_ITEM_KEY)}}),this.formGroup.controls.email.valueChanges.subscribe({next:e=>{this.formGroup.controls.checkbox.value&&this.setStorageItem(this.EMAIL_ITEM_KEY,e)}}))}setEmailFromStorage(){this.getStorageItem(this.EMAIL_ITEM_KEY)&&(this.formGroup.controls.checkbox.setValue(!0),this.formGroup.controls.email.setValue(this.getStorageItem(this.EMAIL_ITEM_KEY)))}getStorageItem(e){return window.localStorage.getItem(e)||""}setStorageItem(e,t){window.localStorage.setItem(e,t)}removeStorageItem(e){window.localStorage.removeItem(e)}};m(i,"\u0275fac",function(t){return new(t||i)(u(S),u(ge),u(Y),u(me),u(Wt),u(M),u(xe),u(Dt))}),m(i,"\u0275cmp",I({type:i,selectors:[["e-login"]],standalone:!1,features:[k([S])],decls:24,vars:20,consts:[[1,"login-container"],[1,"login-form",3,"formGroup"],[1,"header"],[1,"logo",3,"src"],[1,"title"],["formControlName","email","size","small",3,"placeholder","autofocus"],["formControlName","password","size","small","type","password",3,"placeholder"],["size","small","color","primary",1,"ep-button",3,"click"],[1,"tools"],["formControlName","checkbox",3,"label"],[1,"copy-right"],[1,"text-container"],[1,"admin-text"]],template:function(t,o){t&1&&(l(0,"section",0)(1,"form",1)(2,"div",2),y(3,"img",3),c(),l(4,"span",4),f(5),g(6,"translate"),c(),y(7,"pu-input",5),g(8,"translate"),y(9,"pu-input",6),g(10,"translate"),l(11,"button",7),P("click",function(){return o.login()}),f(12),g(13,"translate"),c(),l(14,"div",8),y(15,"pu-checkbox",9),g(16,"translate"),c()(),l(17,"span",10),f(18),c()(),l(19,"div",11)(20,"span",12),f(21,"PDF Streaming Server,"),y(22,"br"),f(23),c()()),t&2&&(a(),p("formGroup",o.formGroup),a(2),p("src",o.logoUrl,_i),a(2),h(C(6,10,"LOGIN")),a(2),p("placeholder",C(8,12,"E_MAIL"))("autofocus",!0),a(2),p("placeholder",C(10,14,"INPUT_PASSWORD")),a(3),h(C(13,16,"LOGIN")),a(3),p("label",C(16,18,"SAVE_E_MAIL")),a(3),ft("\xA92004\u2013",o.currentYear," ePapyrus Inc.\xA0\xA0All rights reserved."),a(5),h(o.description))},dependencies:[Qt,le,oo,q,Oe,Se,Me,M],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex:1;position:fixed;top:0;background-color:#f7f1e8;background-size:contain;background-position:right;background-repeat:no-repeat}.text-container[_ngcontent-%COMP%]{flex:1 1 0;margin-top:calc(88vh - 12px);margin-left:116px}.text-container[_ngcontent-%COMP%]   span.admin-text[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:12px;line-height:20px;color:#1e1e1e}.header[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:168px;height:29px;vertical-align:bottom}.login-container[_ngcontent-%COMP%]{background-color:#fff;flex:0 0 610px;padding-top:185px;display:flex;flex-direction:column;justify-content:center;align-items:center}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:338px;height:518px;margin-left:15px}.login-form[_ngcontent-%COMP%]   span.title[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:16px;line-height:26px;color:#1e1e1e;margin:24px 0}.login-form[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{margin-top:22px}span.copy-right[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;font-size:12px;line-height:20px;color:#6c6c6c;width:338px;padding-left:18px}"],changeDetection:0}));let n=i;return n})();var cr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B,ue,ot,we,ve]}));let n=i;return n})();var kt=(()=>{let i=class i{httpClient;confirmButtonSrc=new Tn;confirmButton$=this.confirmButtonSrc.asObservable();constructor(e){this.httpClient=e}getInvisibleTracerList(e){return this.httpClient.get("v4/tracer/search",{params:this.makeHttpParams(e)}).pipe(ne(o=>K(W({},o),{resources:o.resources.map(s=>{let d=JSON.parse(s.data);return K(W({},s),{ip:d.ip,agent:d.agent,data:JSON.stringify(d,null,4)})})})))}makeHttpParams(e){let t=new Ue;return Object.keys(e).filter(o=>e[o]!==void 0).forEach(o=>{t=t.set(o,String(e[o]))}),t}publishConfirmButtonClick(){this.confirmButtonSrc.next()}};m(i,"\u0275fac",function(t){return new(t||i)(N(be))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var zs=n=>({content:n,className:"with-icon"});function js(n,i){if(n&1){let r=T();l(0,"button",16),P("click",function(){let t=x(r).$implicit,o=b();return v(o.transparencyChanges(t))}),f(1),g(2,"translate"),c()}if(n&2){let r=i.$implicit,e=b();z("active",(e.currentTransparencyPreset==null?null:e.currentTransparencyPreset.keyword)===(r==null?null:r.keyword))("disabled",!e.toggleButton.value),p("disabled",!e.toggleButton.value),a(),h(C(2,6,r.keyword))}}var pr=(()=>{let i=class i{invisibleTracerService;configsService;toastService;translatePipe;subs;toggleButton=new te;transparencyPresets=[{keyword:Ri.BLURRED,value:Gi[Bi.BLURRED].view},{keyword:Ri.STANDARD,value:Gi[Bi.STANDARD].view},{keyword:Ri.BOLD,value:Gi[Bi.BOLD].view}];currentTransparencyPreset;get invisibleTracerImageStyle(){return{opacity:this.currentTransparencyPreset?.value.toString()||"0"}}constructor(e,t,o,s,d){this.invisibleTracerService=e,this.configsService=t,this.toastService=o,this.translatePipe=s,this.subs=d}ngOnInit(){this.initForms(),this.initSubscriptions()}initSubscriptions(){this.subs.push(this.invisibleTracerService.confirmButton$.subscribe({next:()=>{ii.set(ui.INVISIBLE_TRACER,{enable:this.toggleButton.value,opacity:this.currentTransparencyPreset.keyword});let e=ii.entries().map(t=>({key:t.key,value:JSON.stringify(t.value)}));this.configsService.postViewConfig(e).subscribe({next:()=>{this.toastService.create({icon:"success",content:this.translatePipe.transform("CHANGES_SAVED")})}})}}))}initForms(){let e=ii.get(ui.INVISIBLE_TRACER);this.toggleButton.setValue(e.enable),this.currentTransparencyPreset=this.transparencyPresets.find(t=>t.keyword===e.opacity)}transparencyChanges(e){this.currentTransparencyPreset=e}};m(i,"\u0275fac",function(t){return new(t||i)(u(kt),u(wo),u(Y),u(M),u(S))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-invisible-tracer-configs"]],standalone:!1,features:[k([S])],decls:27,vars:22,consts:[[1,"config-global"],[1,"config-global-item"],[1,"config-global-item-title"],[1,"config-global-item-box"],[1,"config-global-item-content"],[3,"formControl"],[1,"config-view"],[1,"config-preview"],[1,"a4-paper"],[1,"preview-watermark","sample-document-image"],[1,"preview-watermark","sample-invisible-tracer-image",3,"ngStyle"],[1,"config-panel"],[1,"config-panel-item","text"],[1,"papycon","papycon-questionmark",3,"tooltip"],[1,"text-button-container"],["size","tiny","color","white","class","ep-button transparency-preset",3,"active","disabled","click",4,"ngFor","ngForOf"],["size","tiny","color","white",1,"ep-button","transparency-preset",3,"click","disabled"]],template:function(t,o){t&1&&(l(0,"section",0)(1,"div",1)(2,"span",2),f(3),g(4,"translate"),c(),l(5,"div",3)(6,"span",4),f(7),g(8,"translate"),c(),y(9,"pu-toggle-button",5),c()()(),l(10,"section",6)(11,"section",7)(12,"div",8),y(13,"div",9)(14,"div",10),c()(),l(15,"section",11)(16,"h2"),f(17),g(18,"translate"),c(),l(19,"div",12)(20,"h3"),f(21),g(22,"translate"),y(23,"i",13),g(24,"translate"),c(),l(25,"section",14),D(26,js,3,8,"button",15),c()()()()),t&2&&(a(3),h(C(4,10,"INVISIBLE_TRACER_ENABLED")),a(4),h(C(8,12,"INVISIBLE_TRACER_ENABLED_DESCRIPTION")),a(2),p("formControl",o.toggleButton),a(5),Un("visibility",o.toggleButton.value?"visible":"hidden"),p("ngStyle",o.invisibleTracerImageStyle),a(3),h(C(18,14,"PROPERTIES")),a(4),ft(" ",C(22,16,"TRANSPARENCY")," "),a(2),p("tooltip",it(20,zs,C(24,18,"OPACITY_TOOLTIP_DESCRIPTION"))),a(3),p("ngForOf",o.transparencyPresets))},dependencies:[Fe,yt,q,lo,qt,xi,M],styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}sd-card-loader[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}pu-icon[_ngcontent-%COMP%], .papycon[_ngcontent-%COMP%]{text-align:center}pu-icon.bt[_ngcontent-%COMP%], .papycon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #DADADA;border-radius:2px;height:62px;resize:none;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:solid 1px #DADADA;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.config-global[_ngcontent-%COMP%]{border-bottom:1px solid #DADADA;flex:0 0 auto;padding:20px 30px}.config-global-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:44px}.config-global-item[_ngcontent-%COMP%]   pu-toggle-button[_ngcontent-%COMP%]{margin-right:16px}.config-global-item-title[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;color:#1e1e1e;flex:0 0 auto;margin-right:10px;font-size:16px}.config-global-item-content[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;font-size:14px}.config-global-item-box[_ngcontent-%COMP%]{display:flex;align-items:center}.config-global-item-box[_ngcontent-%COMP%]   pu-toggle-button[_ngcontent-%COMP%]:last-child{margin-left:16px}.config-preview[_ngcontent-%COMP%]{position:relative;display:flex;min-height:535px;align-items:center;justify-content:center;flex:1 1 auto;padding:11px 12px;background-color:#f7f8f9}.config-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#fff}.config-preview[_ngcontent-%COMP%]   .preview-watermark[_ngcontent-%COMP%]{position:relative;background-color:#fff}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]{position:absolute;color:#1e1e1e;top:0;width:100%;height:100%;overflow:hidden}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;font-family:NotoSans-Regular}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute}.config-panel[_ngcontent-%COMP%]{flex:0 0 300px;padding:28px 16px;box-sizing:border-box;border-left:1px solid #DADADA;color:#1e1e1e}.config-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:28px}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;height:20px;font-family:NotoSans-Medium;font-size:13px;line-height:13px}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:3px 0 0 2px;cursor:pointer}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:12px}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   pu-toggle-button[_ngcontent-%COMP%]{margin-left:auto}.config-panel[_ngcontent-%COMP%]   .ep-button[_ngcontent-%COMP%]{width:68px}.config-panel[_ngcontent-%COMP%]   .ep-button[_ngcontent-%COMP%]:not(:first-child){margin-left:10px}.config-view[_ngcontent-%COMP%]{display:flex;flex:1 0 auto}.a4-paper[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:595px;height:857px}.preview-watermark[_ngcontent-%COMP%]{position:absolute!important;top:0}.sample-document-image[_ngcontent-%COMP%]{width:100%;height:100%}.sample-invisible-tracer-image[_ngcontent-%COMP%]{opacity:.2;z-index:2;background-repeat:repeat;width:100%;height:100%}.transparency-preset.active[_ngcontent-%COMP%]{background-color:#f79f1a;color:#fff}.transparency-preset.active.disabled[_ngcontent-%COMP%]{background-color:#dadada}"],changeDetection:0}));let n=i;return n})();var mr=Sr(Mr());var si=(()=>{let i=class i{translatePipe;constructor(e){this.translatePipe=e}transform(e){return/Mobile/i.test(e)?this.translatePipe.transform("MOBILE"):/Tablet/i.test(e)?this.translatePipe.transform("TABLET"):"PC"}};m(i,"\u0275fac",function(t){return new(t||i)(u(M,16))}),m(i,"\u0275pipe",Ln({name:"agent",type:i,pure:!0,standalone:!1}));let n=i;return n})();var ur=(()=>{let i=class i{params;portalRef;formBuilder;datePipe;agentPipe;changeDetectorRef;PC="PC";forms;constructor(e,t,o,s,d,_){this.params=e,this.portalRef=t,this.formBuilder=o,this.datePipe=s,this.agentPipe=d,this.changeDetectorRef=_}ngOnInit(){this.setModalForm(),this.changeDetectorRef.markForCheck()}setModalForm(){let{docName:e,creationTime:t,otherInfo:o,userAgent:s}=this.params,d=new mr.UAParser(s),{browser:_,device:O,os:w}=this.getUserAgentInfo(d);this.forms=this.formBuilder.group({docName:e,creationTime:this.datePipe.transform(t,"yyyy. MM. dd HH:mm"),browser:_,device:O,os:w,otherInfo:o})}getUserAgentInfo(e){let t=`${e.getBrowser().name} ${e.getBrowser().version}`,o=`${e.getOS().name} ${e.getOS().version}`,s=e.getDevice().type,d=s?this.agentPipe.transform(s):this.PC;return{browser:t,os:o,device:d}}onButtonClick(){this.portalRef.dispose()}};m(i,"\u0275fac",function(t){return new(t||i)(u(eo),u(to),u(xe),u(Le),u(si),u(L))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-invisible-tracer-detail-modal"]],standalone:!1,decls:32,vars:31,consts:[[3,"formGroup"],["size","small","formControlName","docName",3,"readonly"],["size","small","formControlName","creationTime",3,"readonly"],["size","small","formControlName","browser",3,"readonly"],["size","small","formControlName","device",3,"readonly"],["size","small","formControlName","os",3,"readonly"],["formControlName","otherInfo",3,"readOnly"],["size","small","color","white",1,"ep-button",3,"click"]],template:function(t,o){t&1&&(l(0,"h3"),f(1),g(2,"translate"),c(),l(3,"main",0)(4,"h4"),f(5),g(6,"translate"),c(),y(7,"pu-input",1),l(8,"h4"),f(9),g(10,"translate"),c(),y(11,"pu-input",2),l(12,"h4"),f(13),g(14,"translate"),c(),y(15,"pu-input",3),l(16,"h4"),f(17),g(18,"translate"),c(),y(19,"pu-input",4),l(20,"h4"),f(21),g(22,"translate"),c(),y(23,"pu-input",5),l(24,"h4"),f(25),g(26,"translate"),c(),y(27,"textarea",6),c(),l(28,"footer")(29,"button",7),P("click",function(){return o.onButtonClick()}),f(30),g(31,"translate"),c()()),t&2&&(a(),h(C(2,15,"DETAILS")),a(2),p("formGroup",o.forms),a(2),h(C(6,17,"DOC_TITLE")),a(2),p("readonly",!0),a(2),h(C(10,19,"CREATED_INVISIBLE_TRACER_AT_TIME")),a(2),p("readonly",!0),a(2),h(C(14,21,"BROWSER_INFO")),a(2),p("readonly",!0),a(2),h(C(18,23,"DEVICE")),a(2),p("readonly",!0),a(2),h(C(22,25,"OS")),a(2),p("readonly",!0),a(2),h(C(26,27,"OTHER_INFO")),a(2),p("readOnly",!0),a(3),h(C(31,29,"CLOSE")))},dependencies:[io,q,Oe,le,Se,Me,M],styles:["h3[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin:8px 0 12px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c}main[_ngcontent-%COMP%]{width:412px;height:563px;display:flex;flex-direction:column}main[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{margin-bottom:15px}main[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%] >input{background-color:#f4f4f4}main[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;background-color:#f4f4f4;width:100%;height:153px;padding:8px 4px;box-sizing:border-box;border-radius:2px;border:1px solid #DADADA;resize:none;outline:none;caret-color:#f79f1a}main[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:1px solid #F79F1A}footer[_ngcontent-%COMP%]{text-align:right;margin-top:20px}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}"],changeDetection:0}));let n=i;return n})();var Hs=["keywordInputRef"];function Ys(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.id)}}function Ws(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.docName)}}function Ks(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"translate"),c()),n&2){let r=i.$implicit;a(),h(C(2,1,r.type))}}function qs(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"date"),c()),n&2){let r=i.$implicit;a(),h(Te(2,1,r.createdAt,"yyyy-MM-dd"))}}function Qs(n,i){if(n&1&&(l(0,"div"),f(1),c()),n&2){let r=i.$implicit;a(),h(r.ip||"192.168.0.93")}}function Xs(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"agent"),c()),n&2){let r=i.$implicit;a(),h(C(2,1,r.agent))}}function Zs(n,i){if(n&1&&(l(0,"div"),f(1),g(2,"translate"),c()),n&2){let r=i.$implicit;a(),h(C(2,1,r.deleted?"DELETED":"NORMAL"))}}function Js(n,i){if(n&1){let r=T();l(0,"div")(1,"button",13),P("click",function(){let t=x(r).$implicit,o=b();return v(o.openDetailDialog(t))})("dblclick",function(t){return x(r),v(t.stopPropagation())}),y(2,"i",14),c()()}if(n&2){let r=i.$implicit;a(),p("disabled",r.deleted)}}function el(n,i){n&1&&(l(0,"div",15)(1,"div",16),y(2,"span",17),l(3,"p",18),f(4),g(5,"translate"),c()()()),n&2&&(a(4),h(C(5,1,"NO_DOCUMENT_LOG")))}var fr=(()=>{let i=class i{toastService;invisibleTracerService;translatePipe;changeDetectorRef;router;subs;sdModalService;baseHref;keywordInputRef;checkedTemplates=[];get deletedItems(){return this._deletedItems}set deletedItems(e){this._deletedItems=e}get isViewButtonUnavailable(){return!this.checkedIds.length||1<this.checkedIds.length||0<this.deletedItems.length}table=new Ne;checkedIds=[];_deletedItems=[];NUM_PER_PAGE="10";orderBy;asc;filterMenus=[];displayableColumns=[];constructor(e,t,o,s,d,_,O,w){this.toastService=e,this.invisibleTracerService=t,this.translatePipe=o,this.changeDetectorRef=s,this.router=d,this.subs=_,this.sdModalService=O,this.baseHref=w,this.filterMenus=[{label:this.translatePipe.transform("DATE"),type:"date",item:U.getDateFilterList(["custom"]),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:"custom"}],isMulti:!1}],this.displayableColumns=[{key:"id",title:this.translatePipe.transform("IDENTIFIER_NUMBER"),sortable:!0},{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"type",title:this.translatePipe.transform("TYPE"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("CREATED_INVISIBLE_TRACER_AT_DATE"),sortable:!0},{key:"ip",title:this.translatePipe.transform("IP"),sortable:!1},{key:"agent",title:this.translatePipe.transform("DEVICE"),sortable:!1},{key:"deleted",title:this.translatePipe.transform("STATUS"),sortable:!1},{key:"copy",title:"",sortable:!1}]}ngOnInit(){this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTableData()}})),this.getTableData()}openDoc(){if(this.checkedTemplates[0].deleted){this.toastService.create({icon:"failed",content:this.translatePipe.transform("REMOVED_DOCUMENT_ITEM_TOOLTIP")});return}sessionStorage.setItem(Ve.fromAdminStorage,"true"),window.open(this.makeStreamdocsUrl(this.checkedTemplates[0].id),"_blank"),sessionStorage.removeItem(Ve.fromAdminStorage)}getTableData(){let e=this.table.getPeriodValue();this.getInvisibleTracerList({pageIndex:this.table.getPageInfo().currentIndex,listingCount:parseInt(this.NUM_PER_PAGE),search:this.table.getKeyword(),from:e?U.formatDate(e.startDate):void 0,to:e?U.formatDate(e.endDate):void 0,orderBy:this.orderBy,ascending:this.asc})}getInvisibleTracerList(e){this.invisibleTracerService.getInvisibleTracerList(e).subscribe({next:t=>{this.table.setData(t.resources),this.table.setPageInfo(t.pageInfo.totalCount,this.NUM_PER_PAGE),this.changeDetectorRef.markForCheck()}})}onPageChanging(e){this.table.setPageCurrentIndex(e-1),this.getTableData()}openDetailDialog(e){this.sdModalService.createModal(ur,{docName:e.docName,creationTime:e.createdAt,otherInfo:e.data,userAgent:e.agent})}makeStreamdocsUrl(e){let t=this.router.serializeUrl(this.router.createUrlTree([this.baseHref,"view","sd"])),o=this.table.getData().find(s=>s.id===e)?.streamdocsId;if(!oe.isDefined(o))throw new He("StreamDocs ID is not defined");return`${t};streamdocsId=${o}`}searchKeyword(){this.keywordInputRef.blur(),this.table.reset(),this.getTableData()}onCheckedStatusChange(e){this.checkedIds=e,this.checkedTemplates=e.map(t=>this.table.getData().find(o=>o.id===t)).filter(oe.isDefined),this.deletedItems=this.checkedTemplates.filter(t=>t.deleted)}sortingChanges(e){this.orderBy=e.value===0?void 0:e.name,this.asc=e.value===0?void 0:e.value===1,this.getTableData()}};m(i,"\u0275fac",function(t){return new(t||i)(u(Y),u(kt),u(M),u(L),u(me),u(S),u(Tt),u(se))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-invisible-tracer-table"]],viewQuery:function(t,o){if(t&1&&ze(Hs,5),t&2){let s;je(s=$e())&&(o.keywordInputRef=s.first)}},standalone:!1,features:[k([S])],decls:27,vars:32,consts:[["keywordInputRef",""],["emptyEl",""],[1,"container"],[1,"form-list-header"],[1,"button-box"],["size","small","color","white",1,"ep-button",3,"click","disabled"],[1,"papycon","papycon-area-show"],[1,"tool",3,"formGroup"],["formControlName","filter",1,"small",3,"datePickerDirection","filterMenus"],["size","small","formControlName","keyword",1,"custom",3,"keydown.enter","focusout","useClearButton","placeholder"],[3,"checkedStatusChange","sortingChange","data","checkEnable","displayedColumns","emptyEl"],[4,"eTableCell","eTableCellFor"],[3,"pageChange","last","sideButtonCount","page","prevLabel","nextLabel"],["size","tiny","color","white",1,"ep-button",3,"click","dblclick","disabled"],[1,"papycon","papycon-memo3"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-preview"],[1,"title"]],template:function(t,o){if(t&1){let s=T();l(0,"main",2)(1,"header",3)(2,"div",4)(3,"button",5),P("click",function(){return x(s),v(o.openDoc())}),y(4,"i",6),f(5),g(6,"translate"),c()(),l(7,"div",7),y(8,"sd-filter-pop-up",8),l(9,"pu-input",9,0),g(11,"translate"),P("keydown.enter",function(){return x(s),v(o.searchKeyword())})("focusout",function(){return x(s),v(o.searchKeyword())}),c()()(),l(12,"e-table",10),P("checkedStatusChange",function(_){return x(s),v(o.onCheckedStatusChange(_))})("sortingChange",function(_){return x(s),v(o.sortingChanges(_))}),D(13,Ys,2,1,"div",11)(14,Ws,2,1,"div",11)(15,Ks,3,3,"div",11)(16,qs,3,4,"div",11)(17,Qs,2,1,"div",11)(18,Xs,3,3,"div",11)(19,Zs,3,3,"div",11)(20,Js,3,1,"div",11),c(),l(21,"footer")(22,"sd-pagination",12),g(23,"translate"),g(24,"translate"),P("pageChange",function(_){return x(s),v(o.onPageChanging(_))}),c()(),D(25,el,6,3,"ng-template",null,1,J),c()}if(t&2){let s=H(26);a(3),p("disabled",o.isViewButtonUnavailable),a(2),ft(" ",C(6,24,"VIEW")," "),a(2),p("formGroup",o.table.filterGroup),a(),p("datePickerDirection","right")("filterMenus",o.filterMenus),a(),p("useClearButton",!0)("placeholder",C(11,26,"INVISIBLE_TRACER_KEYWORD_FILTER_PLACEHOLDER")),a(3),p("data",o.table.getData())("checkEnable",!0)("displayedColumns",o.displayableColumns)("emptyEl",s),a(),p("eTableCellFor","id"),a(),p("eTableCellFor","docName"),a(),p("eTableCellFor","type"),a(),p("eTableCellFor","createdAt"),a(),p("eTableCellFor","ip"),a(),p("eTableCellFor","agent"),a(),p("eTableCellFor","deleted"),a(),p("eTableCellFor","copy"),a(2),p("last",o.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",o.table.getPageInfo().currentIndex+1)("prevLabel",C(23,28,"PREVIOUS"))("nextLabel",C(24,30,"NEXT"))}},dependencies:[Be,q,Oe,le,Se,Me,Ke,Ye,We,Le,M,si],styles:[".empty[_ngcontent-%COMP%]{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]{background-color:#fff}e-table[_ngcontent-%COMP%]{background-image:#FFFFFF;margin-top:20px;box-sizing:border-box;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]    {font-size:14px;line-height:24px}e-table[_ngcontent-%COMP%]     .id{flex:0 1 187px}e-table[_ngcontent-%COMP%]     .docName{flex:0 1 225px}e-table[_ngcontent-%COMP%]     td.docName{flex:0 1 145px;overflow:hidden;margin-right:80px}e-table[_ngcontent-%COMP%]     td.docName div{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}e-table[_ngcontent-%COMP%]     .type{flex:0 1 120px}e-table[_ngcontent-%COMP%]     .createdAt{flex:0 1 150px}e-table[_ngcontent-%COMP%]     .ip{flex:0 1 167px}e-table[_ngcontent-%COMP%]     .agent{flex:0 1 170px}e-table[_ngcontent-%COMP%]     .deleted{flex:0 1 110px}e-table[_ngcontent-%COMP%]     .copy{flex:1;font-size:14px}e-table[_ngcontent-%COMP%]     .copy div{margin-left:auto;margin-right:24px}e-table[_ngcontent-%COMP%]     .copy button{padding-left:10px;padding-right:10px}.container[_ngcontent-%COMP%]{padding:24px;background-color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center}footer[_ngcontent-%COMP%]{padding:50px 0 16px}.form-list-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:first-child){margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{width:400px;display:flex}.form-list-header[_ngcontent-%COMP%]   sd-filter-pop-up[_ngcontent-%COMP%]{margin-right:12px}.form-list-header[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:solid 1.2px #C8C8C8;padding:3px 12px;margin-left:8px}"],changeDetection:0}));let n=i;return n})();function il(n,i){n&1&&Rt(0)}function nl(n,i){n&1&&y(0,"sd-invisible-tracer-configs")}function ol(n,i){n&1&&y(0,"sd-invisible-tracer-table")}var gr=(()=>{let i=class i{invisibleTracerService;tabs=[{title:Fi.SETTINGS_INVISIBLE_TRACER,value:null},{title:Fi.SEARCH_LIST,value:null}];selectedTab;useFooter=!0;get InvisibleTracerTabs(){return Fi}constructor(e){this.invisibleTracerService=e}ngOnInit(){this.selectedTab=this.tabs[0]}selectTab(e){this.selectedTab=e,this.useFooter=this.selectedTab.title==="SETTINGS_INVISIBLE_TRACER"}onConfirmClick(){this.invisibleTracerService.publishConfirmButtonClick()}};m(i,"\u0275fac",function(t){return new(t||i)(u(kt))}),m(i,"\u0275cmp",I({type:i,selectors:[["sd-invisible-tracer"]],standalone:!1,decls:6,vars:5,consts:[["configs",""],["table",""],[3,"selectTab","confirm","tabs","useFooter"],[4,"ngIf","ngIfThen","ngIfElse"]],template:function(t,o){if(t&1){let s=T();l(0,"sd-tab-panel2",2),P("selectTab",function(_){return x(s),v(o.selectTab(_))})("confirm",function(){return x(s),v(o.onConfirmClick())}),D(1,il,1,0,"ng-container",3),c(),D(2,nl,1,0,"ng-template",null,0,J)(4,ol,1,0,"ng-template",null,1,J)}if(t&2){let s=H(3),d=H(5);p("tabs",o.tabs)("useFooter",o.useFooter),a(),p("ngIf",o.selectedTab.title===o.InvisibleTracerTabs.SETTINGS_INVISIBLE_TRACER)("ngIfThen",s)("ngIfElse",d)}},dependencies:[de,Lo,pr,fr],styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}sd-card-loader[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}pu-icon[_ngcontent-%COMP%], .papycon[_ngcontent-%COMP%]{text-align:center}pu-icon.bt[_ngcontent-%COMP%], .papycon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #DADADA;border-radius:2px;height:62px;resize:none;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:solid 1px #DADADA;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}"],changeDetection:0}));let n=i;return n})();var rl=[{path:"",component:qo,children:[{path:"login",component:lr,canActivate:[gn]},{path:"document-list",component:Zi,canActivate:[Ce]},{path:"removed-document-list",component:en,canActivate:[Ce]},{path:"account",component:Bo,canActivate:[Ce,Ge,un]},{path:"configs/view",component:No,canActivate:[Ce,Ge],canDeactivate:[Ao]},{path:"configs/watermark",loadChildren:()=>import("./chunk-EO7UXTJO.js").then(n=>n.WatermarkConfigsModule),canActivate:[Ce,Ge]},{path:"configs/invisible-tracer",component:gr,canActivate:[Ce,Ge,fn]},{path:"dashboard",component:Qo,canActivate:[Ce]},{path:"statistic-period",component:nn,canActivate:[Ce]},{path:"statistic-document",component:tn,canActivate:[Ce]},{path:"statistic-viewer",component:dn,canActivate:[Ce,Ge]},{path:"server-monitoring",component:an,canActivate:[Ce,Ge]},{path:"server-log",component:rn,canActivate:[Ce,Ge]},{path:"document-log",component:on,canActivate:[Ce,Ge]},{path:"system-management",component:ln,canActivate:[Ce,Ge]},{path:"license",component:ar,canActivate:[Ce,Ge]},{path:"**",redirectTo:"dashboard"}]}],hr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[gt.forChild(rl),gt]}));let n=i;return n})();var Cr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B]}));let n=i;return n})();var _r=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B,Zt]}));let n=i;return n})();var br=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({imports:[B,ue,Zt,gt,Ro]}));let n=i;return n})();var xr=(()=>{let i=class i{authService;router;toastService;translatePipe;constructor(e,t,o,s){this.authService=e,this.router=t,this.toastService=o,this.translatePipe=s}intercept(e,t){let o=Li;return e.headers.keys().forEach(s=>{let d=e.headers.get(s);oe.isDefined(d)&&(o=o.set(s,d))}),rt.token&&(o=o.append("authorization",rt.authorization)),t.handle(e.clone({headers:o})).pipe(xt(s=>this.handleError(s,e,t)))}handleError(e,t,o){if(e.status===It.Unauthorized){let s=rt.token!==null&&rt.token!==void 0,d=t.url.includes("v4/auth/refresh/admin"),_=!s||d;return this.authService.deleteCookie("accessToken"),_?(this.router.navigateByUrl("view/admin/login"),rt.token=null,_n(()=>e)):this.authService.sharedRefreshToken$.pipe(et(O=>(rt.token={accessToken:O.accessToken,refreshToken:rt.token.refreshToken},o.handle(t.clone({setHeaders:{Authorization:`Bearer ${O.accessToken}`}})))))}return e.status===It.InternalServerError&&this.toastService.create({content:this.translatePipe.transform("FAILED"),icon:"failed"}),_n(()=>e)}};m(i,"\u0275fac",function(t){return new(t||i)(N(ge),N(me),N(Y),N(M))}),m(i,"\u0275prov",j({token:i,factory:i.\u0275fac}));let n=i;return n})();var vr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[{provide:Kn,useClass:xr,multi:!0}]}));let n=i;return n})();var Pr=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[si,kt],imports:[B,pt,nt,ue,we,co,ve,So,dt,st,Uo,Vo,To]}));let n=i;return n})();var W0=(()=>{let i=class i{};m(i,"\u0275fac",function(t){return new(t||i)}),m(i,"\u0275mod",F({type:i})),m(i,"\u0275inj",R({providers:[qn(Qn())],imports:[Go,hr,uo.forRoot(),Co,B,or,Ei,Jo,pt,rr,Pr,sr,cr,Cr,_r,Fo,Ot,gt,cn,br,mn,vr]}));let n=i;return n})();export{W0 as AdminModule};
